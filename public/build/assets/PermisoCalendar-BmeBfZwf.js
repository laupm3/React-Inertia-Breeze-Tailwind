import{r,j as o,R as u}from"./app-fwyInB3c.js";import{F as P,i as N,a as $,b as R}from"./index-uaNH1BE9.js";import{SolicitudPermisosEvent as B}from"./INITIAL_PERMISOS-Ds5-PEcv.js";import{InfoCalendarDialog as F}from"./InfoButtonCalendar-DOkxZ1MG.js";import{EventClickDialog as T}from"./EventClickDialog-aC119EoM.js";/* empty css               */import"./dialog-iaZkf6Xy.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-DloWbRVd.js";import"./index-B7srb2QZ.js";import"./index-BIJodELy.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./utils-CytzSlOG.js";import"./x-2mzC_aTV.js";import"./createLucideIcon-DoJ0Kelj.js";import"./Button-CQuYVLGu.js";import"./index-BwobEAja.js";import"./ViewContext-CnIG9GpY.js";import"./index-WlsBA3k2.js";import"./TimelineSolicitud-BskMqnF0.js";import"./LucideIcon-CEqEhMjI.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./UserAvatar-cKyxDEhx.js";import"./SheetTable-CiCNZjvD.js";import"./SheetTable-oFCbTdfY.js";import"./sheet-DHc5Hgr8.js";import"./tabs-DtCm3GAf.js";import"./index-v24TFYKQ.js";import"./index-C_F9oucK.js";import"./SheetTableHeader-vhJO3F_n.js";import"./avatar-oBOSifLN.js";import"./Pill-l4GaXyto.js";import"./StatusEmpleadoMapColor-Bp2doaTo.js";import"./ContratosVigentesDialog-SpBmuJuH.js";import"./tooltip-DFfoxvAF.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-CeuhGnKJ.js";import"./DataHandlerContext--vx6a3_3.js";import"./useApiEndpoints-CHm1F3ft.js";import"./format-Be40hyfq.js";import"./constants-BKFt95HM.js";import"./toDate-qOSwr3PX.js";import"./WeekDay-C1ZcXS4Y.js";import"./GetModalidadIcon-BUgIPR97.js";import"./skeleton-DSiYFg9q.js";import"./getRoundingMethod-D0I6Z7xl.js";import"./es-DNLwfvrq.js";import"./parseISO-Efi0RkWR.js";import"./FileUploadArea-uzmkw7Uv.js";import"./dropdown-menu-bHoOJ61X.js";import"./StatusTipoPermisoMapColor-uADlCWR0.js";import"./ApprovalActionsFooter-Dx52I199.js";import"./DataHandlerContext-B_AogXyY.js";import"./ApprovalConfirmationDialog-BV97Lt0-.js";import"./button-Blwr-A5N.js";import"./textarea-C969rVin.js";const H=()=>{const n=new Date,a=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0");return`${String(n.getDate()).padStart(2,"0")}-${i}-${a}`},x=({children:n,tooltipText:a,tooltipClassName:i})=>{const[s,l]=r.useState(!1);return o.jsxs("div",{className:"relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[n,s&&a&&o.jsx("div",{className:`absolute top-full left-1/2 transform -translate-x-1/2 mt-2 p-2 min-w-max max-w-xs bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-full shadow-lg z-[1000] text-sm text-gray-700 dark:text-gray-200 ${i||""}`,children:a})]})};function At({initialView:n="dayGridMonth",solicitudesApi:a=[],permisosTiposApi:i=[],filteredEmployeeIds:s=[],filteredStatuses:l=[]}){const[L,f]=r.useState(null),[v,p]=r.useState(!1),[h,c]=r.useState(!1),[g,b]=r.useState(null),y=r.useRef(null),C=r.useCallback(t=>{const e=t.event.extendedProps.description,d=t.event.extendedProps.empleadoNombre,m=t.event.title,M=t.event.extendedProps.estadoSolicitud;return o.jsx("div",{className:`p-1 m-1 rounded-full text-custom-black cursor-pointer ${t.event.backgroundColor} transition-transform duration-300 ease-in-out hover:scale-95`,children:o.jsxs("div",{className:"flex items-center",children:[e&&o.jsx(x,{tooltipText:`${d} - Estado: ${M}`,children:u.isValidElement(e)?u.cloneElement(e):e}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx(x,{tooltipText:m,children:o.jsx("p",{className:"ml-1 text-xs text-current font-bold truncate text-custom-black dark:text-custom-white",children:m})})})]})})},[]),k=r.useCallback(t=>{f(t.view.calendar)},[]),w=r.useCallback(()=>{p(!0)},[]),D=r.useCallback(t=>{b(t.event),c(!0)},[]),E=r.useMemo(()=>{let t=B(a);return s&&s.length>0&&(t=t.filter(e=>{var d,m;return((m=(d=e.extendedProps.permisoCompleto)==null?void 0:d.empleado)==null?void 0:m.id)&&s.includes(String(e.extendedProps.permisoCompleto.empleado.id))})),l&&l.length>0&&(t=t.filter(e=>e.extendedProps.estadoSolicitud&&l.includes(e.extendedProps.estadoSolicitud))),t},[a,s,l]),S=r.useMemo(()=>{if(!i||i.length===0){const t=new Map;return a.forEach(e=>{e.permiso&&!t.has(e.permiso.id)&&t.set(e.permiso.id,e.permiso)}),Array.from(t.values())}return i},[a,i]),j=r.useMemo(()=>({today:H(),month:"Mes",week:"Semana",day:"Día",list:"Lista"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-full h-auto md:h-full overflow-x-auto",children:o.jsx(P,{ref:y,locale:"es",plugins:[N,$,R],headerToolbar:{left:"prev today next ",center:"title",right:"leyendaButton"},customButtons:{leyendaButton:{text:"Información de permisos",click:w}},initialView:n,editable:!1,selectable:!1,selectMirror:!0,dayMaxEvents:!0,events:E,eventContent:C,eventClick:D,buttonText:j,firstDay:1,slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},height:"auto",contentHeight:"auto",handleWindowResize:!0,windowResizeDelay:100,viewDidMount:k,datesSet:t=>{},allDaySlot:!1,eventOverlap:!1,slotEventOverlap:!1,forceEventDuration:!0,displayEventTime:!0,views:{dayGridMonth:{eventDisplay:"block"},timeGridWeek:{displayEventTime:!1,allDaySlot:!1}}})}),o.jsx(F,{isOpen:v,onClose:()=>p(!1),permisosData:S}),o.jsx(T,{isOpen:h,onClose:()=>c(!1),eventData:g})]})}export{At as default};
