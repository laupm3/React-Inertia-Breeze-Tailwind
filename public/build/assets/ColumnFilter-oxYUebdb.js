import{r as l,j as w}from"./app-fwyInB3c.js";import{u as y}from"./DataTableContext-BYrqyX0i.js";import{g as A}from"./AdvancedHeader-CpvwMmYr.js";import{M as E}from"./multi-select-BSyp-qjs.js";function k({column:e,labelFn:o,valueFn:i,className:h}){const{table:n}=y(),{columnDef:V,accessorFn:f}=e,{cell:p,title:x}=V,{columnFilters:v}=n.getState(),C=l.useMemo(()=>e.getFilterValue()||[],[e,v]),g=l.useMemo(()=>n.getPreFilteredRowModel().rows,[n]),R=t=>{if(!t||t.length===0)return[];const r=new Map;return t.reduce((m,u)=>{const a=A(u.original,e.id);if(!a)return m;const M=i?a:u.original,d=o?a:{row:u};if(Array.isArray(a))a.forEach(s=>{const c={value:i(s),label:o(s)};r.has(c.value)||r.set(c.value,c)});else{const s={value:i?i(M):f(M),label:o?o(d):p(d)};r.has(s.value)||r.set(s.value,s)}return m},r)},b=l.useMemo(()=>{const t=R(g);return Array.from(t.values())},[g,p,f]),j=l.useCallback(t=>{e==null||e.setFilterValue(t.length>0?t:void 0)},[e]);return w.jsx(E,{placeholder:x,column:e,options:b,onValueChange:j,defaultValue:C,className:h+"max-w-full"})}export{k as C};
