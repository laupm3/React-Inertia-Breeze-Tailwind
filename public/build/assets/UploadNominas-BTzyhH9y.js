import{r as i,j as e,S as q,x as Z}from"./app-fwyInB3c.js";import{A as J}from"./AuthenticatedLayout-B4CSARVj.js";import{u as X}from"./index-C-xs73Vr.js";import D from"./ExtensionIcon-DXg-3KoR.js";import{I as G}from"./LucideIcon-CEqEhMjI.js";import"./sidebar-CPh6C6LB.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./button-Blwr-A5N.js";import"./input-CqlBlYgU.js";import"./separator-BWKairMX.js";import"./index-BIJodELy.js";import"./sheet-DHc5Hgr8.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./x-2mzC_aTV.js";import"./createLucideIcon-DoJ0Kelj.js";import"./skeleton-DSiYFg9q.js";import"./tooltip-DFfoxvAF.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-CeuhGnKJ.js";import"./dropdown-menu-bHoOJ61X.js";import"./index-C_F9oucK.js";import"./index-v24TFYKQ.js";import"./check-5DjPwM22.js";import"./chevron-right-B1iws4WK.js";import"./popover-DaRbHQOK.js";import"./avatar-oBOSifLN.js";import"./PopUpIncidencias-CaovAEi3.js";import"./card-DYkZYgg5.js";import"./Button-CQuYVLGu.js";import"./textarea-C969rVin.js";import"./useTranslation-BtIkv0Na.js";import"./UserAvatar-cKyxDEhx.js";import"./ApplicationLogo-C2FcO4AY.js";import"./Yoopta-Dj4Guze5.js";import"./throttle-CmSTFqON.js";import"./index-WlsBA3k2.js";import"./PrimaryButton-SsXyLm2e.js";import"./DecisionModal-Dl8siGBG.js";import"./alert-dialog-kDfn0La3.js";import"./useNotifications-CSWGH93r.js";import"./ShowNotificactionFromJestream-cKOlvVdg.js";import"./OnboardingModal-D0HRNKzO.js";import"./Modal-BkRna8gK.js";import"./transition-ByAjZSmr.js";import"./StepItem-bNLmZaq8.js";import"./StepProgress-DNpLodXf.js";import"./WelcomeContent-BPJ5E7_N.js";import"./onboardingImages-CoczwfNn.js";import"./AboutContent-DOlAXyok.js";import"./TeamContent-C0DysUYq.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./chevron-up-OjKdrhzc.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./index-DpIruHMc.js";const K=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-upload",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),R=({onClick:m})=>e.jsxs("svg",{onClick:m,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-download cursor-pointer",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),v=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-x",children:[e.jsx("path",{d:"M18 6 6 18"}),e.jsx("path",{d:"m6 6 12 12"})]}),z=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-triangle-alert",children:[e.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}),e.jsx("path",{d:"M12 9v4"}),e.jsx("path",{d:"M12 17h.01"})]}),Q=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-file-x text-[#E60000] dark:text-[#FF9EA1]",children:[e.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),e.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),e.jsx("path",{d:"m14.5 12.5-5 5"}),e.jsx("path",{d:"m9.5 12.5 5 5"})]}),Y=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-sliders-horizontal cursor-pointer",children:[e.jsx("line",{x1:"21",x2:"14",y1:"4",y2:"4"}),e.jsx("line",{x1:"10",x2:"3",y1:"4",y2:"4"}),e.jsx("line",{x1:"21",x2:"12",y1:"12",y2:"12"}),e.jsx("line",{x1:"8",x2:"3",y1:"12",y2:"12"}),e.jsx("line",{x1:"21",x2:"16",y1:"20",y2:"20"}),e.jsx("line",{x1:"12",x2:"3",y1:"20",y2:"20"}),e.jsx("line",{x1:"14",x2:"14",y1:"2",y2:"6"}),e.jsx("line",{x1:"8",x2:"8",y1:"10",y2:"14"}),e.jsx("line",{x1:"16",x2:"16",y1:"18",y2:"22"})]});function ee(){const[m,u]=i.useState([]),[P,b]=i.useState([]),[B,k]=i.useState(!1),[F,W]=i.useState([]),[g,I]=i.useState(""),[d,y]=i.useState("Estado"),[O,p]=i.useState(!1),[N,C]=i.useState("Estado"),[l,h]=i.useState(1),f=10;i.useEffect(()=>{h(1)},[g,d]);const _=s=>{if(s.type!=="application/pdf")return{code:"file-invalid-type",message:"Extensión no soportada. El archivo debe ser de tipo PDF"};if(!s.name)return{code:"file-missing-name",message:"El archivo no tiene un nombre definido."};const r=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"].join("|"),o=s.name.replace(/\.pdf$/i,"");return new RegExp(`^[0-9]{8}[A-Za-z]_(${r})_2[0-9]{3}(_[A-Za-z]+)?$`,"i").test(o)?null:{code:"file-invalid-name",message:"Error de formato en el nombre del archivo."}},U=s=>{const t=s/1048576;return Number(t.toFixed(1))},E=s=>URL.createObjectURL(s),H=i.useCallback(async(s,t)=>{if(t.length>0){const r=t.map(o=>({name:o.file.name,size:`(${U(o.file.size)} MB)`,error:o.errors[0].message,unsupportedExt:o.errors[0].code==="file-invalid-type",preview:E(o.file)}));u(o=>[...o,...r])}if(s.length>0){const r=s.map(n=>Object.assign(n,{preview:E(n)}));W(r),k(!0);const o=new FormData;r.forEach(n=>o.append("files[]",n));try{const c=await(await fetch(route("admin.nominas.upload.multiple"),{method:"POST",body:o,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json(),w=new Map;if(r.forEach(x=>w.set(x.name.toLowerCase(),x.preview)),c.errors&&c.errors.length>0){const x=c.errors.map(a=>({...a,preview:w.get(a.name.toLowerCase())||null}));u(a=>[...a,...x])}if(c.accepted&&c.accepted.length>0){const x=c.accepted.map(a=>({name:a.name,size:a.size,msg:"Correcto",preview:w.get(a.name.toLowerCase())||null}));b(a=>[...a,...x])}}catch(n){console.error("Error al subir archivos:",n.message)}finally{k(!1)}}},[]);i.useEffect(()=>()=>{F.forEach(s=>URL.revokeObjectURL(s.preview))},[F]);const{getRootProps:$,getInputProps:T}=X({accept:{"application/pdf":[".pdf"]},validator:_,maxFiles:300,maxSize:209715200,multiple:!0,onDrop:H}),L=s=>{s.error?u(t=>t.filter(r=>r.name!==s.name)):b(t=>t.filter(r=>r.name!==s.name))},A=s=>{const t=s.name.toLowerCase().includes(g.toLowerCase());let r=!0;return d!==""&&d!=="Estado"&&(s.msg?r=s.msg.toLowerCase().includes(d.toLowerCase()):s.error&&(r=s.error.toLowerCase().includes(d.toLowerCase()))),d=="Archivo ya existente"&&(r=s.error&&s.error.toLowerCase().includes("ya existe")),t&&r},V=P.filter(A),M=[...m.filter(A),...V],j=Math.ceil(M.length/f),S=M.slice((l-1)*f,l*f);return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"Nóminas"}),e.jsx("h1",{className:"mx-4 sm:mx-6 lg:mx-10 my-2 text-2xl font-bold",children:"Subida de Nóminas"}),e.jsx("div",{className:"flex justify-end mx-4 sm:mx-6 lg:mx-10",children:e.jsxs(Z,{href:route("admin.nominas.history"),className:"inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 dark:hover:bg-gray-400 font-semibold rounded-full py-2 px-4 bg-[#F6F6F6] dark:bg-[#2C3034] hover:bg-custom-gray-dark text-custom-blackLight hover:text-custom-white dark:text-custom-white duration-300 w-fit",children:["Histórico de Nóminas",e.jsx(G,{name:"ArrowUpRight",className:"w-4 ml-2"})]})}),e.jsxs("div",{className:"text-sm bg-[#FDF5D3] dark:bg-[#1D1F00] text-[#DC7609] dark:text-[#F3CF58] mx-4 sm:mx-6 lg:mx-10 my-4 p-4 rounded-xl",children:[e.jsxs("p",{className:"inline-flex items-center gap-2 font-bold",children:[e.jsx(z,{})," Recuerda"]}),e.jsxs("p",{className:"px-8",children:["Para subir archivos de manera correcta, deben tener el siguiente formato: ",e.jsx("span",{className:"font-bold",children:"NIF del Empleado_Mes_Año_Descripción (la descripción es opcional)"})," y solo se acepta extensión ",e.jsx("span",{className:"font-bold",children:"PDF"})]})]}),e.jsxs("div",{...$(),className:"border-dashed-custom flex flex-col items-center justify-center p-6 mx-4 sm:mx-6 lg:mx-10 mb-6 text-black dark:text-black cursor-pointer rounded-xl",children:[e.jsx("input",{...T()}),e.jsxs("span",{className:"inline-flex gap-2 dark:bg-[#2C3034] text-[#575757] dark:text-white font-bold p-3 rounded-full",children:[e.jsx(K,{})," Subir archivo"]}),e.jsx("span",{className:"font-medium text-[#8E8E8E] dark:text-[#F6F6F6] mt-4",children:"Arrastra y suelta tu archivo aquí o haz clic para seleccionar."}),e.jsx("p",{className:"text-[#8E8E8E] dark:text-[#F6F6F6] font-bold",children:"(Máx. 200 MB o 300 archivos)"})]}),e.jsxs("div",{className:"w-full flex justify-between",children:[B?e.jsxs("div",{className:"mx-4 sm:mx-6 lg:mx-10 mb-0 inline-flex gap-2 justify-start",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-loader",children:[e.jsx("path",{d:"M12 2v4"}),e.jsx("path",{d:"m16.2 7.8 2.9-2.9"}),e.jsx("path",{d:"M18 12h4"}),e.jsx("path",{d:"m16.2 16.2 2.9 2.9"}),e.jsx("path",{d:"M12 18v4"}),e.jsx("path",{d:"m4.9 19.1 2.9-2.9"}),e.jsx("path",{d:"M2 12h4"}),e.jsx("path",{d:"m4.9 4.9 2.9 2.9"})]}),e.jsx("span",{children:"Subiendo..."})]}):e.jsx("div",{className:"w-1/2"}),e.jsxs("div",{className:"mx-4 sm:mx-6 lg:mx-10 mb-0 w-full sm:w-1/2 flex flex-row justify-end items-center gap-2",children:[e.jsxs("span",{className:"inline-flex gap-3 cursor-pointer",onClick:()=>{p(!0)},children:["Filtrar",e.jsx("span",{className:"text-[#FB7D16]",children:e.jsx(Y,{})})]}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre de archivo...",value:g,onChange:s=>I(s.target.value),className:"w-3/4 sm:w-2/5 px-4 py-2 border rounded-3xl bg-[#F6F6F6] dark:bg-[#2C3034] text-[#575757] dark:text-[#F6F6F6] placeholder-[#575757]/80 dark:placeholder-[#F6F6F6]/80"})]})]}),O&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-[#FFF] dark:bg-[#212529] rounded-3xl w-11/12 sm:w-8/12 md:w-6/12 lg:w-4/12 xl:w-3/12 mx-4 px-6 sm:px-8 pt-6 sm:pt-8 pb-6 sm:pb-8 max-w-md",children:[e.jsxs("h2",{className:"text-xl font-bold text-[#002048] dark:text-[#F2F2F2] flex justify-between items-center mb-5",children:["Filtros",e.jsx("span",{className:"text-sm cursor-pointer dark:hover:text-red-500 hover:text-red-500 text-[#002048] dark:text-[#F2F2F2]",onClick:()=>{C("Estado"),y(""),p(!1)},children:"Borrar filtros"})]}),e.jsxs("select",{value:N,onChange:s=>C(s.target.value),className:"w-full border rounded-2xl text-black dark:text-[#E2E2E2] bg-[#F6F6F6] dark:bg-[#2C3034]",children:[e.jsx("option",{value:"Estado",disabled:!0,children:"Estado"}),e.jsx("option",{value:"Correcto",children:"Correcto"}),e.jsx("option",{value:"Error de formato",children:"Error de formato"}),e.jsx("option",{value:"Empleado no encontrado",children:"Empleado no encontrado"}),e.jsx("option",{value:"Archivo ya existente",children:"Archivo ya existente"})]}),e.jsxs("div",{className:"w-full inline-flex justify-end gap-4 mt-8",children:[e.jsx("button",{onClick:()=>p(!1),className:"bg-transparent text-black dark:text-[#F2F2F2] hover:bg-[#E2E2E2] dark:hover:bg-[#444] rounded-3xl px-7 py-2",children:"Cancelar"}),e.jsx("button",{onClick:()=>{y(N),p(!1)},className:"text-white dark:text-black bg-[#FB7D16] hover:bg-[#002048] dark:hover:bg-[#F2F2F2] rounded-3xl px-7 py-2",children:"Aplicar"})]})]})}),S.length>0?e.jsx("div",{className:"mx-4 sm:mx-6 lg:mx-10 text-[#575757] dark:text-[#F6F6F6] h-[87dvh]",children:S.map((s,t)=>s.error?e.jsxs("div",{className:"rounded-3xl bg-[#E60000]/20 dark:bg-[#C62828]/30 my-2 py-4 px-4 sm:px-8 w-full flex flex-col sm:flex-row gap-2 sm:gap-2 items-start sm:items-center",children:[s.unsupportedExt?e.jsx(Q,{}):e.jsx(D,{extension:s.name.split(".").pop(),isDarkMode:!1,size:40}),e.jsxs("span",{className:"w-full sm:w-3/6 inline-flex flex-col",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"font-bold",children:s.size})]}),s.error&&(s.error.includes("El archivo")||s.error.includes("Empleado no encontrado"))?e.jsxs("span",{className:"w-full sm:w-2/6 inline-flex gap-2 text-[#DC7609] dark:text-[#F3CF58]",children:[e.jsx(z,{})," ",s.error]}):e.jsxs("span",{className:"w-full sm:w-2/6 inline-flex gap-2 text-[#E60000] dark:text-[#FF9EA1]",children:[e.jsx(v,{})," ",s.error]}),e.jsxs("span",{className:"w-full sm:w-1/6 inline-flex gap-6 justify-end sm:justify-end items-center mt-2 sm:mt-0",children:[s.preview&&e.jsx("span",{onClick:()=>window.open(s.preview,"_blank"),className:"cursor-pointer bg-[#F6F6F6] dark:bg-[#2C3034] hover:bg-[#C2C2C2] dark:hover:bg-[#111] rounded-full p-2",children:e.jsx(R,{})}),e.jsx("span",{onClick:()=>L(s),className:"cursor-pointer text-[#CE2C31] dark:text-[#FF9EA1] hover:bg-[#E60000]/20 dark:hover:bg-[#E60000] rounded-full p-1",children:e.jsx(v,{})})]})]},t):e.jsxs("div",{className:"rounded-2xl bg-[#F6F6F6] dark:bg-[#2C3034] my-2 py-4 px-4 sm:px-8 w-full flex flex-col sm:flex-row gap-2 sm:gap-2 items-start sm:items-center",children:[e.jsx(D,{extension:s.name.split(".").pop(),isDarkMode:!1,size:40}),e.jsxs("span",{className:"w-full sm:w-3/6 inline-flex flex-col",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"font-bold",children:s.size})]}),e.jsxs("span",{className:"w-full sm:w-2/6 inline-flex gap-2 text-[#008A2E] dark:text-[#59F3A6]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-check",children:e.jsx("path",{d:"M20 6 9 17l-5-5"})}),s.msg]}),e.jsxs("span",{className:"w-full sm:w-1/6 inline-flex gap-6 justify-end sm:justify-end items-center mt-2 sm:mt-0",children:[s.preview&&e.jsx("span",{onClick:()=>window.open(s.preview,"_blank"),className:"cursor-pointer bg-[#F6F6F6] dark:bg-[#2C3034] hover:bg-[#2C3034] dark:hover:bg-[#222] rounded-full p-2",children:e.jsx(R,{})}),e.jsx("span",{onClick:()=>L(s),className:"cursor-pointer text-[#CE2C31] dark:text-[#FF9EA1] dark:hover:bg-[#E60000] rounded-full p-1",children:e.jsx(v,{})})]})]},t))}):e.jsx("div",{className:"mx-4 sm:mx-6 lg:mx-10 text-center text-gray-500",children:"No hay archivos para mostrar."}),j>1&&e.jsxs("div",{className:"flex justify-end my-5 mx-4 sm:mx-6 lg:mx-10 pagination",children:[e.jsx("button",{disabled:l==1,onClick:()=>h(l-1),className:"px-3 py-1 mx-1 bg-transparent rounded text-[#575757] dark:text-[#F6F6F6] disabled:text-[#575757]/50 dark:disabled:text-[#F6F6F6]/50",children:"< Anterior"}),Array.from({length:j},(s,t)=>e.jsx("button",{onClick:()=>h(t+1),className:`px-3 py-1 mx-1 rounded ${l===t+1?"bg-blue-500 text-white":"bg-gray-200 dark:bg-[#2C3034]"}`,children:t+1},t)),e.jsx("button",{disabled:l==j,onClick:()=>h(l+1),className:"px-3 py-1 mx-1 text-[#575757] dark:text-[#F6F6F6] disabled:text-[#575757]/50 dark:disabled:text-[#F6F6F6]/50",children:"Siguiente >"})]})]})}ee.layout=m=>e.jsx(J,{children:m});export{ee as default};
