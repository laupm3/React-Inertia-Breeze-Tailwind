import{r as s,j as r}from"./app-fwyInB3c.js";import{c as f}from"./utils-CytzSlOG.js";import{I as j}from"./LucideIcon-CEqEhMjI.js";import{B as v}from"./button-Blwr-A5N.js";import{C as E,f as k,b as I,c as P,d as S,e as M}from"./command-PoUoScut.js";import{P as O,a as A,b as B}from"./popover-DaRbHQOK.js";import{E as u}from"./EmpleadoAvatar-BBWI_HPN.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-B7srb2QZ.js";import"./index-BIJodELy.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./dialog-iaZkf6Xy.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./avatar-oBOSifLN.js";import"./tooltip-DFfoxvAF.js";import"./index-CeuhGnKJ.js";const he=({allEvents:m,onFilterChange:g,className:C,currentSelectedEmployees:a})=>{const[p,h]=s.useState(!1),[o,x]=s.useState(a||[]),[i,w]=s.useState("");s.useEffect(()=>{a&&x(a)},[a]);const d=s.useMemo(()=>{if(!m||m.length===0)return[];const e=new Map;return m.forEach(t=>{t.empleado&&t.empleado.id&&!e.has(t.empleado.id)&&e.set(t.empleado.id,t.empleado)}),Array.from(e.values())},[m]),y=s.useMemo(()=>i?d.filter(e=>(e.nombreCompleto||e.nombre||"").toLowerCase().includes(i.toLowerCase())):d,[d,i]),b=e=>{x(t=>{const l=t.find(c=>c.id===e.id);let n;return l?n=t.filter(c=>c.id!==e.id):n=[...t,e],g(n),n})},N=e=>e.nombreCompleto||e.nombre||`Empleado ${e.id}`;return r.jsxs(O,{open:p,onOpenChange:h,children:[r.jsx(A,{asChild:!0,children:r.jsxs(v,{variant:"outline",role:"combobox","aria-expanded":p,className:f("w-full md:w-auto justify-between rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",C),onClick:()=>h(!p),children:[r.jsxs("div",{children:[o.length===0&&"Filtrar por empleado",o.length===1&&r.jsx(u,{empleado:o[0]},o[0].id),o.length>1&&r.jsx(React.Fragment,{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(u,{empleado:o[0]}),r.jsxs("span",{className:"text-xs ml-1 p-1 rounded-full bg-custom-gray-dark text-white",children:["+",o.length-1," más"]})]})})]}),r.jsx(j,{name:"ChevronsUpDown",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(B,{className:"min-w-[var(--radix-popover-trigger-width)] w-max p-0",align:"start",children:r.jsxs(E,{children:[r.jsx(k,{placeholder:"Buscar empleado...",value:i,onValueChange:w,className:"h-9 rounded-t-md rounded-b-none"}),r.jsxs(I,{children:[r.jsx(P,{children:"Ningún empleado encontrado."}),r.jsx(S,{children:y.map(e=>{const t=o.some(l=>l.id===e.id);return r.jsxs(M,{value:N(e),onSelect:()=>b(e),children:[r.jsx(j,{name:"Check",className:f("mr-2 h-4 w-4",t?"opacity-100":"opacity-0")}),r.jsx(u,{empleado:e,size:"sm",className:"mr-2"})]},e.id)})})]})]})})]})};export{he as default};
