import{r,j as e}from"./app-fwyInB3c.js";import{u as x}from"./DataTableContext-BYrqyX0i.js";import{D as p,a as f,b,d as w,i as S,c as j}from"./dropdown-menu-bHoOJ61X.js";import{B as g}from"./Button-CQuYVLGu.js";import{I as m}from"./LucideIcon-CEqEhMjI.js";import{u as C}from"./useTranslation-BtIkv0Na.js";const h=r.memo(function({size:o,currentSize:i,totalRows:n,onSizeChange:c}){const a=o==="all",t=a?n:o,u=t===i,d=r.useCallback(()=>{c(t)},[c,t]);return e.jsx(w,{checked:u,onCheckedChange:d,className:`focus:bg-custom-gray-semiLight ${u?"bg-custom-gray-dark text-white":""}`,children:a?`Total (${n})`:o})});function y(){const{table:s,pageSizeOptions:o,totalRows:i}=x(),n=s.getState().pagination.pageSize,{t:c}=C(["datatable"]),a=r.useCallback(u=>{s.setPageSize(Number(u))},[s]),t=r.useMemo(()=>o.filter(u=>u<=i&&u!==i),[o,i]);return e.jsxs(p,{children:[e.jsx(f,{asChild:!0,children:e.jsxs(g,{variant:"secondary",children:[e.jsxs("span",{children:[c("tables.paginador"),": ",n]}),e.jsx(m,{name:"ChevronDown",className:"w-4"})]})}),e.jsxs(b,{align:"end",className:"bg-custom-gray-default dark:bg-custom-blackLight",children:[t.map(u=>e.jsx(h,{size:u,currentSize:n,onSizeChange:a,totalRows:i},u)),e.jsx(h,{size:"all",currentSize:n,onSizeChange:a,totalRows:i},"all")]})]})}h.displayName="PageSizeItem";const P=r.memo(y),v=r.memo(({hideableColumns:s,onUpdate:o,updateKey:i})=>{const n=r.useCallback(t=>{t.stopPropagation(),s.filter(l=>l.getIsVisible()).length===s.length?s.forEach(l=>{l.getIsVisible()&&l.toggleVisibility(!1)}):s.forEach(l=>{l.getIsVisible()||l.toggleVisibility(!0)}),setTimeout(()=>o(),0)},[s,o]),a=s.filter(t=>t.getIsVisible()).length===s.length;return e.jsxs(j,{onClick:n,onSelect:t=>t.preventDefault(),className:"flex items-center gap-2 cursor-pointer font-medium text-custom-orange hover:text-custom-blue dark:text-custom-white dark:hover:text-custom-white",children:[e.jsx(m,{name:a?"EyeOff":"Eye",className:"w-4 h-4"}),e.jsx("span",{children:a?"Ocultar todas las columnas":"Mostrar todas las columnas"})]})}),N=r.memo(({column:s,updateKey:o,onUpdate:i})=>{var a;const n=r.useCallback(t=>{t.stopPropagation(),s.toggleVisibility(!s.getIsVisible()),setTimeout(()=>i(),0)},[s,i]),c=s.getIsVisible();return e.jsxs(j,{onClick:n,onSelect:t=>t.preventDefault(),className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center w-4 h-4 rounded-sm",children:c&&e.jsx(m,{name:"Check",className:"w-3 h-3 text-custom-blackSemi dark:text-custom-white"})}),e.jsx("span",{children:((a=s==null?void 0:s.columnDef)==null?void 0:a.title)||s.id})]},`${s.id}-${o}`)});function F(){const{table:s}=x(),{t:o}=C("datatable"),[i,n]=r.useState(!1),[c,a]=r.useState(0),t=r.useMemo(()=>s.getAllColumns().filter(l=>l.getCanHide()),[s]),u=r.useCallback(l=>{n(l),l&&a(k=>k+1)},[]),d=r.useCallback(()=>{a(l=>l+1)},[]);return t.length>0&&e.jsxs(p,{open:i,onOpenChange:u,children:[e.jsx(f,{asChild:!0,children:e.jsxs(g,{variant:"secondary",children:[o("tables.columnas")," ",e.jsx(m,{name:"ChevronDown",className:"w-4"})]})}),e.jsxs(b,{align:"end",className:"bg-custom-gray-default dark:bg-custom-blackLight max-h-[400px] overflow-y-auto",onCloseAutoFocus:l=>l.preventDefault(),onEscapeKeyDown:()=>n(!1),onPointerDownOutside:()=>n(!1),children:[e.jsx(v,{hideableColumns:t,onUpdate:d,updateKey:c},`show-all-${c}`),e.jsx(S,{}),t.map(l=>e.jsx(N,{column:l,updateKey:c,onUpdate:d},`${l.id}-${c}`))]})]})}function T(){const[s,o]=r.useState(!1),{table:i,filterColumns:n}=x(),c=()=>{i.resetColumnFilters(),o(!1)};return Object.keys(n).length>0&&e.jsxs(p,{open:s,onOpenChange:o,modal:!1,children:[e.jsx(f,{asChild:!0,children:e.jsxs(g,{variant:"outline",className:"rounded-full bg-hidden border-none",children:["Filtros"," ",e.jsx(m,{name:"SlidersHorizontal",className:"ml-1 w-5 text-custom-orange"})]})}),e.jsx(b,{align:"start",className:"bg-custom-gray-default dark:bg-custom-blackLight rounded-2xl",onCloseAutoFocus:a=>a.preventDefault(),children:e.jsxs("div",{className:"flex flex-col gap-2 p-2 w-full min-w-[20rem] max-w-[20rem]",children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("h4",{className:"text-lg font-bold",children:"Columnas"}),e.jsx(g,{className:"bg-transparent hover:bg-slate-200 dark:hover:bg-accent text-custom-blue dark:text-custom-white rounded-full",onClick:c,children:"Borrar Filtros"})]}),e.jsx("div",{className:"flex flex-col gap-y-3",children:Object.keys(n).map(a=>{const t=i.getColumn(a);return e.jsx("div",{children:t.columnDef.header({column:t})},a)})})]})})]})}export{F as C,P,T};
