import{r as l,G as _,j as e}from"./app-fwyInB3c.js";import{toast as j}from"./index-WlsBA3k2.js";import{I as x}from"./InputError-CrNaC_eR.js";import{I as p}from"./InputLabel-DwHTKIkK.js";import{B as n}from"./Button-CQuYVLGu.js";import{I as f}from"./input-CqlBlYgU.js";import{I as o}from"./LucideIcon-CEqEhMjI.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";function W({className:I=""}){const g=l.useRef(),w=l.useRef(),{data:a,setData:i,errors:d,put:N,reset:m,processing:E,recentlySuccessful:z}=_({current_password:"",password:"",password_confirmation:""}),[h,v]=l.useState(!1),[y,k]=l.useState(!1),[b,C]=l.useState(!1),S=()=>{N(route("user-password.update"),{errorBag:"updatePassword",preserveScroll:!0,onSuccess:()=>{m(),j.success("Contraseña actualizada correctamente")},onError:s=>{s.password&&(m("password","password_confirmation"),g.current.focus()),s.current_password&&(m("current_password"),w.current.focus()),j.error("Error al actualizar la contraseña. Vuelva a intentarlo.")}})},u=s=>{let t=0;const r={length:s.length>=8,uppercase:/[A-Z]/.test(s),lowercase:/[a-z]/.test(s),special:/[!@#$%^&*(),.?":{}|<>]/.test(s),numbers:/[0-9]/.test(s)};return r.length&&(t+=1),r.uppercase&&(t+=1),r.lowercase&&(t+=1),(r.special||r.numbers)&&(t+=1),{strength:t,requirements:r}},c=s=>{const{strength:t}=u(s);switch(t){case 0:return{level:"Muy débil",color:"bg-red-500",textColor:"text-red-600",description:"La contraseña es muy insegura"};case 1:return{level:"Débil",color:"bg-red-400",textColor:"text-red-500",description:"Necesita más requisitos de seguridad"};case 2:return{level:"Regular",color:"bg-yellow-500",textColor:"text-yellow-600",description:"Contraseña moderadamente segura"};case 3:return{level:"Fuerte",color:"bg-green-500",textColor:"text-green-600",description:"Buena seguridad de contraseña"};case 4:return{level:"Muy fuerte",color:"bg-green-600",textColor:"text-green-700",description:"Excelente seguridad de contraseña"};default:return{level:"",color:"bg-gray-300",textColor:"text-gray-500",description:""}}};return e.jsx("div",{className:"flex flex-col",children:e.jsxs("form",{onSubmit:S,className:"flex flex-col",children:[e.jsx("p",{className:"mt-8 lg:mt-0 text-lg font-bold text-custom-blue dark:text-white",children:"Actualizar Contraseña"}),e.jsx("p",{className:"text-xs w-3/4 text-custom-gray-semiDark dark:text-custom-gray-semiLight",children:"Asegúrate de que tu cuenta esté usando una contraseña larga y aleatoria para mantenerte seguro."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex flex-col mt-6 lg:flex-row items-center",children:[e.jsx(p,{htmlFor:"current_password",value:"Contraseña Actual",className:"w-full font-bold lg:w-1/3 text-custom-blue dark:text-white"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(f,{id:"current_password",ref:w,value:a.current_password,onChange:s=>i("current_password",s.target.value),type:h?"text":"password",className:"block w-full rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi pr-10",autoComplete:"current-password"}),e.jsx(n,{type:"button",variant:"secondary",size:"icon",tabIndex:-1,className:"absolute inset-y-0 right-0 flex items-center text-custom-gray-darker  dark:text-custom-white",onClick:()=>v(s=>!s),children:h?e.jsx(o,{name:"Eye",className:"w-5 h-5"}):e.jsx(o,{name:"EyeOff",className:"w-5 h-5"})})]}),e.jsx(x,{message:d.current_password,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[e.jsx(p,{htmlFor:"password",value:"Nueva contraseña",className:"w-full font-bold lg:w-1/3 text-custom-blue dark:text-white "}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(f,{id:"password",ref:g,value:a.password,onChange:s=>i("password",s.target.value),type:y?"text":"password",className:"block w-full rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi pr-10",autoComplete:"new-password"}),e.jsx(n,{type:"button",variant:"secondary",size:"icon",tabIndex:-1,className:"absolute inset-y-0 right-0 flex items-center text-custom-gray-darker dark:text-custom-white",onClick:()=>k(s=>!s),children:y?e.jsx(o,{name:"Eye",className:"w-5 h-5"}):e.jsx(o,{name:"EyeOff",className:"w-5 h-5"})})]}),a.password&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex flex-row justify-between gap-2 mb-3",children:[1,2,3,4].map(s=>{const{strength:t}=u(a.password),{color:r}=c(a.password);return e.jsx("div",{className:`h-2 w-1/4 rounded-full transition-all duration-300 ${t>=s?r:"bg-gray-300 dark:bg-gray-600"}`},s)})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`text-sm font-medium ${c(a.password).textColor}`,children:["Seguridad: ",c(a.password).level]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(a.password).description})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:(()=>{const{requirements:s}=u(a.password);return[{key:"length",text:"Mínimo 8 caracteres",met:s.length},{key:"uppercase",text:"Una mayúscula",met:s.uppercase},{key:"lowercase",text:"Una minúscula",met:s.lowercase},{key:"special",text:"Carácter especial o número",met:s.special||s.numbers}].map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.met?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`}),e.jsx("span",{className:`${t.met?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:t.text})]},t.key))})()})]})]})]}),e.jsx(x,{message:d.password,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[e.jsx(p,{htmlFor:"password_confirmation",value:"Confirmar contraseña",className:"w-full font-bold lg:w-1/3 text-custom-blue dark:text-white"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(f,{id:"password_confirmation",value:a.password_confirmation,onChange:s=>i("password_confirmation",s.target.value),type:b?"text":"password",className:"block w-full rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi pr-10",autoComplete:"new-password"}),e.jsx(n,{type:"button",variant:"secondary",size:"icon",tabIndex:-1,className:"absolute inset-y-0 right-0 flex items-center text-custom-gray-darker dark:text-custom-white",onClick:()=>C(s=>!s),children:b?e.jsx(o,{name:"Eye",className:"w-5 h-5"}):e.jsx(o,{name:"EyeOff",className:"w-5 h-5"})})]}),e.jsx(x,{message:d.password_confirmation,className:"mt-2"})]}),e.jsx("div",{className:"flex col-span-full justify-end items-center gap-2 mt-8",children:e.jsx(n,{type:"submit",className:"w-fit px-6",children:"Guardar cambios"})})]})]})})}export{W as default};
