import{r as i,t as _,j as R}from"./app-fwyInB3c.js";import{u as U}from"./index-p2DxCSsL.js";import{c as h}from"./index-DmpKZt4E.js";import{P as w,d as j}from"./index-BIJodELy.js";import{u as x}from"./index-DloWbRVd.js";import{u as m}from"./index-DmaU4p-o.js";var z=_[" useId ".trim().toString()]||(()=>{}),H=0;function re(t){const[e,s]=i.useState(z());return U(()=>{s(n=>n??String(H++))},[t]),t||(e?`radix-${e}`:"")}function M(t,e=globalThis==null?void 0:globalThis.document){const s=m(t);i.useEffect(()=>{const n=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var K="DismissableLayer",p="dismissableLayer.update",X="dismissableLayer.pointerDownOutside",Y="dismissableLayer.focusOutside",O,T=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$=i.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:l,onDismiss:d,...E}=t,u=i.useContext(T),[c,B]=i.useState(null),f=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=i.useState({}),F=x(e,o=>B(o)),b=Array.from(u.layers),[W]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),k=b.indexOf(W),P=c?b.indexOf(c):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,D=P>=k,N=J(o=>{const v=o.target,C=[...u.branches].some(y=>y.contains(v));!D||C||(r==null||r(o),l==null||l(o),o.defaultPrevented||d==null||d())},f),L=Q(o=>{const v=o.target;[...u.branches].some(y=>y.contains(v))||(a==null||a(o),l==null||l(o),o.defaultPrevented||d==null||d())},f);return M(o=>{P===u.layers.size-1&&(n==null||n(o),!o.defaultPrevented&&d&&(o.preventDefault(),d()))},f),i.useEffect(()=>{if(c)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(O=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),g(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=O)}},[c,f,s,u]),i.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),g())},[c,u]),i.useEffect(()=>{const o=()=>I({});return document.addEventListener(p,o),()=>document.removeEventListener(p,o)},[]),R.jsx(w.div,{...E,ref:F,style:{pointerEvents:A?D?"auto":"none":void 0,...t.style},onFocusCapture:h(t.onFocusCapture,L.onFocusCapture),onBlurCapture:h(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:h(t.onPointerDownCapture,N.onPointerDownCapture)})});$.displayName=K;var q="DismissableLayerBranch",G=i.forwardRef((t,e)=>{const s=i.useContext(T),n=i.useRef(null),r=x(e,n);return i.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),R.jsx(w.div,{...t,ref:r})});G.displayName=q;function J(t,e=globalThis==null?void 0:globalThis.document){const s=m(t),n=i.useRef(!1),r=i.useRef(()=>{});return i.useEffect(()=>{const a=d=>{if(d.target&&!n.current){let E=function(){S(X,s,u,{discrete:!0})};const u={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=E,e.addEventListener("click",r.current,{once:!0})):E()}else e.removeEventListener("click",r.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function Q(t,e=globalThis==null?void 0:globalThis.document){const s=m(t),n=i.useRef(!1);return i.useEffect(()=>{const r=a=>{a.target&&!n.current&&S(Y,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function g(){const t=new CustomEvent(p);document.dispatchEvent(t)}function S(t,e,s,{discrete:n}){const r=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),n?j(r,a):r.dispatchEvent(a)}export{$ as D,re as u};
