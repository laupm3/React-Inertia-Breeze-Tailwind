import{r as C,j as l,a as E}from"./app-fwyInB3c.js";import{B as N}from"./button-Blwr-A5N.js";import{I as b}from"./LucideIcon-CEqEhMjI.js";import{toast as o}from"./index-WlsBA3k2.js";function D({entity:r,displayName:w,format:i="xlsx",className:d="",showIcon:x=!0,showText:h=!0,variant:y="outline"}){const[m,p]=C.useState(!1);if(!r)return console.error("GenerarPlantillaImport: entity prop is required"),null;const t=w||r.charAt(0).toUpperCase()+r.slice(1),$=async()=>{var f;try{p(!0);const n=`/api/v1/admin/import/${r}/template?format=${i}`,e=await E.get(n,{responseType:"blob"}),a=e.headers["content-type"];if(a&&a.includes("application/json")){const c=new FileReader;c.onload=async()=>{const j=JSON.parse(c.result);o.error(`Error: ${j.message}`)},c.readAsText(e.data);return}const g=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=g,s.setAttribute("download",`plantilla_${r}.${i}`),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(g),o.success(`Plantilla de ${t.toLowerCase()} descargada correctamente`)}catch(n){if(((f=n.response)==null?void 0:f.data)instanceof Blob){const e=new FileReader;e.onload=async()=>{try{const a=JSON.parse(e.result);o.error(`Error: ${a.message}`)}catch{o.error(`Error al generar la plantilla de ${t.toLowerCase()}`)}},e.readAsText(n.response.data)}else o.error(`Error al generar la plantilla de ${t.toLowerCase()}`)}finally{p(!1)}},u="rounded-full bg-custom-gray-default dark:bg-custom-blackSemi hover:bg-custom-gray-light dark:hover:bg-accent focus:border-none flex items-center gap-2",L=d?`${u} ${d}`:u;return l.jsxs(N,{onClick:$,variant:y,className:L,disabled:m,children:[x&&(m?l.jsx(b,{name:"Loader",className:"h-4 w-4 animate-spin"}):l.jsx(b,{name:"Download",className:"h-4 w-4"})),h&&l.jsxs("span",{className:"hidden sm:inline",children:["Descargar Plantilla ",t]})]})}export{D as G};
