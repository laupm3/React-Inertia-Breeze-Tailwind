import{r,j as C}from"./app-fwyInB3c.js";const u=r.createContext(null);function P(){const n=r.useContext(u);if(!n)throw new Error("useDataHandler debe usarse dentro de DataHandlerContextProvider");return n}const g=({children:n})=>{const[l,a]=r.useState([]),[x,d]=r.useState(!0),c=r.useCallback(async()=>{d(!0);try{const s=await axios.get(route("api.v1.admin.modules.index"));s.status===200?a(s.data.modules):a([])}catch(s){console.log("error :>> ",s),a([])}finally{d(!1)}},[a,d]),f=r.useCallback(s=>{a(p=>{let t=p.map(e=>e.permissions.some(i=>i.id===s.id)?{...e,permissions:e.permissions.filter(i=>i.id!==s.id)}:e);return t=t.map(e=>{if(e.id!==s.module.id)return e;const i=e.permissions.some(o=>o.id===s.id)?e.permissions.map(o=>o.id===s.id?s:o):[...e.permissions,s];return{...e,permissions:i}}),t})},[]),m=r.useCallback(s=>{a(p=>p.map(t=>({...t,permissions:t.permissions.filter(e=>e.id!==s)})).filter(t=>t.permissions.length>0))},[]);return r.useEffect(()=>{c()},[c]),C.jsx(u.Provider,{value:{data:l,setData:a,fetchData:c,loading:x,updateData:f,deleteItem:m},children:n})};export{g as DataHandlerContextProvider,P as useDataHandler};
