import{r as t,j as e}from"./app-fwyInB3c.js";import{c as w}from"./utils-CytzSlOG.js";import{e as $,C as E,f as L,b as O,c as P,d as v}from"./command-PoUoScut.js";import{P as B,a as U,b as G}from"./popover-DaRbHQOK.js";import{I as h}from"./LucideIcon-CEqEhMjI.js";import{u as R}from"./useTranslation-BtIkv0Na.js";function J({prevModalidadId:l,modalidadesData:f=[],className:p,onSelect:m,disabled:c=!1,placeholder:b}){const[i,u]=t.useState(!1),[s,o]=t.useState(null),[r,j]=t.useState([]),[x,k]=t.useState(!0),{t:y}=R("datatable"),g=t.useCallback(n=>{m&&m(n)},[m]);t.useEffect(()=>{j(f||[]),k(!1)},[f]),t.useEffect(()=>{if(l&&r.length>0){const n=r.find(a=>a.id===l);n&&o(n)}else l||o(null)},[l,r]);const S=t.useMemo(()=>r.map((n,a)=>{var d;return e.jsxs($,{value:(d=n.id)==null?void 0:d.toString(),onSelect:()=>{n.id===(s==null?void 0:s.id)?o(null):o(n),u(!1),g(n.id!==(s==null?void 0:s.id)?n:null)},children:[e.jsx(h,{name:"Check",className:w("mr-2 h-4 w-4",(s==null?void 0:s.id)===n.id?"opacity-100":"opacity-0")}),n.name||n.nombre||"Sin nombre"]},n.id?`modalidad-${n.id}`:`modalidad-index-${a}`)}),[r,s,g]);return e.jsxs(B,{open:i,onOpenChange:c?()=>{}:u,modal:!0,children:[e.jsx(U,{asChild:!0,children:e.jsxs("button",{role:"combobox","aria-expanded":i,className:`w-full justify-between rounded-full bg-custom-gray-default dark:bg-custom-gray-darker text-custom-gray-semilight ${p} ${c?"opacity-50 cursor-not-allowed":"cursor-default"} text-sm flex p-2.5 items-center`,onClick:c?()=>{}:()=>u(!i),disabled:c,children:[s?e.jsx("div",{className:"flex items-center ml-4",children:e.jsx("span",{children:s.name||s.nombre||"Sin nombre"})}):e.jsx("span",{className:"ml-4",children:b||y("placeholder.SeleccionaModalidad")}),e.jsx(h,{name:"ChevronsUpDown",className:"ml-2 mr-4 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(G,{className:"w-full p-2 bg-custom-gray-default dark:bg-custom-blackSemi",children:e.jsxs(E,{className:"bg-custom-gray-default dark:bg-custom-blackSemi",children:[e.jsx(L,{className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",placeholder:"Buscar turno..."}),e.jsxs(O,{className:"dark:dark-scrollbar",children:[e.jsx(P,{children:x?e.jsx("span",{children:"Cargando modalidades..."}):e.jsx("span",{children:"Ninguna modalidad encontrada"})}),e.jsx(v,{children:!x&&S})]})]})})]})}function K({prevTurnoId:l,turnosData:f=[],className:p,onSelect:m,disabled:c=!1,placeholder:b}){var n;const[i,u]=t.useState(!1),[s,o]=t.useState(null),[r,j]=t.useState([]),[x,k]=t.useState(!0),{t:y}=R("datatable"),g=t.useCallback(a=>{m&&m(a)},[m]);t.useEffect(()=>{j(f||[]),k(!1)},[f]),t.useEffect(()=>{if(l&&r.length>0){const a=r.find(d=>d.id===l);a&&o(a)}else l||o(null)},[l,r]);const S=t.useMemo(()=>r.map((a,d)=>{var C,N;return e.jsxs($,{value:(C=a.id)==null?void 0:C.toString(),onSelect:()=>{a.id===(s==null?void 0:s.id)?o(null):o(a),u(!1),g(a.id!==(s==null?void 0:s.id)?a:null)},children:[e.jsx(h,{name:"Check",className:w("mr-2 h-4 w-4",(s==null?void 0:s.id)===a.id?"opacity-100":"opacity-0")}),a.nombre||a.name||"Sin nombre"," - ",(N=a.centro)==null?void 0:N.nombre]},a.id?`turno-${a.id}`:`turno-index-${d}`)}),[r,s,g]);return e.jsxs(B,{open:i,onOpenChange:c?()=>{}:u,modal:!0,children:[e.jsx(U,{asChild:!0,children:e.jsxs("button",{role:"combobox","aria-expanded":i,className:`w-full justify-between rounded-full bg-custom-gray-default dark:bg-custom-gray-darker text-custom-gray-semilight ${p} ${c?"opacity-50 cursor-not-allowed":"cursor-default"} text-sm flex p-2.5 items-center`,onClick:c?()=>{}:()=>u(!i),disabled:c,children:[s?e.jsx("div",{className:"flex items-center ml-4",children:e.jsxs("span",{children:[s.nombre||s.name||"Sin nombre"," - ",(n=s.centro)==null?void 0:n.nombre]})}):e.jsx("span",{className:"ml-4",children:b||y("placeholder.SeleccionaTurno")}),e.jsx(h,{name:"ChevronsUpDown",className:"ml-2 mr-4 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(G,{className:"w-full p-2 bg-custom-gray-default dark:bg-custom-blackSemi",children:e.jsxs(E,{className:"bg-custom-gray-default dark:bg-custom-blackSemi",children:[e.jsx(L,{className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",placeholder:"Buscar turno..."}),e.jsxs(O,{className:"dark:dark-scrollbar",children:[e.jsx(P,{children:x?e.jsx("span",{children:"Cargando turnos..."}):e.jsx("span",{children:"Ning√∫n turno encontrado"})}),e.jsx(v,{children:!x&&S})]})]})})]})}export{J as M,K as T};
