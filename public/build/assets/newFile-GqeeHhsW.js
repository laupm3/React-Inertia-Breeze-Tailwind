import{r as t,j as e,a as B}from"./app-fwyInB3c.js";import{u as z}from"./index-C-xs73Vr.js";import{C as P,c as D}from"./card-DYkZYgg5.js";import{L as p}from"./label-zCtqi3J5.js";import{B as _}from"./button-Blwr-A5N.js";const q={"Mis Carpetas":{folders:[{name:"Personal",key:"personal"},{name:"Trabajo",key:"trabajo"},{name:"Seguridad",key:"seguridad",requiresPassword:!0}],files:[]},personal:{folders:[],files:[{name:"DNI.pdf",location:"Documentación personal",date:"1 ene 2023"},{name:"Cuenta bancaria.pdf",location:"Documentación personal",date:"15 mar 2023"},{name:"Licencia de conducir.pdf",location:"Documentación personal",date:"10 may 2023"}]},trabajo:{folders:[{name:"Nóminas y Contratos",key:"nominas"},{name:"Certificados",key:"certificados"},{name:"Permisos",key:"permisos"},{name:"Justificantes de Bajas",key:"bajas"}],files:[]},nominas:{folders:[{name:"Contratos",key:"contratos"},...E(2015,2024)],files:[]},contratos:{folders:[],files:[{name:"Contrato_Gomez_Tania.pdf",location:"Contratos",date:"1 nov 2023"},{name:"Contrato_Lopez_Maria.pdf",location:"Contratos",date:"10 oct 2023"},{name:"Contrato_Perez_Juan.pdf",location:"Contratos",date:"15 sep 2023"}]},certificados:{folders:[],files:[{name:"Certificado_Trabajo.pdf",location:"Certificados",date:"1 jul 2023"},{name:"Certificado_Antiguedad.pdf",location:"Certificados",date:"1 ago 2023"},{name:"Certificado_Horas.pdf",location:"Certificados",date:"1 sep 2023"}]},permisos:{folders:[],files:[{name:"Permiso_Licencia_Medica.pdf",location:"Permisos",date:"1 oct 2023"},{name:"Permiso_Personal.pdf",location:"Permisos",date:"15 oct 2023"},{name:"Permiso_Vacaciones.pdf",location:"Permisos",date:"30 oct 2023"}]},bajas:{folders:[],files:[{name:"Justificante_Baja_Medica_1.pdf",location:"Justificantes de Bajas",date:"5 nov 2023"},{name:"Justificante_Baja_Medica_2.pdf",location:"Justificantes de Bajas",date:"10 nov 2023"},{name:"Justificante_Baja_Medica_3.pdf",location:"Justificantes de Bajas",date:"15 nov 2023"}]},year_2019:{folders:[],files:[{name:"Nómina_Enero_2019.pdf",location:"2019",date:"1 ene 2019"},{name:"Nómina_Febrero_2019.pdf",location:"2019",date:"1 feb 2019"},{name:"Nómina_Marzo_2019.pdf",location:"2019",date:"1 mar 2019"}]},year_2020:{folders:[],files:[{name:"Nómina_Enero_2020.pdf",location:"2020",date:"1 ene 2020"},{name:"Nómina_Febrero_2020.pdf",location:"2020",date:"1 feb 2020"},{name:"Nómina_Marzo_2020.pdf",location:"2020",date:"1 mar 2020"}]},year_2021:{folders:[],files:[{name:"Nómina_Enero_2021.pdf",location:"2021",date:"1 ene 2021"},{name:"Nómina_Febrero_2021.pdf",location:"2021",date:"1 feb 2021"},{name:"Nómina_Marzo_2021.pdf",location:"2021",date:"1 mar 2021"}]},year_2022:{folders:[],files:[{name:"Nómina_Enero_2022.pdf",location:"2022",date:"1 ene 2022"},{name:"Nómina_Febrero_2022.pdf",location:"2022",date:"1 feb 2022"},{name:"Nómina_Marzo_2022.pdf",location:"2022",date:"1 mar 2022"}]},year_2023:{folders:[],files:[{name:"Nómina_Enero_2023.pdf",location:"2023",date:"1 ene 2023"},{name:"Nómina_Febrero_2023.pdf",location:"2023",date:"1 feb 2023"},{name:"Nómina_Marzo_2023.pdf",location:"2023",date:"1 mar 2023"}]},year_2024:{folders:[],files:[{name:"Nómina_Enero_2024.pdf",location:"2024",date:"1 ene 2024"},{name:"Nómina_Febrero_2024.pdf",location:"2024",date:"1 feb 2024"},{name:"Nómina_Marzo_2024.pdf",location:"2024",date:"1 mar 2024"}]},seguridad:{folders:[],files:[{name:"Documento_Seguridad.pdf",location:"Carpeta de seguridad",date:"1 ene 2023"},{name:"Certificado_Seguridad.pdf",location:"Carpeta de seguridad",date:"15 mar 2023"},{name:"Contrato_Seguridad.pdf",location:"Carpeta de seguridad",date:"10 may 2023"}]}};function E(d=2015,r=2024){const n=[];for(let s=d;s<=r;s++)n.push({name:`${s}`,key:`year_${s}`});return n}function I({onClose:d,currentFolder:r,currentFiles:n}){console.log("currentFolder >> ",r),console.log("currentFiles >> ",n);const[s,j]=t.useState([]),[l,f]=t.useState(!1),[u,x]=t.useState(null),[c,b]=t.useState(r.hash),[y,N]=t.useState(r.id),C=t.useCallback(a=>{const o=50-s.length,i=a.slice(0,o);j(m=>[...m,...i])},[s]);t.useEffect(()=>{console.log("hashSelected >> ",c)},[c]);const{getRootProps:v,getInputProps:w,isDragActive:k}=z({onDrop:C,accept:{"application/pdf":[".pdf"],"application/zip":[".zip"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"image/jpeg":[".jpg"],"image/png":[".png"],"image/webp":[".webp"],"text/csv":[".csv"]},maxFiles:50,maxSize:200*1024*1024,multiple:!0}),F=async()=>{if(s.length===0){alert("No hay archivos para subir.");return}f(!0);const a=new FormData;s.forEach(o=>{a.append("files[]",o)}),a.append("folder_hash",c),a.append("folder_id",y);try{const o=await B.post("/admin/files/upload",a,{headers:{"Content-Type":"multipart/form-data"}});x(o.data),console.log("Respuesta del backend:",o.data)}catch(o){console.error("Error al subir archivos:",o.response||o),x(o.response?o.response.data:{message:"Error de red"})}finally{f(!1)}},S=a=>{const o=n.find(i=>i.id==a).hash;b(o),N(a)};return e.jsx("div",{className:"bg-gray-50",children:e.jsxs(P,{className:"justify-between shadow-lg rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-white mb-3",children:"Cargar documentos"}),e.jsx("p",{className:"mb-4",children:"Carga masivamente o individualmente archivos"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"selectFolder",children:"Carpeta "}),e.jsxs("select",{name:"selectFolder",id:"selectFolder",className:"text-black ml-2 rounded-3xl",onChange:a=>S(a.target.value),children:[e.jsx("option",{value:r.id,children:"Carpeta Padre ./"}),n.filter(a=>a.tipo_fichero_id==1).sort((a,o)=>{const i=a.nombre,m=o.nombre,h=Number(i),g=Number(m);if(!isNaN(h)&&!isNaN(g))return h-g}).map((a,o)=>e.jsx("option",{value:a.id,children:a.nombre},o))]})]})]}),e.jsxs(D,{className:"flex-grow p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{children:e.jsx("strong",{children:"Archivos"})}),e.jsxs("div",{...v(),id:"my-dropzone",className:"border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center p-6 bg-gray-50",children:[e.jsx("input",{...w()}),e.jsx(M,{className:"w-10 h-10 text-gray-400"}),k?e.jsx("span",{className:"text-sm font-medium text-gray-500 mt-2",children:"Suelta los archivos aquí..."}):e.jsx("span",{className:"text-sm font-medium text-gray-500 mt-2",children:"Arrastra y suelta aquí para añadir archivos"}),e.jsx("span",{className:"text-xs text-gray-400",children:"PDF, zip, doc, docx, xls, xlsx, jpg, png, webp, csv"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((a,o)=>e.jsx("div",{className:"p-2 border rounded",children:a.name},o))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{variant:"outline",className:"text-orange-500 border-orange-500 hover:bg-orange-100",onClick:d,disabled:l,children:"Cancelar"}),e.jsx(_,{className:"bg-orange-500 text-white hover:bg-orange-600",onClick:F,disabled:l,children:l?"Subiendo...":"Guardar cambios"})]}),u&&e.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded",children:e.jsx("pre",{className:"text-xs text-gray-700",children:JSON.stringify(u,null,2)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"file-type",className:"text-sm font-medium text-gray-800 dark:text-gray-300",children:"Tipo de archivo"}),e.jsxs("select",{id:"file-type",className:"block w-full mt-1 rounded-md border-gray-300 text-sm shadow-sm focus:ring-orange-500 focus:border-orange-500 dark:text-gray-900",children:[e.jsx("option",{children:"Documento"}),e.jsx("option",{children:"Imagen"}),e.jsx("option",{children:"Audio"}),e.jsx("option",{children:"Video"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"security-type",className:"text-sm font-medium text-gray-800 dark:text-gray-300",children:"Tipo de seguridad del archivo"}),e.jsxs("select",{id:"security-type",className:"block w-full mt-1 rounded-md border-gray-300 text-sm shadow-sm focus:ring-orange-500 focus:border-orange-500 dark:text-gray-900",children:[e.jsx("option",{children:"L1"}),e.jsx("option",{children:"L2"}),e.jsx("option",{children:"L3"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"reason",className:"text-sm font-medium text-gray-800 dark:text-gray-300",children:"Razón de la subida del archivo"}),e.jsx("textarea",{id:"reason",className:"block w-full mt-1 rounded-md border-gray-300 text-sm shadow-sm focus:ring-orange-500 focus:border-orange-500",placeholder:"Escribe una razón aquí..."})]})]})]})]})})}function M(d){return e.jsx("svg",{width:"30",height:"30",viewBox:"0 0 15 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...d,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.68396 3.05371C7.93172 3.05371 8.13257 3.29249 8.13257 3.58704V12.9661L10.9556 9.60992C11.1308 9.40164 11.4149 9.40164 11.5901 9.60992C11.7652 9.8182 11.7652 10.1559 11.5901 10.3642L8.00117 14.6309C7.91705 14.7308 7.80294 14.787 7.68396 14.787C7.56498 14.787 7.45087 14.7308 7.36675 14.6309L3.77788 10.3642C3.60268 10.1559 3.60268 9.8182 3.77788 9.60992C3.95307 9.40164 4.23712 9.40164 4.41231 9.60992L7.23535 12.9661V3.58704C7.23535 3.29249 7.4362 3.05371 7.68396 3.05371Z",fill:"#CBCBCB",stroke:"#CBCBCB"})})}export{I as F,q as f};
