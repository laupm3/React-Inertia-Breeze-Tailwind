import{r as n,G as O,j as e,a as J,S as Q}from"./app-fwyInB3c.js";import{A as W}from"./AuthenticatedLayout-B4CSARVj.js";import X from"./CreateUpdateView-DswtX-yd.js";import{ViewContextProvider as Y}from"./ViewContext-DDk2FYHm.js";import{DataHandlerContextProvider as Z}from"./DataHandlerContext-BgE-GZ4d.js";import K from"./DataTablePortal-gCh7VaDk.js";import ee from"./SheetTableView-DyUBkm_c.js";import se from"./DeleteView-BDaQcIQM.js";import{f as te,c as re,d as ae,e as le,b as oe,D as ie}from"./dialog-iaZkf6Xy.js";import{u as B}from"./useTranslation-BtIkv0Na.js";import{o as I,u as D,s as f,n as L,a as w,b as R}from"./types-BZmDMmQb.js";import{toast as C}from"./index-WlsBA3k2.js";import{I as S}from"./input-CqlBlYgU.js";import{S as ne}from"./separator-BWKairMX.js";import{G as ce}from"./GoogleAddress-DWOptz48.js";import{u as me}from"./useDebounce-xNcQ83OW.js";import"./select-B5O0TxCl.js";import{A as $}from"./AdvanceDropdown-CXptW6sy.js";import"./AdvanceDropdown-qoEi4BOz.js";import"./DataTableContext-BYrqyX0i.js";import"./popover-DaRbHQOK.js";import"./button-Blwr-A5N.js";import"./AdvancedHeader-CpvwMmYr.js";import{B as P}from"./Button-CQuYVLGu.js";import"./calendar-DctTJhwg.js";import"./multi-select-BSyp-qjs.js";import"./RowActionsTrigger-C2PXJFNn.js";import"./avatar-oBOSifLN.js";import"./tooltip-DFfoxvAF.js";import"./CreateUpdateDialog-1qQQjI_x.js";import"./sheet-DHc5Hgr8.js";import"./tabs-DtCm3GAf.js";import"./DataHandlerContext--vx6a3_3.js";import{S as x}from"./skeleton-DSiYFg9q.js";import{S as de}from"./Spinner-DPRe7Z_J.js";import{O as ue}from"./octagon-alert-BRAzZNeG.js";import{S as U}from"./SheetTable-oFCbTdfY.js";import{B as q}from"./BlockCard-TCX704se.js";import{I as G}from"./LucideIcon-CEqEhMjI.js";import{D as xe}from"./DecisionModal-Dl8siGBG.js";import"./sidebar-CPh6C6LB.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./dropdown-menu-bHoOJ61X.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-BIJodELy.js";import"./index-C_F9oucK.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-BZxTbISK.js";import"./index-v24TFYKQ.js";import"./check-5DjPwM22.js";import"./createLucideIcon-DoJ0Kelj.js";import"./chevron-right-B1iws4WK.js";import"./PopUpIncidencias-CaovAEi3.js";import"./card-DYkZYgg5.js";import"./textarea-C969rVin.js";import"./UserAvatar-cKyxDEhx.js";import"./ApplicationLogo-C2FcO4AY.js";import"./Yoopta-Dj4Guze5.js";import"./throttle-CmSTFqON.js";import"./PrimaryButton-SsXyLm2e.js";import"./useNotifications-CSWGH93r.js";import"./ShowNotificactionFromJestream-cKOlvVdg.js";import"./OnboardingModal-D0HRNKzO.js";import"./Modal-BkRna8gK.js";import"./transition-ByAjZSmr.js";import"./StepItem-bNLmZaq8.js";import"./StepProgress-DNpLodXf.js";import"./WelcomeContent-BPJ5E7_N.js";import"./onboardingImages-CoczwfNn.js";import"./AboutContent-DOlAXyok.js";import"./TeamContent-C0DysUYq.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./chevron-up-OjKdrhzc.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./x-2mzC_aTV.js";import"./index-CeuhGnKJ.js";import"./DataTable-D4Fn3B2g.js";import"./table-cS0UKUSm.js";import"./index-Z1g0u-qm.js";import"./TableFilters-ZojjKFl2.js";import"./GlobalFilter-DNA5td8x.js";import"./ImportExportDropdown-COI3HdRN.js";import"./index-C-xs73Vr.js";import"./index-DpIruHMc.js";import"./badge-BgloL8Ae.js";import"./scroll-area-CvQ1XCoU.js";import"./checkbox-BQT_ir1e.js";import"./index-BxSEkZvI.js";import"./index-4A9uUPu1.js";import"./TableDebugging-C1u6ii1k.js";import"./useColumns-Djgd71Ek.js";import"./EmpleadoAvatar-BBWI_HPN.js";import"./ColumnFilter-oxYUebdb.js";import"./RowSelectionColumn-COjZFz9T.js";import"./RowActionsColumn-CM2slffX.js";import"./RowActionsTrigger-DnJzXomR.js";import"./command-PoUoScut.js";import"./index-DVo7DTeW.js";import"./DatePicker-YJSItPq7.js";import"./format-Be40hyfq.js";import"./constants-BKFt95HM.js";import"./toDate-qOSwr3PX.js";import"./endOfWeek-DoVA-Yvp.js";import"./addDays-B9Fzl-_R.js";import"./parseISO-Efi0RkWR.js";import"./Map-D73hm0ip.js";import"./index.modern-WcJlzckG.js";import"./Pill-l4GaXyto.js";import"./StatusEmpleadoMapColor-Bp2doaTo.js";import"./RowActionsColumn-C3VJw1Sg.js";import"./RowCheckedColumn-BShQ1j9z.js";import"./SheetTable-CiCNZjvD.js";import"./SheetTableHeader-vhJO3F_n.js";import"./ContratosVigentesDialog-SpBmuJuH.js";import"./WeekDay-C1ZcXS4Y.js";import"./GetModalidadIcon-BUgIPR97.js";import"./getRoundingMethod-D0I6Z7xl.js";import"./es-DNLwfvrq.js";import"./useApiEndpoints-CHm1F3ft.js";import"./Create-tmHr2JLD.js";import"./CreateLanguageForm-xwtvYsjX.js";import"./alert-D9izbOQG.js";import"./alert-dialog-kDfn0La3.js";import"./InputSkeleton-CFMfUb-2.js";import"./FetchSelect-CvqHmH4Y.js";const pe=()=>{const{t:s}=B(["datatable"]);return I({id:L(w({message:"El ID es obligatorio"})),nombre:f().nonempty({message:"El nombre es obligatorio"}),siglas:f().nonempty({message:"Las siglas son obligatorias"}),cif:f().nonempty({message:"El CIF es obligatorio"}),email:f().email({message:"El email debe ser valido"}),telefono:f().nonempty({message:"El teléfono es obligatorio"}),representante_id:D([w(),R()]).refine(t=>t!==null,{message:"El representante es obligatorio"}),adjunto_id:D([w(),R()]).refine(t=>t!==null,{message:"El adjunto es obligatorio"}),direccion:I({id:L(w({message:"El ID es obligatorio"})),full_address:f().nonempty({message:"La dirección es obligatoria"}),latitud:D([w(),f()]).refine(t=>t!==null,{message:"La latitud es obligatoria"}),longitud:D([w(),f()]).refine(t=>t!==null,{message:"La longitud es obligatoria"}),codigo_postal:f().nullable(),numero:f().nullable(),piso:f().nullable(),puerta:f().nullable(),escalera:f().nullable(),bloque:f().nullable()})})},z={id:null,nombre:"",siglas:"",cif:"",email:"",telefono:"",representante_id:null,adjunto_id:null,direccion:{id:null,full_address:"",latitud:"",longitud:"",codigo_postal:"",numero:"",piso:"",puerta:"",escalera:"",bloque:""}},fe=s=>s?{id:s.id,nombre:s.nombre||"",siglas:s.siglas||"",cif:s.cif||"",email:s.email||"",telefono:s.telefono||"",representante_id:s.representante.id||null,adjunto_id:s.adjunto.id||null,direccion:{id:s.direccion.id||null,full_address:s.direccion.full_address||"",latitud:s.direccion.latitud||"",longitud:s.direccion.longitud||"",codigo_postal:s.direccion.codigo_postal||"",numero:s.direccion.numero||"",piso:s.direccion.piso||"",puerta:s.direccion.puerta||"",escalera:s.direccion.escalera||"",bloque:s.direccion.bloque||""}}:void 0,E=s=>n.useMemo(()=>({show:s?route("api.v1.admin.empresas.show",{empresa:s}):null,store:route("api.v1.admin.empresas.store"),update:s?route("api.v1.admin.empresas.update",{empresa:s}):null,delete:s?route("api.v1.admin.empresas.destroy",{empresa:s}):null}),[s]),M=n.createContext(null),he=({children:s,model:t,onOpenChange:i,dataKey:r,onSaveData:d=null,modelAlias:l="registro"})=>{const[p,b]=n.useState(!1),[o,c]=n.useState(!1),[a,j]=n.useState(!1),[h,y]=n.useState(!1),k=E(t),m=O(z),_=pe();n.useEffect(()=>{const u=async()=>{try{j(!0),c(!1);const g=await axios.get(k.show);g.status===200?m.setData(fe(g.data[r])):c(!0)}catch(g){console.error("Error al cargar datos:",g),c(!0)}finally{j(!1)}};return m.clearErrors(),t?u():(m.setData(z),c(!1),j(!1)),()=>{}},[t]);const T=n.useCallback((u,g)=>{if(typeof u=="object"&&g===void 0){m.setData(N=>({...N,...u}));return}m.setData(N=>({...N,[u]:g}))},[m]),F=n.useCallback(()=>{const u=_.safeParse(m.data);if(m.clearErrors(),!u.success){const g=u.error.flatten().fieldErrors;Object.keys(g).forEach(N=>{m.setError(N,g[N][0])})}return u.success},[m,_]),A=n.useCallback(async()=>{try{y(!0),c(!1),m.clearErrors();const u=t?await axios.put(k.update,m.data):await axios.post(k.store,m.data);d&&d(u.data[r]),i(!1),m.clearErrors(),C.success(t?`Registro ${l} actualizado con éxito`:`Registro ${l} creado con éxito`)}catch(u){if(c(!0),u.response&&u.response.data&&u.response.data.errors){const{errors:g}=u.response.data;Object.keys(g).forEach(N=>{m.setError(N,g[N][0])})}C.error(t?`Error al actualizar el ${l}`:`Error al crear el ${l}`)}finally{y(!1)}},[t,k.update,k.store,m,d,i]),V=n.useCallback(()=>{F()&&A()},[F,A]),H=n.useMemo(()=>({modelAlias:l,model:t,error:o,form:m,updateForm:T,handleSubmit:V,setError:c,onOpenChange:i,isProcessing:p,isLoading:a,isSaving:h,setIsProcessing:b}),[l,t,o,m,T,V,i,p,a,h]);return e.jsx(M.Provider,{value:H,children:s})};function v(){const s=n.useContext(M);if(!s)throw new Error("useDialogData debe usarse dentro de DialogDataContextProvider");return s}function ge({}){var c;const{form:s,updateForm:t}=v(),{data:i,errors:r}=s,{t:d}=B("datatable"),[l,p]=n.useState(i),b=me(t,500);n.useEffect(()=>{p(i)},[i]);const o=n.useCallback((a,j)=>{p(typeof a=="object"?h=>({...h,...a}):h=>({...h,[a]:j})),r[a]&&delete r[a],b(a,j)},[b]);return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold  text-custom-blue dark:text-custom-white",children:["Nombre",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx(S,{placeholder:"Añadir nombre",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.nombre,onChange:a=>o("nombre",a.target.value)}),r.nombre&&e.jsx("span",{className:"text-xs text-red-500",children:r.nombre})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Siglas",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx(S,{placeholder:"Siglas de la empresa",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.siglas,onChange:a=>o("siglas",a.target.value)}),r.siglas&&e.jsx("span",{className:"text-xs text-red-500",children:r.siglas})]}),e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["CIF",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx(S,{placeholder:"CIF de la empresa",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.cif,onChange:a=>o("cif",a.target.value)}),r.cif&&e.jsx("span",{className:"text-xs text-red-500",children:r.cif}),e.jsx("span",{className:"text-xs text-custom-gray-semiDark dark:text-custom-gray-dark pl-1",children:"  Este valor no puede repetirse en los registros."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Representante ",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx($,{defaultValue:l.representante_id,onChangeValue:a=>o("representante_id",a),enableCreateUpdateView:!0,enableSheetTableView:!0}),r.representante_id&&e.jsx("span",{className:"text-xs text-red-500",children:r.representante_id})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Adjunto ",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx($,{defaultValue:l.adjunto_id,onChangeValue:a=>o("adjunto_id",a),enableCreateUpdateView:!0,enableSheetTableView:!0}),r.adjunto_id&&e.jsx("span",{className:"text-xs text-red-500",children:r.adjunto_id})]})]}),e.jsx(ne,{className:"bg-custom-blackSemi dark:bg-custom-white mt-4 mb-2"}),e.jsx("h3",{className:"font-bold ",children:"Información de contacto"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:[d("tables.direccion")," ",e.jsx("span",{className:"text-custom-orange",children:"*"})]}),e.jsx(ce,{selectedAddress:(c=l.direccion)==null?void 0:c.full_address,onSelect:a=>o("direccion",{...l.direccion,...a}),data:l.direccion,handleChange:(a,j)=>o("direccion",{...l.direccion,[a]:j})}),r.direccion&&e.jsx("span",{className:"text-xs text-red-500",children:r.direccion})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Email ",e.jsx("span",{className:"text-custom-orange",children:"*"})]}),e.jsx(S,{placeholder:"Añadir email",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.email,onChange:a=>o("email",a.target.value),type:"tel"}),r.email&&e.jsx("span",{className:"text-xs text-red-500",children:r.email})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:[d("tables.telefono")," ",e.jsx("span",{className:"text-custom-orange",children:"*"})]}),e.jsx(S,{placeholder:"Añadir teléfono",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.telefono,onChange:a=>o("telefono",a.target.value),type:"tel"}),r.telefono&&e.jsx("span",{className:"text-xs text-red-500",children:r.telefono})]})]})]})]})}function je(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col w-full gap-12 bg-custom-white dark:bg-custom-blackLight p-4",children:[e.jsx("div",{className:"flex flex-col gap-4 dark:dark-scrollbar",children:e.jsx(x,{className:"h-8 w-[350px]"})}),e.jsxs("div",{className:"flex flex-row w-full gap-4 overflow-y-auto dark:dark-scrollbar",children:[e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(x,{className:"h-8 w-[250px]"}),e.jsx(x,{className:"h-12 w-full"})]}),e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(x,{className:"h-8 w-[250px]"}),e.jsx(x,{className:"h-12 w-full"})]})]}),e.jsx(x,{className:"h-1 w-full"}),e.jsxs("div",{className:"flex flex-row w-full gap-4 overflow-y-auto dark:dark-scrollbar",children:[e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(x,{className:"h-8 w-[250px]"}),e.jsx(x,{className:"h-12 w-full"})]}),e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(x,{className:"h-8 w-[250px]"}),e.jsx(x,{className:"h-12 w-full"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4",children:[e.jsx(x,{className:"h-10 w-24"}),e.jsx(x,{className:"h-10 w-24"})]})]})}function be(){const{model:s,handleSubmit:t,onOpenChange:i,isSaving:r}=v(),d=s?"Actualizar":"Guardar",l=s?"Actualizando...":"Guardando...";return e.jsxs(te,{children:[e.jsx("div",{className:"flex flex-row w-full items-center justify-between",children:e.jsxs("div",{className:"flex items-center ml-auto justify-end gap-2",children:[e.jsx(P,{variant:"secondary",onClick:()=>i(!1),disabled:r,children:"Cancelar"}),e.jsx(P,{variant:"primary",onClick:()=>t(),disabled:r,children:d})]})}),r&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-2",children:[e.jsx(de,{size:"sm",className:"text-custom-orange"}),e.jsxs("span",{className:"text-md",children:[l,"..."]})]})]})}function Ne(){const{modelAlias:s,model:t}=v(),i=n.useMemo(()=>t?`Actualizar ${s}`:`Crear ${s}`,[t]);return e.jsxs(re,{children:[e.jsx(ae,{className:"dark:text-custom-white",children:i}),e.jsx(le,{className:"hidden",children:i})]})}const ke=()=>{const{error:s}=v();return s?e.jsxs("div",{className:"mt-4 mb-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 p-3 rounded-md flex items-start gap-2 animate-in fade-in slide-in-from-top-3 duration-300",children:[e.jsx(ue,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Ha ocurrido un error"}),e.jsx("p",{className:"text-sm",children:"No se pudo procesar la solicitud. Por favor, inténtalo de nuevo."})]})]}):null};function we({children:s}){const{isSaving:t}=v();return e.jsxs("div",{className:`flex flex-col gap-4 h-full overflow-y-auto p-4 dark:dark-scrollbar transition-opacity duration-200 ${t?"opacity-60":"opacity-100"}`,children:[e.jsx(ke,{}),s]})}function ve(){const{isLoading:s}=v();return e.jsx(oe,{className:"flex flex-col gap-4 justify-between max-w-[1225px] max-h-[725px] bg-custom-white dark:bg-custom-blackLight",children:s?e.jsx(je,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx(we,{children:e.jsx(ge,{})}),e.jsx(be,{})]})})}const ye=n.memo(function({open:t,onOpenChange:i,model:r=null,onSaveData:d=null}){return e.jsx(ie,{open:t,onOpenChange:i,children:e.jsx(he,{model:r,onSaveData:d,onOpenChange:i,modelAlias:"empresa",dataKey:"empresa",children:e.jsx(ve,{})})})});function Se({data:s}){var r,d,l,p,b;function t({title:o,value:c}){return e.jsxs("section",{className:"flex flex-col sm:flex-row border-b border-custom-gray-default dark:border-custom-blackSemi last:border-b-0",children:[e.jsx("div",{className:"flex items-center py-3 px-4 sm:w-40 md:w-48 bg-custom-gray-default dark:bg-custom-blackSemi",children:e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white font-semibold",children:o})}),e.jsx("div",{className:"flex-1 py-3 px-4",children:e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white opacity-70",children:c})})]})}function i({centro:o}){var c,a,j,h,y,k;return e.jsxs("section",{className:"flex flex-col sm:flex-row sm:items-center gap-3 p-4 border-b border-custom-gray-semiLight dark:border-custom-gray-semiDark last:border-b-0",children:[e.jsxs("div",{className:"flex-1 sm:w-1/3",children:[e.jsx("span",{className:"block text-xs text-custom-gray-semiDark dark:text-custom-gray-dark sm:hidden",children:"Centro"}),e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white font-medium",children:o.nombre})]}),e.jsxs("div",{className:"flex-1 sm:w-1/3",children:[e.jsx("span",{className:"block text-xs text-custom-gray-semiDark dark:text-custom-gray-dark sm:hidden",children:"Ubicación"}),e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white opacity-70 break-words",children:((c=o.direccion)==null?void 0:c.full_address)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:w-1/3",children:[e.jsx("span",{className:"block text-xs text-custom-gray-semiDark dark:text-custom-gray-dark sm:hidden",children:"Responsable:"}),e.jsx("img",{src:((j=(a=o.responsable)==null?void 0:a.user)==null?void 0:j.profile_photo_url)||"/images/profiles/default.png",alt:((y=(h=o.responsable)==null?void 0:h.user)==null?void 0:y.name)||"Responsable",className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white opacity-70 truncate",children:((k=o.responsable)==null?void 0:k.nombreCompleto)||"Sin responsable"})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{title:"Información",children:e.jsxs("div",{className:"rounded-3xl overflow-auto border-4 border-custom-gray-default dark:border-custom-blackSemi",children:[e.jsx(t,{title:"Nombre",value:s.nombre}),e.jsx(t,{title:"Siglas",value:(s==null?void 0:s.siglas)||"Sin siglas"}),e.jsx(t,{title:"CIF",value:(s==null?void 0:s.cif)||"Sin CIF"}),e.jsx(t,{title:"Responsable",value:s!=null&&s.representante?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((r=s.representante.user)==null?void 0:r.profile_photo_url)||"/images/profiles/default.png",alt:((d=s.representante.user)==null?void 0:d.name)||"Representante",className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white truncate",children:s.representante.nombreCompleto||"Sin nombre"})]}):"Sin responsable"}),e.jsx(t,{title:"Adjunto",value:s!=null&&s.adjunto?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((l=s.adjunto.user)==null?void 0:l.profile_photo_url)||"/images/profiles/default.png",alt:((p=s.adjunto.user)==null?void 0:p.name)||"Adjunto",className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-sm text-custom-black dark:text-custom-white truncate",children:s.adjunto.nombreCompleto||"Sin nombre"})]}):"Sin adjunto"}),e.jsx(t,{title:"Dirección fiscal",value:s.direccion.full_address}),e.jsx(t,{title:"Email",value:s.email}),e.jsx(t,{title:"Teléfono",value:s.telefono})]})}),e.jsx(q,{title:`Centros (${((b=s==null?void 0:s.centros)==null?void 0:b.length)||0})`,children:s!=null&&s.centros&&s.centros.length>0?e.jsxs("div",{className:"rounded-xl overflow-hidden border border-custom-gray-default dark:border-custom-blackSemi",children:[e.jsxs("div",{className:"hidden sm:flex items-center px-4 py-3 text-custom-black dark:text-custom-white bg-custom-gray-default dark:bg-custom-blackSemi",children:[e.jsx("div",{className:"w-1/3",children:e.jsx("span",{className:"text-sm font-semibold",children:"Centro"})}),e.jsx("div",{className:"w-1/3",children:e.jsx("span",{className:"text-sm font-semibold",children:"Ubicación"})}),e.jsx("div",{className:"w-1/3",children:e.jsx("span",{className:"text-sm font-semibold",children:"Responsable"})})]}),e.jsx("div",{className:"divide-y divide-custom-gray-semiLight dark:divide-custom-gray-semiDark max-h-[500px] overflow-y-auto dark:dark-scrollbar",children:s.centros.map((o,c)=>e.jsx(i,{centro:o},o.id||c))})]}):e.jsxs("div",{className:"flex items-center gap-2 p-4 text-custom-gray-semiDark dark:text-custom-gray-dark",children:[e.jsx(G,{name:"AlertTriangle",size:"16"}),e.jsx("span",{className:"text-sm",children:"No hay centros asignados a esta empresa"})]})})]})}function De(){return e.jsxs("div",{className:"flex flex-col w-full space-y-8",children:[e.jsxs("div",{className:"w-full flex items-center space-x-4",children:[e.jsx(x,{className:"h-24 w-24 rounded-full"}),e.jsxs("div",{className:"flex flex-col justify-center space-y-2",children:[e.jsx(x,{className:"h-4 w-[250px]"}),e.jsx(x,{className:"h-4 w-[200px]"})]})]}),e.jsx(x,{className:"h-20 w-full"}),e.jsx(x,{className:"h-96 w-full"})]})}function Ce({open:s,onOpenChange:t,model:i,enableToView:r=!0}){const d=E(i),[l,p]=n.useState(null),[b,o]=n.useState(!0),[c,a]=n.useState(!1);return n.useEffect(()=>((async()=>{try{o(!0);const h=await axios.get(d.show);h.status===200?p(h.data.empresa):a(!0)}catch{a(!0)}finally{o(!1)}})(),()=>{}),[i]),b||!r?e.jsx(U,{title:null,open:s,onOpenChange:t,className:"w-full max-w-full sm:min-w-[600px]",descriptionContent:e.jsx("div",{className:"flex items-center justify-center w-full h-full mt-6",children:e.jsx(De,{})})}):e.jsx(U,{title:null,open:s,onOpenChange:t,className:"w-full max-w-full sm:min-w-[600px]",descriptionContent:e.jsx(e.Fragment,{children:l&&e.jsx(e.Fragment,{children:e.jsx(Se,{data:l})})})})}function Ee({open:s,onOpenChange:t,model:i,onDelete:r}){const d=E(i),l=async()=>{try{(await J.delete(d.delete)).status===200&&(r&&r(i),C.success("Registro eliminado correctamente"))}catch(p){console.error("error :>> ",p),C.error("Error al eliminar el registro")}};return e.jsx(xe,{title:"¿Estás seguro de que quieres eliminar esta empresa?",content:"Esta acción no se puede deshacer. Todos los datos relacionados con esta empresa se eliminarán.",open:s,onOpenChange:t,action:l,variant:"destructive",icon:e.jsx(G,{name:"OctagonAlert",className:"w-6 h-6 text-red-500"})})}function _e(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Administración de empresas"}),e.jsx("div",{className:"max-w-full mx-auto py-7 xl:px-8 px-4 overflow-hidden",children:e.jsx(Y,{CreateUpdateViewComponent:ye,SheetTableViewComponent:Ce,DeleteViewComponent:Ee,children:e.jsxs(Z,{children:[e.jsx(K,{}),e.jsx(X,{}),e.jsx(ee,{}),e.jsx(se,{})]})})})]})}_e.layout=s=>e.jsx(W,{children:s});export{_e as default};
