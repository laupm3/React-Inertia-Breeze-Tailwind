import{j as a,a as T,r as d}from"./app-fwyInB3c.js";import{A as l}from"./AdvancedHeader-CpvwMmYr.js";import{P as U}from"./Pill-l4GaXyto.js";import{S as v}from"./StatusEmpleadoMapColor-Bp2doaTo.js";import{E as y}from"./EmpleadoAvatar-BBWI_HPN.js";import{c as f}from"./createDateFilterFn-BjCRoX6R.js";import I from"./AnexosTrigger-BM7Vzyuu.js";import{u as P,C as M,A as _,S as V,J as $}from"./AnexosDialog-DCRFrUXp.js";import{D as R,a as k,b as J,c as B,d as q}from"./dialog-iaZkf6Xy.js";import{B as z}from"./Button-CQuYVLGu.js";import{I as j,E as G,d as K,e as Q,f as W}from"./LucideIcon-CEqEhMjI.js";import{B as X}from"./button-Blwr-A5N.js";import{D as Y,a as Z,b as ee,c as m}from"./dropdown-menu-bHoOJ61X.js";import{D as ne}from"./DecisionModal-Dl8siGBG.js";import{toast as x}from"./index-WlsBA3k2.js";import{useDataHandler as ae}from"./DataHandlerContext-DvtbAn32.js";import{F as re}from"./user-CNwXqt1W.js";import{f as h}from"./format-Be40hyfq.js";import{e as b}from"./es-DNLwfvrq.js";function te({open:o,onOpenChange:i,model:c,onDelete:e}){const n=P(c),r=async()=>{try{(await T.delete(n.delete)).status===200&&(e&&e(c),x.success("Registro eliminado correctamente"),i(!1))}catch(s){console.error("error :>> ",s),x.error("Error al eliminar el registro")}},t=()=>{i(!1)};return a.jsx(ne,{title:"¿Estás seguro de que quieres eliminar este usuario?",content:"Esta acción no se puede deshacer. Todos los datos relacionados con este contrato se eliminarán.",open:o,onOpenChange:t,action:r,variant:"destructive",icon:a.jsx(j,{name:"OctagonAlert",className:"w-6 h-6 text-red-500"})})}function se({contrato:o,onSaveData:i,canDelete:c=!0,showEditActions:e=!0}){const[n,r]=d.useState(!1),[t,s]=d.useState(!1),[F,g]=d.useState(!1),[w,u]=d.useState(!1),{deleteItem:C,fetchData:p}=ae(),D=()=>{s(!0)},N=()=>{u(!0)},A=()=>{g(!0)},E=()=>{r(!0)},S=O=>{s(!1),p(),i&&i()},L=O=>{u(!1),C(o.id),i&&i()},H=()=>{r(!1),p(),i&&i()};return a.jsxs(a.Fragment,{children:[a.jsxs(Y,{children:[a.jsx(Z,{asChild:!0,children:a.jsxs(X,{variant:"ghost",className:"h-8 w-8 p-0",children:[a.jsx("span",{className:"sr-only",children:"Abrir menú"}),a.jsx(G,{className:"h-4 w-4"})]})}),a.jsxs(ee,{align:"end",children:[a.jsxs(m,{onClick:A,children:[a.jsx(K,{className:"mr-2 h-4 w-4"}),"Ver"]}),e&&a.jsxs(m,{onClick:D,children:[a.jsx(Q,{className:"mr-2 h-4 w-4"}),"Editar"]}),a.jsxs(m,{onClick:E,children:[a.jsx(re,{className:"mr-2 h-4 w-4"}),"Anexos"]}),c&&a.jsxs(m,{onClick:N,className:"text-red-600",children:[a.jsx(W,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]}),a.jsx(M,{open:t,onOpenChange:s,model:o,onSaveData:S}),a.jsx(te,{open:w,onOpenChange:u,model:o,onDelete:L}),a.jsx(_,{open:n,onOpenChange:r,model:o.id,onSaveData:H}),a.jsx(V,{open:F,onOpenChange:g,model:o,enableToView:!0})]})}const ie=o=>({id:"actions",title:"Acciones",enableHiding:!1,enableSorting:!1,enableFiltering:!1,header:({column:i})=>a.jsx("span",{className:"text-center",children:"Acciones"}),cell:({row:i})=>a.jsx("div",{className:"flex justify-center",children:a.jsx(se,{contrato:i.original,onSaveData:o})})});function oe(o,i){return d.useMemo(()=>[{id:"expediente",title:"Nº Expediente",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[150px]"}),cell:({row:e})=>a.jsx("div",{children:e.original.n_expediente}),accessorFn:e=>`${e.n_expediente}`,filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"asignacion",title:"Asignación",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n;return a.jsx("span",{children:((n=e.original.asignacion)==null?void 0:n.nombre)||"-"})},accessorFn:e=>{var n;return((n=e.asignacion)==null?void 0:n.nombre)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"name",title:"Empleado",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>a.jsx(y,{empleado:e.original.empleado}),accessorFn:e=>{const n=e.empleado,r=(n==null?void 0:n.primerApellido)||"",t=(n==null?void 0:n.segundoApellido)||"",s=(n==null?void 0:n.nombre)||"";return`${r} ${t}, ${s}`.trim()},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"tipoContrato",title:"Tipo de contrato",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]",labelFn:n=>`${n.clave} - ${n.nombre}`}),cell:({row:e})=>{var n;return a.jsx("div",{className:"text-center",children:((n=e.original.tipoContrato)==null?void 0:n.clave)||"-"})},accessorFn:e=>{var n;return((n=e.tipoContrato)==null?void 0:n.clave)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"fechaInicio",title:"Fecha de inicio",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]",filterType:"date"}),cell:({row:e})=>a.jsx("span",{children:h(e.original.fechaInicio,"PP",{locale:b})}),accessorFn:e=>e.fechaInicio||null,filterFn:f},{id:"fechaFin",title:"Fecha de fin",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]",filterType:"date"}),cell:({row:e})=>a.jsx("span",{children:e.original.fechaFin?h(e.original.fechaFin,"PP",{locale:b}):null}),accessorFn:e=>e.fechaFin||null,filterFn:f},{id:"empresa",title:"Empresa",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n;return a.jsx("span",{children:((n=e.original.empresa)==null?void 0:n.siglas)||"-"})},accessorFn:e=>{var n;return((n=e.empresa)==null?void 0:n.siglas)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"centro",title:"Centro de trabajo",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n;return a.jsx("span",{children:((n=e.original.centro)==null?void 0:n.nombre)||"-"})},accessorFn:e=>{var n;return((n=e.centro)==null?void 0:n.nombre)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"departamento",title:"Departamento",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n;return a.jsx("span",{children:((n=e.original.departamento)==null?void 0:n.nombre)||"-"})},accessorFn:e=>{var n;return((n=e.departamento)==null?void 0:n.nombre)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"nif",title:"NIF",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n;return a.jsx("span",{children:((n=e.original.empleado)==null?void 0:n.nif)||"-"})},accessorFn:e=>{var n;return((n=e.empleado)==null?void 0:n.nif)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"mail",title:"Correo electrónico",enableHiding:!0,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n;return a.jsx("span",{children:((n=e.original.empleado)==null?void 0:n.email)||"-"})},accessorFn:e=>{var n;return((n=e.empleado)==null?void 0:n.email)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"estadoEmpleado",title:"Estado del empleado",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n,r,t,s;return a.jsx(U,{identifier:((r=(n=e.original.empleado)==null?void 0:n.estadoEmpleado)==null?void 0:r.nombre)||"unknown",children:((s=(t=e.original.empleado)==null?void 0:t.estadoEmpleado)==null?void 0:s.nombre)||"-",mapColor:v})},accessorFn:e=>{var n,r;return((r=(n=e.empleado)==null?void 0:n.estadoEmpleado)==null?void 0:r.nombre)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase()===s.toLowerCase())}},{id:"tipoEmpleado",title:"Tipo de empleado",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:e})=>a.jsx(l,{column:e,className:"max-w-[250px]"}),cell:({row:e})=>{var n,r;return a.jsx("span",{children:((r=(n=e.original.empleado)==null?void 0:n.tipoEmpleado)==null?void 0:r.nombre)||"-"})},accessorFn:e=>{var n,r;return((r=(n=e.empleado)==null?void 0:n.tipoEmpleado)==null?void 0:r.nombre)||""},filterFn:(e,n,r)=>{if(!r.length)return!0;const t=e.getValue(n);return r.some(s=>t.toLowerCase().includes(s.toLowerCase()))}},{id:"verAnexos",title:"Ver Anexos",enableHiding:!1,enableSorting:!1,enableFiltering:!1,header:({column:e})=>a.jsx("span",{className:"text-center",children:"Ver Anexos"}),cell:({row:e})=>a.jsx(I,{contrato:e.original,onSaveData:o})},{id:"jornada",title:"Ver Jornada",enableHiding:!1,enableSorting:!1,enableFiltering:!1,header:()=>a.jsx("div",{className:"text-center",children:"Ver Jornada"}),cell:({row:e})=>{var r,t;const n=(r=e.original.jornada)==null?void 0:r.id;return n?a.jsx("div",{className:"text-center",children:a.jsxs(R,{children:[a.jsx(k,{asChild:!0,children:a.jsxs(z,{variant:"secondary",className:"flex items-center gap-2 hover:bg-transparent",title:((t=e.original.jornada)==null?void 0:t.name)||"",children:["Ver jornada",a.jsx(j,{name:"ArrowUpRight",className:"w-4 ml-1"})]})}),a.jsxs(J,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsx(B,{children:a.jsx(q,{children:"Detalle de Jornada"})}),a.jsx($,{jornadaId:n})]})]})}):null}},ie(o)],[o,i])}const Se=Object.freeze(Object.defineProperty({__proto__:null,useColumns:oe},Symbol.toStringTag,{value:"Module"}));export{te as D,Se as a,oe as u};
