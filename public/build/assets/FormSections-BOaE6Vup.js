import{r as N,j as t,X as W}from"./app-fwyInB3c.js";import{L as S}from"./label-zCtqi3J5.js";import{T as rt}from"./textarea-C969rVin.js";import{C as ot}from"./checkbox-BQT_ir1e.js";import{I as H}from"./input-CqlBlYgU.js";import{I as h}from"./LucideIcon-CEqEhMjI.js";import st from"./PermisoAdvanceDropdown-CMmjCTaL.js";import at from"./PermisoStatsInline-Bx30kg1z.js";import{S as I}from"./StatusTipoPermisoMapColor-uADlCWR0.js";import{c as $}from"./utils-CytzSlOG.js";import{B as f}from"./Button-CQuYVLGu.js";import{C as it}from"./calendar-DctTJhwg.js";import{P as lt,a as ct,b as mt}from"./popover-DaRbHQOK.js";import{S as V,a as X,b as q,c as B,d as J}from"./select-B5O0TxCl.js";import{f as z}from"./format-Be40hyfq.js";import{e as T}from"./es-DNLwfvrq.js";import"./index-BIJodELy.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./index-BxSEkZvI.js";import"./index-p2DxCSsL.js";import"./index-DmpKZt4E.js";import"./index-4A9uUPu1.js";import"./index-BZgm3BCW.js";import"./index-BZxTbISK.js";import"./check-5DjPwM22.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";import"./Pill-l4GaXyto.js";import"./AdvanceDropdown-qoEi4BOz.js";import"./Create-tmHr2JLD.js";import"./AuthenticatedLayout-B4CSARVj.js";import"./sidebar-CPh6C6LB.js";import"./button-Blwr-A5N.js";import"./separator-BWKairMX.js";import"./sheet-DHc5Hgr8.js";import"./index-DVo7DTeW.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./skeleton-DSiYFg9q.js";import"./tooltip-DFfoxvAF.js";import"./index-CLai1W86.js";import"./index-CeuhGnKJ.js";import"./dropdown-menu-bHoOJ61X.js";import"./index-C_F9oucK.js";import"./index-v24TFYKQ.js";import"./avatar-oBOSifLN.js";import"./PopUpIncidencias-CaovAEi3.js";import"./card-DYkZYgg5.js";import"./useTranslation-BtIkv0Na.js";import"./UserAvatar-cKyxDEhx.js";import"./ApplicationLogo-C2FcO4AY.js";import"./Yoopta-Dj4Guze5.js";import"./throttle-CmSTFqON.js";import"./index-WlsBA3k2.js";import"./PrimaryButton-SsXyLm2e.js";import"./DecisionModal-Dl8siGBG.js";import"./alert-dialog-kDfn0La3.js";import"./useNotifications-CSWGH93r.js";import"./ShowNotificactionFromJestream-cKOlvVdg.js";import"./OnboardingModal-D0HRNKzO.js";import"./Modal-BkRna8gK.js";import"./transition-ByAjZSmr.js";import"./StepItem-bNLmZaq8.js";import"./StepProgress-DNpLodXf.js";import"./WelcomeContent-BPJ5E7_N.js";import"./onboardingImages-CoczwfNn.js";import"./AboutContent-DOlAXyok.js";import"./TeamContent-C0DysUYq.js";import"./CreateLanguageForm-xwtvYsjX.js";import"./alert-D9izbOQG.js";import"./dialog-iaZkf6Xy.js";import"./InputSkeleton-CFMfUb-2.js";import"./table-cS0UKUSm.js";import"./GlobalFilter-DNA5td8x.js";import"./DataTableContext-BYrqyX0i.js";import"./index-Z1g0u-qm.js";import"./TableDebugging-C1u6ii1k.js";import"./AdvancedHeader-CpvwMmYr.js";import"./command-PoUoScut.js";import"./badge-BgloL8Ae.js";import"./DatePicker-YJSItPq7.js";import"./parseISO-Efi0RkWR.js";import"./constants-BKFt95HM.js";import"./RowActionsColumn-CM2slffX.js";import"./RowActionsTrigger-DnJzXomR.js";import"./endOfWeek-DoVA-Yvp.js";import"./toDate-qOSwr3PX.js";import"./addDays-B9Fzl-_R.js";import"./charts-D-b4h_4c.js";import"./index-DpIruHMc.js";import"./PieChart-DDiBUCNq.js";import"./PolarAngleAxis-CNFzyAg3.js";function dt({className:c,selectedRange:u,onRangeChange:l,maxDurationMilliseconds:a,disablePastDates:w=!1,permisoNombre:b,permisoDuracionDias:g}){var Y,O,P;const[r,n]=N.useState(()=>{if(u)return u}),[D,m]=N.useState(null),[i,d]=N.useState(new Date),o=N.useRef(null);N.useEffect(()=>{u?n(u):(n(void 0),l&&l(void 0)),u||(o.current&&(clearTimeout(o.current),o.current=null),m(null))},[u,l]),N.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const k=e=>{let s=e,p=!1;const E=typeof a=="number"&&a>0?a:null;if(e!=null&&e.from&&(e!=null&&e.to)&&E){const j=new Date(e.from),A=new Date(e.to);j.setHours(0,0,0,0),A.setHours(0,0,0,0);const tt=A.getTime()-j.getTime(),et=Math.floor(tt/(1e3*60*60*24))+1,M=Math.floor(E/(1e3*60*60*24));if(et>M){const L=new Date(j);L.setDate(L.getDate()+M-1),s={...e,to:L},p=!0,o.current&&(clearTimeout(o.current),o.current=null),m(`El rango se ha ajustado a la duración máxima de ${M} ${M===1?"día":"días"}.`),o.current=setTimeout(()=>{m(null)},5e3)}}p||(o.current&&(clearTimeout(o.current),o.current=null),m(null)),n(s),l&&l(s)},v=()=>{const e=[];if(w){const p=new Date;p.setHours(0,0,0,0),e.push({before:p})}const s=typeof a=="number"&&a>0?a:null;if(r!=null&&r.from&&!(r!=null&&r.to)&&s){const p=new Date(r.from);p.setHours(0,0,0,0);const E=Math.floor(s/(1e3*60*60*24)),j=new Date(p);j.setDate(j.getDate()+E-1),e.push({after:j}),e.push({before:r.from})}else r!=null&&r.from;return e.length>0?e:void 0},y=()=>{n(void 0),l&&l(void 0),o.current&&(clearTimeout(o.current),o.current=null),m(null)},_=()=>{const e=new Date(i);e.setFullYear(e.getFullYear()+1),d(e)},C=()=>{const e=new Date(i);e.setFullYear(e.getFullYear()-1),d(e)},F=()=>{const e=new Date(i);e.setMonth(e.getMonth()+1),d(e)},x=()=>{const e=new Date(i);e.setMonth(e.getMonth()-1),d(e)},U=()=>{d(new Date)},G=e=>{const s=new Date(i);s.setMonth(e),d(s)},K=e=>{const s=new Date(i);s.setFullYear(e),d(s)},Q=new Date().getFullYear(),Z=Array.from({length:21},(e,s)=>Q-10+s),R=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return t.jsxs("div",{className:$("grid gap-2",c),children:[b&&t.jsxs("div",{className:"flex flex-col gap-3 p-4 mb-2 text-sm bg-blue-50 border border-blue-200 rounded-lg dark:bg-gray-800 dark:border-blue-600",role:"alert",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{name:"Info",className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0",size:20,color:"currentColor"}),t.jsx("span",{className:"text-blue-800 dark:text-blue-300 font-medium",children:"Tipo de permiso:"}),t.jsxs("div",{className:`
                            flex flex-row items-center w-fit gap-2 
                            ${((Y=I[b])==null?void 0:Y.bg)||"bg-gray-500/30"} 
                            ${((O=I[b])==null?void 0:O.text)||"text-gray-500"} 
                            text-xs rounded-full px-3 py-1
                        `,children:[t.jsx("div",{className:`${((P=I[b])==null?void 0:P.point)||"bg-gray-500"} w-2 h-2 rounded-full`}),t.jsx("span",{className:"font-bold",children:b})]})]}),g!==void 0&&t.jsxs("div",{className:"text-blue-700 dark:text-blue-400 text-xs",children:[t.jsx("strong",{children:"Duración máxima:"})," ",g," ",g===1?"día":"días"]}),t.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-xs",children:[t.jsx("strong",{children:"Instrucciones:"})," Selecciona la fecha de inicio y el rango se ajustará automáticamente según la duración máxima permitida."]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(lt,{children:[t.jsx(ct,{asChild:!0,children:t.jsxs(f,{id:"date",variant:"ghost",className:$("flex-1 justify-start gap-2 text-left font-normal rounded-full py-2 bg-custom-gray-default dark:bg-custom-blackSemi dark:text-custom-white text-custom-blue flex border-0 hover:bg-custom-gray-light dark:hover:bg-custom-gray-darker transition-colors",!r&&"text-custom-gray-dark dark:text-custom-gray-light"),children:[t.jsx(h,{name:"CalendarRange",className:"w-5 h-5",color:"#FD7E14",size:20}),r!=null&&r.from?r.to?t.jsxs(t.Fragment,{children:[z(r.from,"dd LLL, y",{locale:T})," -"," ",z(r.to,"dd LLL, y",{locale:T})]}):z(r.from,"dd LLL, y",{locale:T}):t.jsx("span",{children:"Selecciona un rango de fechas"})]})}),t.jsxs(mt,{className:"w-auto p-0 bg-custom-white dark:bg-custom-blackLight border-custom-gray-light dark:border-custom-gray-darker",align:"start",children:[D&&t.jsx("p",{className:"p-2 text-sm text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-400 border-b border-orange-200 dark:border-orange-800",children:D}),t.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-custom-gray-light dark:border-custom-gray-darker bg-custom-gray-default/50 dark:bg-custom-blackSemi",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(V,{value:i.getMonth().toString(),onValueChange:e=>G(parseInt(e)),children:[t.jsx(X,{className:"w-28 h-7 text-xs bg-custom-white dark:bg-custom-blackLight border-custom-gray-light dark:border-custom-gray-darker text-custom-blue dark:text-custom-white",children:t.jsx(q,{})}),t.jsx(B,{className:"bg-custom-white dark:bg-custom-blackLight border-custom-gray-light dark:border-custom-gray-darker",children:R.map((e,s)=>t.jsx(J,{value:s.toString(),className:"text-custom-blue dark:text-custom-white hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi",children:e},s))})]}),t.jsxs(V,{value:i.getFullYear().toString(),onValueChange:e=>K(parseInt(e)),children:[t.jsx(X,{className:"w-20 h-7 text-xs bg-custom-white dark:bg-custom-blackLight border-custom-gray-light dark:border-custom-gray-darker text-custom-blue dark:text-custom-white",children:t.jsx(q,{})}),t.jsx(B,{className:"bg-custom-white dark:bg-custom-blackLight border-custom-gray-light dark:border-custom-gray-darker",children:Z.map(e=>t.jsx(J,{value:e.toString(),className:"text-custom-blue dark:text-custom-white hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi",children:e},e))})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(f,{variant:"ghost",size:"sm",onClick:x,className:"h-7 w-7 p-0 hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi text-custom-blue dark:text-custom-white",title:"Mes anterior",children:t.jsx(h,{name:"ChevronLeft",className:"w-3 h-3",size:12,color:"currentColor"})}),t.jsx(f,{variant:"ghost",size:"sm",onClick:F,className:"h-7 w-7 p-0 hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi text-custom-blue dark:text-custom-white",title:"Mes siguiente",children:t.jsx(h,{name:"ChevronRight",className:"w-3 h-3",size:12,color:"currentColor"})}),t.jsx("div",{className:"w-px h-4 bg-custom-gray-light dark:bg-custom-gray-darker mx-1"}),t.jsx(f,{variant:"ghost",size:"sm",onClick:C,className:"h-7 w-7 p-0 hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi text-custom-blue dark:text-custom-white",title:"Año anterior",children:t.jsx(h,{name:"ChevronsLeft",className:"w-3 h-3",size:12,color:"currentColor"})}),t.jsx(f,{variant:"ghost",size:"sm",onClick:_,className:"h-7 w-7 p-0 hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi text-custom-blue dark:text-custom-white",title:"Año siguiente",children:t.jsx(h,{name:"ChevronsRight",className:"w-3 h-3",size:12,color:"currentColor"})}),t.jsx("div",{className:"w-px h-4 bg-custom-gray-light dark:bg-custom-gray-darker mx-1"}),t.jsx(f,{variant:"ghost",size:"sm",onClick:U,className:"h-7 px-2 text-xs hover:bg-custom-orange hover:text-white dark:hover:bg-custom-orange text-custom-blue dark:text-custom-white transition-colors",title:"Ir a hoy",children:"Hoy"}),r&&t.jsx("div",{className:"w-px h-4 bg-custom-gray-light dark:bg-custom-gray-darker mx-1"}),r&&t.jsxs(f,{variant:"ghost",size:"sm",onClick:y,className:"h-7 px-2 text-xs hover:bg-red-500 hover:text-white dark:hover:bg-red-500 text-red-600 dark:text-red-400 transition-colors",title:"Limpiar selección",children:[t.jsx(h,{name:"X",className:"w-3 h-3 mr-1",size:12,color:"currentColor"}),"Limpiar"]})]})]}),t.jsx(it,{mode:"range",defaultMonth:i,month:i,onMonthChange:d,selected:r,onSelect:k,numberOfMonths:2,weekStartsOn:1,disabled:v(),showOutsideDays:!0,fixedWeeks:!0,locale:T,className:"bg-custom-white dark:bg-custom-blackLight",classNames:{nav_button:"hidden",nav_button_previous:"hidden",nav_button_next:"hidden",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium text-custom-blue dark:text-custom-white",head_row:"flex",head_cell:"text-custom-gray-dark dark:text-custom-gray-light rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"relative p-0 text-center text-sm focus-within:relative focus-within:z-20",day:"h-9 w-9 text-center text-sm p-0 relative text-custom-blue dark:text-custom-white hover:bg-orange-50 dark:hover:bg-orange-900/20 hover:text-[#FD7E14] dark:hover:text-[#FD7E14] focus-visible:bg-orange-50 dark:focus-visible:bg-orange-900/20 focus-visible:text-[#FD7E14] dark:focus-visible:text-[#FD7E14] rounded-md transition-colors",day_selected:"bg-[#FD7E14] text-white hover:bg-[#e67112] hover:text-white focus:bg-[#FD7E14] focus:text-white font-medium [&.rdp-day_today]:bg-[#FD7E14] [&.rdp-day_today]:text-white [&.rdp-day_today]:border-0",day_today:"bg-[#FD7E14]/20 dark:bg-[#FD7E14]/30 text-[#FD7E14] font-medium border border-[#FD7E14]/30 dark:border-[#FD7E14]/50",day_outside:"text-custom-gray-dark dark:text-custom-gray-dark opacity-40",day_disabled:"text-custom-gray-dark dark:text-custom-gray-dark opacity-60 hover:bg-transparent hover:text-custom-gray-dark dark:hover:text-custom-gray-dark cursor-not-allowed",day_range_middle:"aria-selected:bg-custom-gray-default/60 dark:aria-selected:bg-custom-gray-darker/80 aria-selected:text-custom-blue dark:aria-selected:text-custom-white aria-selected:font-medium",day_range_start:"day-range-start rounded-l-md bg-[#FD7E14] text-white hover:bg-[#e67112] [&.rdp-day_today]:bg-[#FD7E14] [&.rdp-day_today]:text-white [&.rdp-day_today]:border-0",day_range_end:"day-range-end rounded-r-md bg-[#FD7E14] text-white hover:bg-[#e67112] [&.rdp-day_today]:bg-[#FD7E14] [&.rdp-day_today]:text-white [&.rdp-day_today]:border-0"}})]})]}),r&&t.jsx(f,{variant:"ghost",size:"sm",onClick:y,className:"rounded-full bg-red-100 hover:bg-red-200 dark:bg-red-900/20 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 px-3 transition-colors",title:"Limpiar selección",children:t.jsx(h,{name:"X",className:"w-4 h-4",size:16,color:"currentColor"})})]})]})}function ar({selectedPermiso:c,onPermisoSelect:u,maxDurationDays:l,formData:a,validationErrors:w=[],markFieldAsTouched:b=()=>{},dateRange:g=null,empleadoId:r=null}){var k,v;const{auth:n}=W().props,D=r||((v=(k=n==null?void 0:n.user)==null?void 0:k.empleado)==null?void 0:v.id),m=new Date().getFullYear(),i=g&&g.from&&g.to?g:{from:new Date(m,0,1),to:new Date(m,11,31)},d=i.from?i.from.toISOString().split("T")[0]:`${m}-01-01`,o=i.to?i.to.toISOString().split("T")[0]:`${m}-12-31`;return t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs(S,{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Permiso Solicitado ",t.jsx("span",{className:"text-custom-orange",children:"*"})]}),t.jsx(st,{value:c||(a!=null&&a.permiso_id?{id:a.permiso_id}:null),onChange:y=>{u(y),b("permiso_id")},className:"w-full rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",empleadoId:D,fechaInicio:d,fechaFin:o,showStats:!1}),!c&&l&&t.jsxs("p",{className:"text-xs text-custom-gray-dark dark:text-custom-gray-light mt-1",children:["Duración máxima: ",l," día(s)"]})]})}function ir({dateRange:c,onDateRangeChange:u,formData:l,onInputChange:a,canShowCheckbox:w,canShowTimeFields:b,shouldForceFullDay:g,maxDurationMs:r,selectedPermiso:n,validationErrors:D,markFieldAsTouched:m=()=>{},empleadoId:i=null}){var k,v,y,_,C,F;const{auth:d}=W().props,o=i||((v=(k=d==null?void 0:d.user)==null?void 0:k.empleado)==null?void 0:v.id);return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(S,{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Fecha del Permiso"}),t.jsx(dt,{selectedRange:c,onRangeChange:x=>{u(x),x&&(x.from||x.to)&&m("fecha")},maxDurationMilliseconds:r,disablePastDates:!0,permisoNombre:n==null?void 0:n.nombre,permisoDuracionDias:Math.floor((r||0)/(1e3*60*60*24))}),t.jsx(at,{selectedPermiso:n,empleadoId:o,fechaInicio:(_=(y=c==null?void 0:c.from)==null?void 0:y.toISOString())==null?void 0:_.split("T")[0],fechaFin:(F=(C=c==null?void 0:c.to)==null?void 0:C.toISOString())==null?void 0:F.split("T")[0]})]}),b&&t.jsx("div",{className:"flex flex-col gap-1",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(S,{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Hora de inicio"}),t.jsxs("div",{className:"flex items-center relative rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",children:[t.jsx(h,{name:"Clock",className:"absolute left-3 text-custom-orange",size:16}),t.jsx(H,{type:"time",className:"pl-10 rounded-full border-0 dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.hora_inicio||"",onChange:x=>a("hora_inicio",x.target.value),onFocus:()=>m("hora_inicio")})]})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(S,{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Hora de fin"}),t.jsxs("div",{className:"flex items-center relative rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",children:[t.jsx(h,{name:"Clock",className:"absolute left-3 text-custom-orange",size:16}),t.jsx(H,{type:"time",className:"pl-10 rounded-full border-0 dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:l.hora_fin||"",onChange:x=>a("hora_fin",x.target.value),onFocus:()=>m("hora_fin")})]})]})]})}),w&&t.jsx("div",{className:"flex flex-col gap-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{className:"border-custom-gray-semiLight dark:border-custom-white",id:"dia_completo",checked:l.dia_completo||!1,onCheckedChange:x=>a("dia_completo",x)}),t.jsx(S,{htmlFor:"dia_completo",className:"text-sm font-medium text-custom-blackSemi dark:text-custom-white",children:"Día completo"})]})}),g&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[t.jsx(h,{name:"Info",className:"text-blue-600 dark:text-blue-400 flex-shrink-0",size:16}),t.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Los permisos de múltiples días son automáticamente de días completos."})]})]})}function lr({formData:c,onInputChange:u,validationErrors:l=[],markFieldAsTouched:a=()=>{}}){return t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs(S,{className:"text-sm font-bold text-custom-blackLight dark:text-custom-white",children:["Motivo ",t.jsx("span",{className:"text-custom-orange",children:"*"})]}),t.jsx(rt,{placeholder:"Escribe aquí el motivo por el que solicita el permiso...",className:"rounded-xl h-20 max-h-20 resize-none dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi active:border-0 focus-visible:border-0 focus-visible:ring-0 focus-visible:ring-offset-0 p-3 overflow-y-auto",value:c.motivo||"",onChange:w=>u("motivo",w.target.value),onFocus:()=>a("motivo")})]})}export{lr as AdditionalDetailsSection,ir as DateTimeSection,ar as PermisoSelectionSection};
