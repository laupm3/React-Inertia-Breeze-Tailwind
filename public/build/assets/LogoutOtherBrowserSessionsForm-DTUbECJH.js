import{r as c,G as g,j as e}from"./app-fwyInB3c.js";import{toast as m}from"./index-WlsBA3k2.js";import{D as f}from"./DialogModal-BHNZflaY.js";import{I as h}from"./InputError-CrNaC_eR.js";import{T as v}from"./TextInput-B-VFdlBC.js";import{I as d}from"./LucideIcon-CEqEhMjI.js";import{B as o}from"./Button-CQuYVLGu.js";import"./Modal-BkRna8gK.js";import"./transition-ByAjZSmr.js";import"./input-CqlBlYgU.js";import"./utils-CytzSlOG.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";function K({sessions:i}){const[x,n]=c.useState(!1),t=c.useRef(null),r=g({password:""}),u=()=>{n(!0),setTimeout(()=>t.current.focus(),250)},l=()=>{r.delete(route("other-browser-sessions.destroy"),{preserveScroll:!0,onSuccess:()=>{a(),m.success("Sesiones cerradas correctamente")},onError:()=>{t.current.focus(),m.error("Error al cerrar las sesiones. Vuelva a intentarlo.")},onFinish:()=>r.reset()})},a=()=>{n(!1),r.reset()};return e.jsxs("form",{children:[e.jsx("h2",{className:"text-lg font-bold text-custom-blue dark:text-white",children:"Tus dispositivos"}),e.jsx("div",{className:"max-w-xl text-sm text-gray-600 dark:text-gray-400",children:"Has iniciado sesión en estos navegadores y dispositivos. Si no reconoces alguno de estos dispositivos, cierra la sesión en ellos."}),i.length>0&&e.jsx("div",{className:"mt-5 space-y-3",children:i.map((s,p)=>e.jsxs("div",{className:"flex items-center bg-custom-gray-default dark:bg-custom-blackSemi rounded-full p-2",children:[e.jsx("div",{children:s.agent.is_desktop?e.jsx(d,{name:"TvMinimal",className:"w-7 h-7 text-custom-gray-semiDark dark:text-white ml-4"}):e.jsx(d,{name:"Smartphone",className:"w-7 h-7 text-custom-gray-semiDark dark:text-white ml-4"})}),e.jsxs("div",{className:"ms-3 flex-1",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:[s.agent.platform||"Unknown"," - ",s.agent.browser||"Unknown"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.is_current_device?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-custom-orange/10 text-custom-orange",children:[e.jsx("span",{className:"bg-custom-orange w-1.5 h-1.5 rounded-full mr-1.5"}),"Este dispositivo"]}):e.jsxs("span",{className:"text-xs text-gray-500",children:["Última actividad ",s.last_active]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500",children:s.ip_address})]})]})]},p))}),e.jsx("div",{className:"flex flex-col items-end mt-5",children:e.jsx(o,{type:"button",onClick:u,className:"w-fit",children:"Cerrar sesión en otros dispositivos"})}),e.jsxs(f,{show:x,onClose:a,title:"Cerrar sesión en otros navegadores",children:[e.jsx("p",{children:"Por favor, ingresa tu contraseña para confirmar que deseas cerrar sesión en todos tus otros navegadores."}),e.jsxs("div",{className:"mt-4",children:[e.jsx(v,{ref:t,value:r.password,onChange:s=>r.setData("password",s.target.value),type:"password",placeholder:"Contraseña",autoComplete:"current-password",onKeyUp:s=>s.key==="Enter"&&l(),className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi w-full"}),e.jsx(h,{message:r.errors.password,className:"mt-2"})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(o,{variant:"secondary",onClick:a,children:"Cancelar"}),e.jsx(o,{variant:"destructive",className:"ms-3 w-fit",disabled:r.processing,onClick:l,children:"Cerrar sesión en otros navegadores"})]})]})]})}export{K as default};
