import{r as t,j as e,a as k}from"./app-fwyInB3c.js";import{c as E}from"./utils-CytzSlOG.js";import{e as w,C as N,f as S,b as v,c as D,d as L}from"./command-PoUoScut.js";import{P,a as I,b as O}from"./popover-DaRbHQOK.js";import{E as p}from"./EmpleadoAvatar-BBWI_HPN.js";import{I as x}from"./LucideIcon-CEqEhMjI.js";import{u as T}from"./useTranslation-BtIkv0Na.js";function F({prevEmpleadoId:l,fetchUrl:d,className:h,onSelect:c}){const[m,i]=t.useState(!1),[a,o]=t.useState(null),[n,g]=t.useState([]),[j,u]=t.useState(null),[A,y]=t.useState(!0),{t:C}=T("datatable"),f=t.useCallback(s=>{c&&c(s)},[c]);t.useEffect(()=>{if(l){const s=n.find(r=>r.id===l);s&&o(s)}else o(null)},[l,n]),t.useEffect(()=>{(async()=>{try{const r=await k.get(d);r.status===200?g(r.data.empleados):u(!0)}catch{u(!0)}finally{y(!1)}})()},[d]);const b=t.useMemo(()=>n.map(s=>e.jsxs(w,{value:s.id,onSelect:()=>{s.id===(a==null?void 0:a.id)?o(null):o(s),i(!1),f(s)},children:[e.jsx(x,{name:"Check",className:E("mr-2 h-4 w-4",(a==null?void 0:a.id)===s.id?"opacity-100":"opacity-0")}),e.jsx(p,{empleado:s})]},s.id)),[n,a,f]);return e.jsxs(P,{open:m,onOpenChange:i,modal:!0,children:[e.jsx(I,{asChild:!0,children:e.jsxs("button",{role:"combobox","aria-expanded":m,className:`w-full justify-between rounded-full bg-custom-gray-default dark:bg-custom-gray-darker text-custom-gray-semiDark dark:text-custom-gray-semiLight ${h} text-sm flex p-2.5 items-center cursor-default`,onClick:()=>i(!m),children:[a?e.jsx("div",{className:"flex w-96 items-center ml-4 -m-1.5",children:e.jsx(p,{empleado:a})}):C("placeholder.SeleccionaEmpleado"),e.jsx(x,{name:"ChevronsUpDown",className:"ml-2 mr-4 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(O,{className:"w-full p-2",children:e.jsxs(N,{children:[e.jsx(S,{className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",placeholder:"Buscar empleado..."}),e.jsxs(v,{children:[e.jsx(D,{children:j?e.jsx("span",{className:"text-red-500",children:"Error al cargar los empleados."}):"Ning√∫n empleado encontrado"}),e.jsx(L,{children:b})]})]})})]})}export{F as E};
