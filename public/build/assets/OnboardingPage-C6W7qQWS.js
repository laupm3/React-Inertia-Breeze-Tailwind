import{r as o,A as k,j as s,S as P}from"./app-fwyInB3c.js";import{A as L}from"./AuthenticatedLayout-B4CSARVj.js";import R from"./OnboardingModal-D0HRNKzO.js";import{d as O}from"./StepItem-bNLmZaq8.js";import"./tooltip-DFfoxvAF.js";import"./Button-CQuYVLGu.js";import B from"./MobileLayout-DRW9SksU.js";import V from"./DesktopLayout-w45US9El.js";import"./sidebar-CPh6C6LB.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./button-Blwr-A5N.js";import"./input-CqlBlYgU.js";import"./separator-BWKairMX.js";import"./index-BIJodELy.js";import"./sheet-DHc5Hgr8.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./x-2mzC_aTV.js";import"./createLucideIcon-DoJ0Kelj.js";import"./skeleton-DSiYFg9q.js";import"./LucideIcon-CEqEhMjI.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./dropdown-menu-bHoOJ61X.js";import"./index-C_F9oucK.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-v24TFYKQ.js";import"./popover-DaRbHQOK.js";import"./avatar-oBOSifLN.js";import"./PopUpIncidencias-CaovAEi3.js";import"./card-DYkZYgg5.js";import"./textarea-C969rVin.js";import"./useTranslation-BtIkv0Na.js";import"./UserAvatar-cKyxDEhx.js";import"./ApplicationLogo-C2FcO4AY.js";import"./Yoopta-Dj4Guze5.js";import"./throttle-CmSTFqON.js";import"./index-WlsBA3k2.js";import"./PrimaryButton-SsXyLm2e.js";import"./DecisionModal-Dl8siGBG.js";import"./alert-dialog-kDfn0La3.js";import"./useNotifications-CSWGH93r.js";import"./ShowNotificactionFromJestream-cKOlvVdg.js";import"./Modal-BkRna8gK.js";import"./transition-ByAjZSmr.js";import"./StepProgress-DNpLodXf.js";import"./WelcomeContent-BPJ5E7_N.js";import"./onboardingImages-CoczwfNn.js";import"./AboutContent-DOlAXyok.js";import"./TeamContent-C0DysUYq.js";import"./index-CeuhGnKJ.js";import"./CompletionMessage-B_eSn3qt.js";import"./ProgressSection-Di22g3Eb.js";import"./ManagerInfo-B2ABt9aI.js";import"./OnboardingSteps-BFp8zWeb.js";import"./DocumentsSection-DwEy_JKh.js";import"./SocialMediaSection-9Dxidf8-.js";import"./CommonSections-6Bs9IFYQ.js";const E=(e,i=null)=>{const[c,a]=o.useState(()=>{try{const t=window.localStorage.getItem(e);return t===null||t==="undefined"||t==="null"?(window.localStorage.removeItem(e),i):JSON.parse(t)}catch(t){return console.warn(`Error reading localStorage key "${e}":`,t),window.localStorage.removeItem(e),i}}),p=o.useCallback(t=>{try{if(a(t),t==null)window.localStorage.removeItem(e);else{const r=JSON.stringify(t);window.localStorage.setItem(e,r),window.localStorage.getItem(e)!==r&&console.error(`Failed to save to localStorage key "${e}"`)}}catch(r){console.warn(`Error setting localStorage key "${e}":`,r)}},[e]),l=o.useCallback(()=>{try{a(i),window.localStorage.removeItem(e)}catch(t){console.warn(`Error removing localStorage key "${e}":`,t)}},[e,i]);return[c,p,l]},$=()=>{o.useEffect(()=>{(()=>{Object.values(O).forEach(b=>{const v=window.localStorage.getItem(b);(v==="undefined"||v==="null")&&(console.warn(`ðŸ§¹ Cleaning corrupted localStorage key: ${b}`),window.localStorage.removeItem(b))})})()},[]);const[e,i,c]=E(O.VISITED_STEPS,{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1}),[a,p,l]=E(O.ONBOARDING_SKIPPED,!1),[t,r,m]=E(O.ONBOARDING_COMPLETED,!1),C=o.useCallback(h=>{console.log(`âœ… Marking step as visited: ${h}`);const w={...e,[h]:!0};i(w)},[i,e]),f=Object.keys(e).length,d=Object.values(e).filter(Boolean).length,u=f>0?d/f*100:0,S=Object.values(e).every(Boolean)||a;o.useEffect(()=>{},[e,a,t,u,S]);const x=o.useCallback(()=>{c(),l(),m()},[c,l,m]);return{visitedSteps:e,onboardingSkipped:a,onboardingCompleted:t,totalSteps:f,completedSteps:d,progressPercentage:u,isComplete:S,markStepAsVisited:C,setOnboardingSkipped:p,setOnboardingCompleted:r,resetProgress:x}},_=()=>{const[e,i]=o.useState(!1),[c,a]=o.useState(0),p=o.useCallback(()=>{i(!0),a(r=>r+1)},[]),l=o.useCallback(()=>{i(!1)},[]),t=o.useCallback(()=>{i(r=>!r),e||a(r=>r+1)},[e]);return{showOnboardingModal:e,onboardingModalKey:c,showModal:p,hideModal:l,toggleModal:t}},F=({managerInfo:e,departamento:i,empleados:c})=>{const a=$(),p=_(),{visitedSteps:l,onboardingSkipped:t,progressPercentage:r,isComplete:m,markStepAsVisited:C,setOnboardingSkipped:f}=a,{showOnboardingModal:d,showModal:u,hideModal:S}=p,[x,h]=o.useState(0),[w,b]=o.useState(!1),[v,M]=o.useState(!1),j=Object.values(l).every(Boolean)||t;o.useEffect(()=>{t&&k.visit("/dashboard")},[t]),o.useEffect(()=>{if(j&&r===100){M(!0);const n=setTimeout(()=>{M(!1)},5e3);return()=>clearTimeout(n)}},[j,r]),o.useEffect(()=>{["visitedSteps","onboardingSkipped","onboardingCompleted"].forEach(g=>{const y=localStorage.getItem(g);(y==="undefined"||y==="null")&&localStorage.removeItem(g)})},[]),o.useEffect(()=>{const n=localStorage.getItem("onboardingVisited")==="true";if(!m&&!d&&!n){const g=setTimeout(()=>{u()},1e3);return()=>clearTimeout(g)}},[m,d,u]),o.useEffect(()=>{if(m&&d&&!w){const n=setTimeout(()=>{S()},2e3);return()=>clearTimeout(n)}},[m,d,w,S]);const T=(n,g)=>{g&&(C(n),setTimeout(()=>{k.visit(g)},100))},N=()=>{(Object.values(l).every(Boolean)||t)&&(localStorage.setItem("onboardingCompleted","true"),k.visit("/dashboard"))},A=()=>{f(!0),localStorage.setItem("onboardingCompleted","true")},D=()=>{b(!0),h(n=>n+1),u()},K=()=>{b(!1),S()},I={showCompletionMessage:v,progressPercentage:r,isOnboardingComplete:j,visitedSteps:l,managerInfo:e,departamento:i,handleSkipOnboarding:A,handleCompleteToDashboard:N,handlePresentationClick:D,handleStepClick:T};return t?s.jsxs(s.Fragment,{children:[s.jsx(P,{title:"Redirigiendo..."}),s.jsx("div",{className:"min-h-screen bg-custom-gray-light dark:bg-custom-blackLight flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-custom-blue mx-auto mb-4"}),s.jsx("p",{className:"text-custom-gray-semiDark dark:text-custom-white",children:"Redirigiendo al dashboard..."})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(P,{title:"Onboarding"}),s.jsxs("div",{className:"min-h-screen bg-custom-white dark:bg-custom-blackLight text-custom-gray-semiDark dark:text-custom-white",children:[s.jsx(B,{...I}),s.jsx(V,{...I})]}),s.jsx(R,{show:d,onClose:K,empleados:c},x)]})};F.layout=e=>s.jsx(L,{children:e});export{F as default};
