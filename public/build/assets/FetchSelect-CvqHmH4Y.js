import{a as y,r as b,j as r}from"./app-fwyInB3c.js";import{S as p,a as k,b as v,c as C,d as i}from"./select-B5O0TxCl.js";const l={};function D(o,n){const e=`${o}::${n}`;l[e]||(l[e]={data:null,loading:!1,error:null,subscribers:new Set,async fetchData(a=!1){var j;const t=l[e];if(!(t.data&&!a)&&!(t.loading&&!a)){t.loading=!0,t.error=null,m();try{const S=await y.get(route(o));t.data=((j=S.data)==null?void 0:j[n])||[]}catch(S){console.error("Error al cargar datos:",S),t.error="No se pudieron cargar los datos"}finally{t.loading=!1,m()}}}});const{data:u,loading:g,error:h,subscribers:c,fetchData:d}=l[e],[s,f]=b.useState({data:u,loading:g,error:h}),m=()=>{c.forEach(a=>a({data:l[e].data,loading:l[e].loading,error:l[e].error}))},x=b.useCallback(()=>{d(!0)},[o,n]);return b.useEffect(()=>{const a=t=>f(t);return c.add(a),!u&&!g&&d(),()=>{c.delete(a)}},[o,n]),{selectorData:s.data||[],loading:s.loading,error:s.error,reload:x}}function N({fetchRoute:o,responseParameter:n,value:e,onValueChange:u,disabled:g=!1,placeholder:h="selecciona...",className:c=""}){const{selectorData:d,loading:s,error:f,reload:m}=D(o,n),x=b.useMemo(()=>e==null?"":e.toString(),[e]);return r.jsx("div",{className:"w-full",children:r.jsxs(p,{value:x,onValueChange:u,disabled:g||s,children:[r.jsx(k,{className:`rounded-full dark:text-custom-gray-semiLight bg-custom-gray-default dark:bg-custom-blackSemi focus:ring-transparent ${c}`,children:r.jsx(v,{placeholder:s?"Cargando...":h})}),r.jsx(C,{className:"bg-custom-gray-default dark:bg-custom-blackSemi max-w-[80vw]",children:f?r.jsxs(r.Fragment,{children:[r.jsxs(i,{value:"error",disabled:!0,children:["Error: ",f]}),r.jsx(i,{value:"retry",onClick:a=>{a.preventDefault(),a.stopPropagation(),m()},children:"Reintentar carga"})]}):s?r.jsx(i,{value:"loading",disabled:!0,children:"Cargando..."}):d.length===0?r.jsx(i,{value:"empty",disabled:!0,children:"No hay datos disponibles"}):d.map(a=>r.jsx(i,{value:a.id.toString(),children:a.nombre||a.name},a.id))})]})})}export{N as F};
