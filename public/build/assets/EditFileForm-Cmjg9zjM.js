import{r as s,j as e,a as f,A as b}from"./app-fwyInB3c.js";import{C as A,c as k}from"./card-DYkZYgg5.js";import{L as o}from"./label-zCtqi3J5.js";import{B as x}from"./button-Blwr-A5N.js";import{toast as h}from"./index-WlsBA3k2.js";import"./utils-CytzSlOG.js";import"./index-BIJodELy.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";function O({onClose:p,currentFolder:l,fileContextMenu:r,isModalEditFileOpen:w,setIsModalEditFileOpen:g}){const[t,i]=s.useState(!1),[c,S]=s.useState(null),[d,v]=s.useState(r.nivel_seguridad_id??1),[n,j]=s.useState(r.nivel_acceso_id??4),[m,y]=s.useState(r.nombre??"Nombre de archivo"),u=s.useRef(null);s.useEffect(()=>{u.current.focus()},[]),l.path.split("/").pop();const N=async()=>{i(!0);try{const a=await f.patch(`/admin/files/update/${r.id}`,{nombre:m,nivel_seguridad_id:d,nivel_acceso_id:n});b.visit(`/user/folders/${l.hash}`,{preserveState:!0}),h.success("Archivo actualizado correctamente!")}catch{h.error("Error: No se ha podido actualizar el archivo!")}finally{i(!1),g(!1)}};return e.jsx("div",{className:"w-full bg-gray-50",children:e.jsxs(A,{className:"w-full max-h-[94dvh] shadow-lg rounded-lg overflow-hidden px-2 pt-4 pb-2",children:[e.jsx("div",{className:"pl-4 mb-6",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-700 dark:text-white mb-2",children:["Editar archivo ",e.jsx("strong",{className:"text-custom-orange",children:r.nombre})]})}),e.jsx(k,{className:"flex-grow space-y-6 -ml-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"security-type",className:"text-sm font-medium text-gray-800 dark:text-gray-300 mr-4",children:["Nombre del archivo ",e.jsx("span",{className:"text-custom-orange text-lg",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Nueva carpeta",autoFocus:!0,className:"w-3/5 rounded-md border-gray-300 text-sm shadow-sm focus:ring-orange-500 focus:border-orange-500 dark:text-gray-900",value:m,onChange:a=>y(a.target.value),ref:u})]}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx(o,{htmlFor:"security-type",className:"text-sm font-medium text-gray-800 dark:text-gray-300",children:"Tipo de seguridad del archivo"}),e.jsxs("select",{id:"security-type",className:"block mt-1 rounded-md border-gray-300 text-sm shadow-sm focus:ring-orange-500 focus:border-orange-500 dark:text-gray-900",value:d,onChange:a=>v(a.target.value),children:[e.jsx("option",{value:"1",children:"L1"}),e.jsx("option",{value:"2",children:"L2"}),e.jsx("option",{value:"3",children:"L3"})]}),e.jsxs("ul",{children:[e.jsxs("li",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"text-lg text-custom-orange mr-1",children:"*"}),"L1: No requiere autenticación"]}),e.jsx("li",{className:"text-xs text-gray-500 ml-3",children:"L2: Requiere contraseña"}),e.jsx("li",{className:"text-xs text-gray-500 ml-3",children:"L3: Requiere autenticación en 2 pasos"})]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"security-type",className:"block text-sm font-medium text-gray-800 dark:text-gray-300 mr-4",children:"Visible por"}),e.jsxs("select",{id:"acceso-type",className:"block mt-1 rounded-md border-gray-300 text-sm shadow-sm focus:ring-orange-500 focus:border-orange-500 dark:text-gray-900",value:n,onChange:a=>j(a.target.value),children:[e.jsx("option",{value:"4",children:"Nivel Bajo"}),e.jsx("option",{value:"3",children:"Nivel Medio"}),e.jsx("option",{value:"2",children:"Nivel Alto"}),e.jsx("option",{value:"1",children:"Crítico"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-1",children:[e.jsx(x,{variant:"outline",className:"text-orange-500 border-orange-500 hover:bg-transparent hover:text-custom-gray-default mt-4 rounded-full",onClick:p,disabled:t,children:"Cancelar"}),e.jsx(x,{className:"bg-orange-500 text-white hover:bg-orange-600 mt-4 rounded-full",onClick:N,disabled:t,children:t?"Actualizando...":"Actualizar Carpeta"})]}),c&&e.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded",children:e.jsx("pre",{className:"text-xs text-gray-700",children:JSON.stringify(c,null,2)})})]})})]})})}export{O as default};
