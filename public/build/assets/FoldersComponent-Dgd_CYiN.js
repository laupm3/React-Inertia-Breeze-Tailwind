import{r as a,j as e}from"./app-fwyInB3c.js";import{A as S}from"./AuthenticatedLayout-B4CSARVj.js";import{f as y,F as v}from"./newFile-GqeeHhsW.js";import{M as k}from"./Modal-BkRna8gK.js";import{C,B as M,G as B,F as R,V as _}from"./viewToggleButtons-DT4w0a2A.js";import"./sidebar-CPh6C6LB.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./button-Blwr-A5N.js";import"./input-CqlBlYgU.js";import"./separator-BWKairMX.js";import"./index-BIJodELy.js";import"./sheet-DHc5Hgr8.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./x-2mzC_aTV.js";import"./createLucideIcon-DoJ0Kelj.js";import"./skeleton-DSiYFg9q.js";import"./tooltip-DFfoxvAF.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-CeuhGnKJ.js";import"./LucideIcon-CEqEhMjI.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./dropdown-menu-bHoOJ61X.js";import"./index-C_F9oucK.js";import"./index-v24TFYKQ.js";import"./popover-DaRbHQOK.js";import"./avatar-oBOSifLN.js";import"./PopUpIncidencias-CaovAEi3.js";import"./card-DYkZYgg5.js";import"./Button-CQuYVLGu.js";import"./textarea-C969rVin.js";import"./useTranslation-BtIkv0Na.js";import"./UserAvatar-cKyxDEhx.js";import"./ApplicationLogo-C2FcO4AY.js";import"./Yoopta-Dj4Guze5.js";import"./throttle-CmSTFqON.js";import"./index-WlsBA3k2.js";import"./PrimaryButton-SsXyLm2e.js";import"./DecisionModal-Dl8siGBG.js";import"./alert-dialog-kDfn0La3.js";import"./useNotifications-CSWGH93r.js";import"./ShowNotificactionFromJestream-cKOlvVdg.js";import"./OnboardingModal-D0HRNKzO.js";import"./StepItem-bNLmZaq8.js";import"./StepProgress-DNpLodXf.js";import"./WelcomeContent-BPJ5E7_N.js";import"./onboardingImages-CoczwfNn.js";import"./AboutContent-DOlAXyok.js";import"./TeamContent-C0DysUYq.js";import"./transition-ByAjZSmr.js";import"./index-C-xs73Vr.js";import"./index-DpIruHMc.js";import"./label-zCtqi3J5.js";import"./DialogModal-BHNZflaY.js";import"./InputError-CrNaC_eR.js";import"./TextInput-CZi-2d99.js";import"./ExtensionIcon-DXg-3KoR.js";import"./EditFolderForm-C05f1ht_.js";import"./EditFileForm-Cmjg9zjM.js";import"./RenameFolder-CaMENfpG.js";const A=({recentFiles:s,currentFolder:i,view:F,addFileToRecentFiles:d})=>{const[l,c]=a.useState(!1),[N,x]=a.useState(null),m=t=>{t.parentFolder==="S"?(x(t),c(!0)):(d(t),window.open("https://www.google.com","_blank"))},u=t=>y[t],b=t=>{const o=u(t);return(o==null?void 0:o.files)||[]},h=t=>{const o=u(t);return o!=null&&o.folders?o.folders.reduce((r,p)=>r.concat(h(p.key)),[t]):[o]},w=t=>{const o=h(t);return s.filter(r=>o.includes(r.parentFolder)&&r.parentFolder!=="Seguridad")},g=b(i),n=i.nivel_acceso_id=="2"?s.filter(t=>t.parentFolder!=="S"):g.length>0?g:w(i);return e.jsxs("div",{className:"p-5",children:[n.length>0?F==="list"?e.jsx("div",{className:"shadow-md rounded-md p-4 bg-custom-gray-default dark:bg-custom-blackSemi",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-600",children:[e.jsx("th",{className:"py-2 px-4",children:"Nombre"}),e.jsx("th",{className:"py-2 px-4",children:"Ubicación"}),e.jsx("th",{className:"py-2 px-4",children:"Fecha de última actualización"})]})}),e.jsx("tbody",{children:n.map((t,o)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-custom-gray-semiDark cursor-pointer",onClick:()=>m(t),children:[e.jsx("td",{className:"py-2 px-4",children:t.nombre}),e.jsx("td",{className:"py-2 px-4",children:t.parent_id}),e.jsx("td",{className:"py-2 px-4",children:t.updated_at})]},o))})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:n.map((t,o)=>e.jsxs("div",{className:"flex flex-col items-center border dark:bg-custom-blackSemi  p-4 rounded-3xl shadow-md hover:shadow-lg",onClick:()=>m(t),children:[t.previewUrl?e.jsx("img",{src:t.previewUrl,alt:t.nombre,className:"h-32 w-full object-cover rounded-md mb-2"}):e.jsx("div",{className:"h-32 w-full flex items-center justify-center bg-gray-200 dark:bg-custom-gray-darker rounded-md mb-2",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Sin vista previa"})}),e.jsx("p",{className:"text-sm font-medium text-center",children:t.nombre}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:t.parent_id})]},o))}):e.jsx("p",{className:"text-gray-500 text-center",children:i==="Mis Carpetas"?"No hay archivos recientes.":"Esta carpeta no contiene archivos."}),e.jsx(C,{show:l,onClose:()=>c(!1),onConfirmed:()=>{window.open("https://www.google.com","_blank")}})]})};function O({}){const[s,i]=a.useState("Mis Carpetas"),[F,d]=a.useState([]),[l,c]=a.useState([]),[N,x]=a.useState(!1),[m,u]=a.useState("list"),b=r=>{localStorage.setItem("recentFiles",JSON.stringify(r))},h=()=>{const r=localStorage.getItem("recentFiles");return r?JSON.parse(r):[]},w=r=>{d(p=>{const j=[r,...p.filter(f=>f.name!==r.name||f.location!==r.location)].slice(0,10);return b(j),j})};a.useEffect(()=>{const r=h();d(r)},[]);const g=()=>x(!0),n=()=>x(!1),t=r=>{const p=l.slice(0,r),j=l[r];c(p),i(j)},o=r=>{c([...l,s]),i(r)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between mb-6 ",children:[e.jsx(M,{folderStack:l,currentFolder:s,onBreadcrumbClick:t}),e.jsx("button",{onClick:g,className:"bg-orange-500 text-white px-4 rounded-md hover:bg-orange-600 ml-auto",children:"+ Nuevo"}),e.jsx(k,{show:N,onClose:n,children:e.jsx(v,{onClose:n})})]}),s!=="Mis Carpetas"&&e.jsx(B,{folderStack:l,setFolderStack:c,currentFolder:s,setCurrentFolder:i,handleBreadcrumbClick:t}),e.jsx(R,{folderStructure:y,currentFolder:s,openFolder:o}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:s.charAt(0).toUpperCase()+s.slice(1)}),e.jsx(_,{view:m,setView:u})]}),e.jsx(A,{recentFiles:F,currentFolder:s,view:m,addFileToRecentFiles:w})]})})}O.layout=s=>e.jsx(S,{children:s});export{O as default};
