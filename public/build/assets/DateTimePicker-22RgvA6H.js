import{r as l,j as s}from"./app-fwyInB3c.js";import{C as M}from"./react-icons.esm-DXl_FId9.js";import{c as H}from"./utils-CytzSlOG.js";import{B as f}from"./Button-CQuYVLGu.js";import{C as I}from"./calendar-DctTJhwg.js";import{P as E,a as P,b as z}from"./popover-DaRbHQOK.js";import{S as b,a as w}from"./scroll-area-CvQ1XCoU.js";import{f as U}from"./format-Be40hyfq.js";import{e as Y}from"./es-DNLwfvrq.js";const J=t=>t?t instanceof Date?t.toISOString():typeof t=="string"?t.endsWith("Z")?t:new Date(t).toISOString():null:null,K=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,R=t=>{if(!t)return null;try{if(t instanceof Date)return t.toISOString();if(typeof t=="string"){if(t.includes("T")&&t.endsWith("Z"))return t;if(t.includes("GMT")||t.includes("UTC")){const u=new Date(t);if(!isNaN(u.getTime()))return u.toISOString()}const a=new Date(t);if(!isNaN(a.getTime()))return a.toISOString()}return null}catch(a){return console.error("Error converting date to UTC:",a,t),null}};function A({value:t,onChange:a,placeholder:u="MM/DD/YYYY HH:mm",disabled:h=!1,minuteStep:d=5,format:k="MM/dd/yyyy HH:mm",className:v,minDate:g,maxDate:x,locale:p=Y,modal:y=!1}){const[N,D]=l.useState(t),[m,S]=l.useState(!1),r=t!==void 0?t:N,T=l.useMemo(()=>Array.from({length:24},(e,n)=>n),[]),C=l.useMemo(()=>Array.from({length:60/d},(e,n)=>n*d),[d]),c=l.useCallback(e=>{t===void 0&&D(e),a==null||a(e)},[t,a]),O=l.useCallback(e=>{if(e)if(r){const n=new Date(e);n.setHours(r.getHours(),r.getMinutes()),c(n)}else c(e)},[r,c]),j=l.useCallback((e,n)=>{const o=parseInt(n,10);if(!isNaN(o)&&!(e==="hour"&&(o<0||o>23))&&!(e==="minute"&&(o<0||o>59)))if(r){const i=new Date(r.getTime());e==="hour"?i.setHours(o):e==="minute"&&i.setMinutes(o),c(i)}else{const i=new Date;i.setSeconds(0,0),e==="hour"?i.setHours(o):e==="minute"&&i.setMinutes(o),c(i)}},[r,c]);return l.useEffect(()=>{const e=n=>{n.key==="Escape"&&m&&S(!1)};if(m)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[m]),s.jsxs(E,{open:m,onOpenChange:S,modal:y,children:[s.jsx(P,{asChild:!0,children:s.jsxs(f,{variant:"ghost",className:H("w-full justify-start text-left font-normal p-2 bg-custom-gray-default dark:bg-custom-blackSemi border-none text-gray-800 dark:text-gray-200 hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi",!r&&"text-gray-500 dark:text-gray-500",h&&"opacity-50 cursor-not-allowed",v),disabled:h,"aria-label":"Seleccionar fecha y hora","aria-expanded":m,"aria-haspopup":"dialog",children:[s.jsx(M,{className:"mr-2 h-4 w-4"}),r?U(r,k,{locale:p}):s.jsx("span",{children:u})]})}),s.jsx(z,{className:"w-auto p-0 bg-custom-white dark:bg-custom-blackLight border-custom-gray-light dark:border-custom-gray-darker",align:"start",children:s.jsxs("div",{className:"sm:flex",children:[s.jsx(I,{mode:"single",selected:r,onSelect:O,locale:p,disabled:e=>!!(g&&e<g||x&&e>x),initialFocus:!0}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:h-[300px] divide-y sm:divide-y-0 sm:divide-x",children:[s.jsxs(b,{className:"w-64 sm:w-auto",children:[s.jsxs("div",{className:"flex sm:flex-col p-2",children:[s.jsx("div",{className:"text-sm font-medium p-2 sm:hidden text-custom-blue dark:text-custom-white",children:"Horas"}),T.map(e=>s.jsx(f,{size:"icon",variant:r&&r.getHours()===e?"primary":"ghost",className:"sm:w-full shrink-0 aspect-square rounded-lg",onClick:()=>j("hour",e.toString()),"aria-label":`Seleccionar hora ${e.toString().padStart(2,"0")}`,children:s.jsx("span",{className:"text-sm",children:e.toString().padStart(2,"0")})},e))]}),s.jsx(w,{orientation:"horizontal",className:"sm:hidden"})]}),s.jsxs(b,{className:"w-64 sm:w-auto",children:[s.jsxs("div",{className:"flex sm:flex-col p-2",children:[s.jsx("div",{className:"text-sm font-medium p-2 sm:hidden text-custom-blue dark:text-custom-white",children:"Minutos"}),C.map(e=>s.jsx(f,{size:"icon",variant:r&&r.getMinutes()===e?"primary":"ghost",className:"sm:w-full shrink-0 aspect-square rounded-lg",onClick:()=>j("minute",e.toString()),"aria-label":`Seleccionar minuto ${e.toString().padStart(2,"0")}`,children:s.jsx("span",{className:"text-sm",children:e.toString().padStart(2,"0")})},e))]}),s.jsx(w,{orientation:"horizontal",className:"sm:hidden"})]})]})]})})]})}const V=A;export{V as D,A as a,J as b,R as c,K as g};
