import{r as a,j as e}from"./app-fwyInB3c.js";import{c as f}from"./utils-CytzSlOG.js";import{I as d}from"./LucideIcon-CEqEhMjI.js";import{B as S}from"./button-Blwr-A5N.js";import{C as v,f as k,b as E,c as I,d as O,e as P}from"./command-PoUoScut.js";import{P as A,a as L,b as B}from"./popover-DaRbHQOK.js";import{getEstadoSolicitud as M,STATUS_BADGE_COLORS as n}from"./INITIAL_PERMISOS-Ds5-PEcv.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-B7srb2QZ.js";import"./index-BIJodELy.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./dialog-iaZkf6Xy.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";const pe=({allEvents:m,onFilterChange:j,className:b,currentSelectedStatuses:i})=>{const[p,x]=a.useState(!1),[s,h]=a.useState(i||[]),[c,g]=a.useState("");a.useEffect(()=>{i&&h(i)},[i]);const u=a.useMemo(()=>{if(!m||m.length===0)return[];const r=new Map;return m.forEach(t=>{const o=M(t);r.has(o)?r.get(o).count++:r.set(o,{nombre:o,color:n[o]||n.default,count:1})}),Array.from(r.values()).sort((t,o)=>t.nombre.localeCompare(o.nombre))},[m]),w=a.useMemo(()=>c?u.filter(r=>r.nombre.toLowerCase().includes(c.toLowerCase())):u,[u,c]),C=r=>{h(t=>{const o=t.includes(r.nombre);let l;return o?l=t.filter(y=>y!==r.nombre):l=[...t,r.nombre],j(l),l})},N=r=>{switch(r){case"Aprobado":return"Check";case"Denegado":return"X";case"En revisión":return"Eye";case"Solicitado":return"Send";case"En proceso":return"Loader";case"Pendiente":return"Clock";case"Visto":return"Eye";default:return"HelpCircle"}};return e.jsxs(A,{open:p,onOpenChange:x,children:[e.jsx(L,{asChild:!0,children:e.jsxs(S,{variant:"outline",role:"combobox","aria-expanded":p,className:f("w-full md:w-auto justify-between rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",b),onClick:()=>x(!p),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{name:"Filter",className:"h-4 w-4 mr-2"}),s.length===0&&"Filtrar por estado",s.length===1&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${n[s[0]]||n.default}`}),e.jsx("span",{className:"text-sm",children:s[0]})]}),s.length>1&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${n[s[0]]||n.default}`}),e.jsx("span",{className:"text-sm",children:s[0]}),e.jsxs("span",{className:"text-xs ml-1 px-2 py-0.5 rounded-full bg-custom-gray-dark text-white",children:["+",s.length-1]})]})]}),e.jsx(d,{name:"ChevronsUpDown",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(B,{className:"min-w-[var(--radix-popover-trigger-width)] w-max p-0",align:"start",children:e.jsxs(v,{children:[e.jsx(k,{placeholder:"Buscar estado...",value:c,onValueChange:g,className:"h-9 rounded-t-md rounded-b-none"}),e.jsxs(E,{children:[e.jsx(I,{children:"Ningún estado encontrado."}),e.jsx(O,{children:w.map(r=>{const t=s.includes(r.nombre);return e.jsxs(P,{value:r.nombre,onSelect:()=>C(r),className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{name:"Check",className:f("mr-2 h-4 w-4",t?"opacity-100":"opacity-0")}),e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${r.color}`}),e.jsx(d,{name:N(r.nombre),className:"mr-2 h-4 w-4"}),e.jsx("span",{children:r.nombre})]}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-full",children:r.count})]},r.nombre)})})]})]})})]})};export{pe as default};
