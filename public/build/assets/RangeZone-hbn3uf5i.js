import{r,j as n}from"./app-fwyInB3c.js";import{I as g}from"./LucideIcon-CEqEhMjI.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";const K=r.createContext(),et=({children:M,setSheetTable:j,setDialog:k,setDeleteHorarios:R})=>{const l=r.useRef(null),[w,x]=r.useState([]),[c,h]=r.useState(new Set),[b,a]=r.useState(!1),[y,P]=r.useState({x:0,y:0}),[p,S]=r.useState(!1),[m,N]=r.useState({x:0,y:0}),[u,C]=r.useState({x:0,y:0}),[v,z]=r.useState(!1),B=r.useCallback(t=>{x(o=>{var e;if(!o.some(s=>s.value===t.value)){const s=(e=t.ref.current)==null?void 0:e.getBoundingClientRect();return[...o,{...t,rect:s}]}return o})},[]),E=r.useCallback(t=>{x(o=>o.filter(e=>e.value!==t))},[]),X=t=>c.has(t),D=t=>{h(o=>{const e=new Set(o);return e.has(t)?e.delete(t):e.add(t),e})},L=t=>{if(b||t.button!==0)return;const o=l.current.getBoundingClientRect(),e=t.clientX-o.left,s=t.clientY-o.top;N({x:e,y:s}),C({x:e,y:s}),S(!0),z(t.ctrlKey)},Y=t=>{if(!p)return;const o=l.current.getBoundingClientRect();C({x:t.clientX-o.left,y:t.clientY-o.top})},O=()=>{if(!p)return;S(!1);const t=I(),o=w.filter(({ref:e,value:s})=>{if(!e.current)return!1;const i=e.current.getBoundingClientRect(),d=l.current.getBoundingClientRect(),f={left:i.left-d.left,top:i.top-d.top,right:i.right-d.left,bottom:i.bottom-d.top};return t.left<f.right&&t.right>f.left&&t.top<f.bottom&&t.bottom>f.top});h(e=>{const s=new Set(v?[...e]:[]);for(const{value:i}of o)v&&s.has(i)?s.delete(i):s.add(i);return s})},U=t=>{t.preventDefault(),c.size>0&&(a(!0),P({x:t.clientX,y:t.clientY}))},I=()=>{const t=Math.min(m.x,u.x),o=Math.max(m.x,u.x),e=Math.min(m.y,u.y),s=Math.max(m.y,u.y);return{left:t,right:o,top:e,bottom:s}},q=()=>{const t=I();return{position:"absolute",left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top,backgroundColor:"rgba(255, 165, 0, 0.2)",border:"1px dashed #f0a92e",pointerEvents:"none",zIndex:100}};return n.jsx(K.Provider,{value:{registerItem:B,unregisterItem:E,isItemSelected:X,toggleSingleItem:D},children:n.jsxs("div",{ref:l,className:"relative w-full h-full select-none",onMouseDown:L,onMouseMove:Y,onMouseUp:O,onContextMenu:U,children:[p&&n.jsx("div",{style:q()}),M,b&&n.jsx("section",{className:"fixed inset-0 z-20",onClick:()=>a(!1),children:n.jsxs("div",{onClick:t=>t.stopPropagation(),className:"absolute flex flex-col w-40 p-1 gap-1 border border-custom-gray-semiLight dark:border-custom-blackSemi bg-custom-gray-default dark:bg-custom-blackSemi rounded-md shadow-md",style:{left:y.x,top:y.y},children:[c.size===1&&[...c].at(0).horarioId&&n.jsxs("button",{className:"flex items-center gap-2 hover:bg-custom-gray-semiLight dark:hover:bg-custom-gray-darker px-2 py-1 rounded-sm",onClick:()=>{j([...c][0].horarioId),a(!1)},children:[n.jsx(g,{name:"Info",className:"w-4 mr-2"}),n.jsx("span",{children:"InformaciÃ³n"})]}),n.jsxs("button",{className:"flex items-center gap-2 hover:bg-custom-gray-semiLight dark:hover:bg-custom-gray-darker px-2 py-1 rounded-sm",onClick:()=>{k([...c]),a(!1)},children:[n.jsx(g,{name:"SquarePen",className:"w-4 mr-2"}),n.jsx("span",{children:"Editar"})]}),c.size>0&&[...c].some(t=>t==null?void 0:t.horarioId)&&n.jsxs("button",{className:"flex items-center gap-2 text-red-500 hover:bg-red-500/40 px-2 py-1 rounded-sm",onClick:()=>{R([...c].filter(t=>t==null?void 0:t.horarioId).map(t=>t.horarioId)),a(!1)},children:[n.jsx(g,{name:"X",className:"w-4 mr-2"}),n.jsx("span",{children:"Eliminar"})]})]})})]})})};export{K as RangeContext,et as RangeZone};
