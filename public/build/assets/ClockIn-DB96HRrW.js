import{X as Y,r as o,j as t,S as Z,A as tt}from"./app-fwyInB3c.js";import{A as M,a as $,b as A,c as T,d as E,e as P,f as O}from"./alert-dialog-kDfn0La3.js";import{P as w}from"./PrimaryButton-SsXyLm2e.js";import{I as b}from"./LucideIcon-CEqEhMjI.js";import{u as et}from"./useTranslation-BtIkv0Na.js";import"./index-p2DxCSsL.js";import"./index-DloWbRVd.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-B7srb2QZ.js";import"./index-BIJodELy.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./utils-CytzSlOG.js";import"./button-Blwr-A5N.js";import"./index-BwobEAja.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";function Mt(){const{t:n}=et("welcome"),{user:i}=Y().props.auth,[x,v]=o.useState(!1),[d,y]=o.useState(0),[S,C]=o.useState(null),[r,L]=o.useState(1),[g,k]=o.useState([{fecha:"2024-01-01",entrada:"09:00",salida:"18:00",notas:"",totalHoras:"09:00",horarioLaboral:"09:00 - 18:00"},{fecha:"2024-01-02",entrada:"09:18",salida:"18:00",notas:"",totalHoras:"09:00",horarioLaboral:"09:00 - 18:00"}]),m=6,[R,j]=o.useState(!1),[u,D]=o.useState({index:null,value:""}),[_,I]=o.useState(!1),h={start:"09:00",end:"17:00"};o.useEffect(()=>{let e;return x&&(e=setInterval(()=>{const s=new Date().getTime(),a=Math.floor((s-S)/1e3);y(a)},1e3)),()=>clearInterval(e)},[x,S]);const N=e=>{const s=Math.floor(e/3600),a=Math.floor(e%3600/60),l=e%60;return`${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`},q=()=>new Date().toISOString().split("T")[0],H=()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},F=e=>{const[s,a]=h.start.split(":").map(Number),[l,c]=e.split(":").map(Number),p=s*60+a;return l*60+c-p>10},U=()=>{if(!x){const e=q(),s=H(),a=F(s),l={fecha:e,entrada:s,salida:"--:--",notas:"",totalHoras:"--:--",horarioLaboral:`${h.start} - ${h.end}`,isLate:a};k(c=>[l,...c]),C(new Date().getTime()),v(!0)}};o.useEffect(()=>{U()},[]);const z=()=>{I(!0)},B=()=>{if(x&&g.length>0){const e=H(),s=Math.floor(d/3600),a=Math.floor(d%3600/60),l=`${String(s).padStart(2,"0")}:${String(a).padStart(2,"0")}`;k(c=>{const p=[...c];return p[0]={...p[0],salida:e,totalHoras:l,horarioLaboral:`${h.start} - ${h.end}`},p}),v(!1),y(0),C(null),tt.visit("/login-tablet")}},G=()=>{const a=8-d/3600,l=Math.floor(a),c=Math.floor((a-l)*60);return`${l.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},f=Math.ceil(g.length/m),V=()=>{const e=(r-1)*m,s=e+m;return g.slice(e,s)},W=()=>{r<f&&L(e=>e+1)},X=()=>{r>1&&L(e=>e-1)},J=(e,s)=>{D({index:e,value:s}),j(!0)},K=()=>{k(e=>{const s=[...e],a=(r-1)*m+u.index;return s[a]={...s[a],notas:u.value},s}),j(!1)},Q=()=>i.profile_photo_url?t.jsx("img",{src:i.profile_photo_url,alt:i.name,className:"w-16 h-16 rounded-full object-cover border-2 border-custom-gray-light dark:border-custom-gray-darker"}):t.jsx("div",{className:`w-16 h-16 rounded-full bg-custom-gray dark:bg-custom-blackLight 
                          flex items-center justify-center text-2xl font-bold border-2 
                          border-custom-gray-light dark:border-custom-gray-darker
                          text-custom-blackLight dark:text-custom-white`,children:i.name.charAt(0).toUpperCase()});return t.jsxs("div",{className:"bg-custom-white dark:bg-custom-blackSemi min-h-screen",children:[t.jsx(Z,{title:"Clock In"}),t.jsxs("div",{className:"flex flex-col justify-center w-full p-4 lg:p-8 space-y-4 lg:space-y-8",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4 lg:gap-8",children:[t.jsxs("div",{className:"w-full lg:w-1/2",children:[t.jsx("h2",{className:"text-xl lg:text-2xl font-bold mb-4 text-custom-blackLight dark:text-custom-white",children:n("ClockIn.myClockIns")}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Q,{}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("p",{className:"text-sm lg:text-base font-medium text-custom-blackLight dark:text-custom-white",children:i.name}),t.jsx("p",{className:"text-xs lg:text-sm text-custom-gray-dark dark:text-custom-gray-light",children:i.email})]})]})]}),t.jsx("div",{className:"w-full lg:w-1/2 flex flex-col lg:items-end gap-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x&&t.jsx("div",{className:"w-full sm:w-auto px-6 py-3 bg-custom-gray dark:bg-custom-blackSemi rounded-xl text-center",children:t.jsx("p",{className:"text-lg lg:text-xl font-bold text-custom-orange",children:N(d)})}),t.jsxs(w,{onClick:z,className:"w-full sm:w-auto bg-red-500 hover:bg-red-600 justify-center",children:[n("ClockIn.clockOut"),t.jsx(b,{name:"ChevronRight",className:"w-4 h-4"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"flex flex-col p-4 bg-custom-gray-default dark:bg-custom-blackLight rounded-lg",children:[t.jsx("p",{className:"text-base lg:text-lg font-bold text-custom-orange",children:n("ClockIn.workedHours")}),t.jsx("p",{className:"text-xl lg:text-2xl",children:N(d)})]}),t.jsxs("div",{className:"flex flex-col p-4 bg-custom-gray-default dark:bg-custom-blackLight rounded-lg",children:[t.jsx("p",{className:"text-base lg:text-lg font-bold text-custom-orange",children:n("ClockIn.weeklyHours")}),t.jsx("p",{className:"text-xl lg:text-2xl",children:"40:00"})]}),t.jsxs("div",{className:"flex flex-col p-4 bg-custom-gray-default dark:bg-custom-blackLight rounded-lg",children:[t.jsx("p",{className:"text-base lg:text-lg font-bold text-custom-orange",children:n("ClockIn.averageHoursPerDay")}),t.jsx("p",{className:"text-xl lg:text-2xl",children:"8:00"})]}),t.jsxs("div",{className:"flex flex-col p-4 bg-custom-gray-default dark:bg-custom-blackLight rounded-lg",children:[t.jsx("p",{className:"text-base lg:text-lg font-bold text-custom-orange",children:n("ClockIn.hoursRemaining")}),t.jsx("p",{className:"text-xl lg:text-2xl",children:G()})]})]}),t.jsx("div",{className:"w-full overflow-hidden rounded-lg bg-custom-white dark:bg-custom-blackSemi shadow",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("div",{className:"min-w-[800px] p-4",children:[t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-bold text-custom-orange uppercase tracking-wider",children:"Fecha"}),t.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-bold text-custom-orange uppercase tracking-wider",children:"Entrada"}),t.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-bold text-custom-orange uppercase tracking-wider",children:"Salida"}),t.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-bold text-custom-orange uppercase tracking-wider",children:"Notas"}),t.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-bold text-custom-orange uppercase tracking-wider",children:"Total Horas"}),t.jsx("th",{className:"px-4 lg:px-6 py-3 text-left text-xs font-bold text-custom-orange uppercase tracking-wider",children:"Horario Laboral"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:V().map((e,s)=>t.jsxs("tr",{className:"hover:bg-custom-gray dark:hover:bg-custom-blackSemi",children:[t.jsx("td",{className:"px-4 lg:px-6 py-3 whitespace-nowrap text-xs lg:text-sm",children:e.fecha}),t.jsxs("td",{className:`px-4 lg:px-6 py-3 whitespace-nowrap text-xs lg:text-sm ${e.isLate?"text-red-500 dark:text-red-400 font-medium":""}`,children:[e.entrada,e.isLate&&t.jsx("span",{className:"ml-2 text-xs bg-red-100 dark:bg-red-900/30 text-red-500 dark:text-red-400 px-2 py-1 rounded-full",children:"Retraso"})]}),t.jsx("td",{className:"px-4 lg:px-6 py-3 whitespace-nowrap text-xs lg:text-sm",children:e.salida}),t.jsx("td",{className:"px-4 lg:px-6 py-3 whitespace-nowrap text-xs lg:text-sm",children:t.jsxs("div",{onClick:()=>J(s,e.notas),className:"cursor-pointer flex items-center gap-2 hover:text-custom-orange",children:[t.jsx(b,{name:"CircleAlert",className:"w-4 h-4"}),e.notas?"Ver/Editar nota":"Añadir nota"]})}),t.jsx("td",{className:"px-4 lg:px-6 py-3 whitespace-nowrap text-xs lg:text-sm",children:e.totalHoras}),t.jsx("td",{className:"px-4 lg:px-6 py-3 whitespace-nowrap text-xs lg:text-sm",children:e.horarioLaboral})]},s))})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-4 gap-4",children:[t.jsxs("div",{className:"text-xs lg:text-sm text-center sm:text-left",children:["Mostrando ",(r-1)*m+1," a ",Math.min(r*m,g.length)," de ",g.length," entradas"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:X,disabled:r===1,className:`p-2 rounded-lg transition-colors
                                            ${r===1?"text-custom-gray-dark dark:text-custom-gray-light cursor-not-allowed":"text-custom-orange hover:bg-custom-gray dark:hover:bg-custom-blackSemi"}`,children:t.jsx(b,{name:"ChevronLeft",className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm text-custom-blackLight dark:text-custom-white",children:["Página ",r," de ",f]}),t.jsx("button",{onClick:W,disabled:r===f,className:`p-2 rounded-lg transition-colors
                                            ${r===f?"text-custom-gray-dark dark:text-custom-gray-light cursor-not-allowed":"text-custom-orange hover:bg-custom-gray dark:hover:bg-custom-blackSemi"}`,children:t.jsx(b,{name:"ChevronRight",className:"w-5 h-5"})})]})]})]})})}),t.jsx(M,{open:R,onOpenChange:j,children:t.jsxs($,{className:"bg-custom-white dark:bg-custom-blackSemi w-[90vw] sm:w-full max-w-lg mx-auto",children:[t.jsxs(A,{children:[t.jsx(T,{className:"text-custom-blackLight dark:text-custom-white",children:u.value?"Editar nota":"Añadir nota"}),t.jsx(E,{children:t.jsx("textarea",{value:u.value,onChange:e=>D({...u,value:e.target.value}),className:`w-full h-32 p-2 mt-2 bg-custom-gray dark:bg-custom-blackLight rounded-lg 
                                             text-custom-blackLight dark:text-custom-white resize-none
                                             border border-custom-gray-light dark:border-custom-gray-darker
                                             focus:outline-none focus:border-custom-orange`,placeholder:"Escribe tu nota aquí..."})})]}),t.jsxs(P,{children:[t.jsx(O,{className:`bg-custom-gray-light hover:bg-custom-gray-semiLight text-custom-blackLight 
                                         dark:bg-custom-gray-darker dark:hover:bg-custom-gray-semiDark dark:text-custom-gray-light`,children:"Cancelar"}),t.jsx(w,{onClick:K,children:"Guardar"})]})]})}),t.jsx(M,{open:_,onOpenChange:I,children:t.jsxs($,{className:"bg-custom-white dark:bg-custom-blackSemi",children:[t.jsxs(A,{children:[t.jsx(T,{className:"text-custom-blackLight dark:text-custom-white",children:"Confirmar salida"}),t.jsxs(E,{className:"text-custom-gray-dark dark:text-custom-gray-light",children:["¿Estás seguro de que deseas registrar tu salida?",t.jsx("div",{className:"mt-2 p-4 bg-custom-gray dark:bg-custom-blackLight rounded-lg",children:t.jsxs("p",{className:"text-custom-orange font-medium",children:["Tiempo trabajado: ",N(d)]})})]})]}),t.jsxs(P,{children:[t.jsx(O,{className:`bg-custom-gray-light hover:bg-custom-gray-semiLight text-custom-blackLight 
                                         dark:bg-custom-gray-darker dark:hover:bg-custom-gray-semiDark dark:text-custom-gray-light`,children:"Cancelar"}),t.jsx(w,{onClick:B,className:"bg-red-500 hover:bg-red-600",children:"Confirmar salida"})]})]})})]})]})}export{Mt as default};
