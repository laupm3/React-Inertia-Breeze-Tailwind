import{r as c,j as e,c as ye,a as X,R as te,X as Ne,A as Se}from"./app-fwyInB3c.js";import{B as U}from"./Button-CQuYVLGu.js";import{T as D}from"./TextInput-B-VFdlBC.js";import{E as Ce,V as Ae}from"./Yoopta-Dj4Guze5.js";import{P as ee}from"./Pill-l4GaXyto.js";import{c as Ee}from"./utils-CytzSlOG.js";import{e as ve,C as Fe,f as Re,b as Me,c as _e,d as $e}from"./command-PoUoScut.js";import{P as re,a as se,b as oe}from"./popover-DaRbHQOK.js";import{I as A}from"./LucideIcon-CEqEhMjI.js";import{u as Le}from"./useTranslation-BtIkv0Na.js";import"./Create-tmHr2JLD.js";import{T as Ue,I as Pe,D as Te}from"./InputSkeleton-CFMfUb-2.js";import{u as Y,D as Oe}from"./DataTableContext-BYrqyX0i.js";import{A as ae}from"./AdvancedHeader-CpvwMmYr.js";import{r as He}from"./RowActionsColumn-CM2slffX.js";import{G as Be}from"./GlobalFilter-DNA5td8x.js";import{A as B,a as I,b as V}from"./avatar-oBOSifLN.js";import{T as z,a as q,b as G,c as J}from"./tooltip-DFfoxvAF.js";import{C as P}from"./ColumnFilter-oxYUebdb.js";import{D as ne,a as le,b as ie,c as T}from"./dropdown-menu-bHoOJ61X.js";import{r as Ie}from"./RowCheckedColumn-BShQ1j9z.js";import{a as ce,b as Ve}from"./eventDateUtils-BP43QzoI.js";import{b as ze}from"./react-icons.esm-DXl_FId9.js";import{D as qe}from"./DecisionModal-Dl8siGBG.js";const W=c.forwardRef(({open:o,onOpenChange:s,children:t,eventDate:i,...l},a)=>{const[n,r]=c.useState(!1),d=c.useRef(null);return c.useImperativeHandle(a,()=>({focus:()=>{var u;return(u=d.current)==null?void 0:u.focus()}})),c.useEffect(()=>(r(!0),()=>r(!1)),[]),c.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>document.body.style.overflow="unset"),[o]),n?ye.createPortal(o?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 dark:bg-black/80",children:e.jsxs("div",{ref:d,className:"bg-custom-white dark:bg-custom-blackLight rounded-lg shadow-lg w-6/12 h-screen min-w-[90vw] md:min-w-[40vw] max-h-[90vh]",style:{zIndex:50},...l,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-custom-gray-default dark:border-custom-blackSemi",children:[e.jsx("h2",{className:"text-lg font-semibold text-custom-blue dark:text-custom-white",children:l.title||"Nuevo Evento"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-lg font-bold text-custom-orange",children:i||new Date().toLocaleDateString()}),e.jsx("button",{onClick:()=>s(!1),className:"rounded-full p-1 hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi",children:e.jsx(ze,{className:"h-5 w-5 text-custom-blackLight dark:text-custom-white"})})]})]}),e.jsx(Q,{children:t})]})}):null,document.body):null});W.displayName="CustomDialog";const Q=({children:o,className:s=""})=>e.jsx("div",{className:`p-4 pt-0 ${s}`,children:o}),Ge=({children:o,className:s=""})=>e.jsx("div",{className:`flex justify-end p-2 border-t border-custom-gray-default dark:border-custom-blackSemi ${s}`,children:o});function Je({prevEntityId:o,entityType:s,fetchUrl:t,className:i,onSelect:l}){const[a,n]=c.useState(!1),[r,d]=c.useState(null),[u,m]=c.useState([]),[b,g]=c.useState(null),[y,C]=c.useState(!0),{t:w}=Le("datatable"),j=()=>{switch(s){case"Equipo":return"Equipo";case"Empresa":return"Empresa";case"Departamento":return"Departamento";default:return"Entidad"}},N=c.useCallback(x=>{l&&l(x)},[l]);c.useEffect(()=>{if(o){const x=u.find(k=>k.id===o);x&&d(x)}else d(null)},[o,u]),c.useEffect(()=>{(async()=>{try{if(C(!0),g(null),!t){C(!1);return}const k=await X.get(route(t));if(k.status===200){let f=[];if(s==="Equipo")f=k.data.teams||[];else if(s==="Empresa")f=k.data.empresas||[];else if(s==="Departamento")f=k.data.departments||[];else{const S=["data",s.toLowerCase()+"s","items","results"];for(const E of S)if(k.data[E]){f=k.data[E];break}!f.length&&Array.isArray(k.data)&&(f=k.data)}m(f)}else g(!0)}catch(k){console.error("Error fetching entities:",k),g(!0)}finally{C(!1)}})()},[t,s]);const p=c.useMemo(()=>u.map(x=>e.jsxs(ve,{value:x.id.toString(),onSelect:()=>{x.id===(r==null?void 0:r.id)?d(null):d(x),n(!1),N(x)},className:"hover:bg-custom-gray-light dark:hover:bg-custom-blackMedium cursor-pointer transition-colors",children:[e.jsx(A,{name:"Check",className:Ee("mr-2 h-4 w-4 text-custom-gray-darker dark:text-custom-white",(r==null?void 0:r.id)===x.id?"opacity-100":"opacity-0")}),e.jsx("span",{className:"text-custom-blackLight dark:text-custom-white text-sm",children:x.nombre||x.name})]},x.id)),[u,r,N]);return e.jsxs(re,{open:a,onOpenChange:n,modal:!0,children:[e.jsx(se,{asChild:!0,children:e.jsxs("button",{role:"combobox","aria-expanded":a,className:`w-full justify-between rounded-full bg-custom-gray-default dark:bg-custom-blackSemi text-custom-blackLight dark:text-custom-white hover:bg-custom-gray-light dark:hover:bg-custom-blackMedium transition-colors ${i} text-sm flex px-4 py-2 h-10 items-center cursor-default focus:outline-none focus:ring-2 focus:ring-transparent`,onClick:()=>n(!a),children:[r?e.jsx("span",{className:"truncate",children:r.nombre||r.name}):e.jsxs("span",{className:"text-gray-500",children:["Selecciona ",j()]}),e.jsx(A,{name:"ChevronDown",className:"ml-2 h-4 w-4 shrink-0 opacity-70 transition-transform duration-200"})]})}),e.jsx(oe,{className:"w-full p-2 bg-white dark:bg-custom-blackSemi border border-gray-300 dark:border-gray-600 shadow-xl",children:e.jsxs(Fe,{children:[e.jsx(Re,{className:"rounded-full text-custom-blackLight dark:text-custom-white bg-custom-gray-default dark:bg-custom-blackMedium placeholder:text-gray-500 focus:outline-none focus:ring-transparent active:ring-transparent focus:border-transparent mb-2",placeholder:`Buscar ${j().toLowerCase()}...`}),e.jsxs(Me,{children:[e.jsx(_e,{children:b?e.jsx("span",{className:"text-red-500 text-sm",children:"Error al cargar los datos."}):e.jsxs("span",{className:"text-gray-500 text-sm",children:["Ningún ",j().toLowerCase()," encontrado"]})}),e.jsx($e,{children:y?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(A,{name:"Loader",className:"h-5 w-5 animate-spin text-gray-500"})}):p})]})]})})]})}function Xe({selectedEventType:o,setSelectedEventType:s,eventTypes:t,onEntitySelect:i,initialEntity:l}){var x,k;const[a,n]=c.useState(l||null),[r,d]=c.useState(null),[u,m]=c.useState(!1),b=c.useRef(null);c.useEffect(()=>{const f=S=>{b.current&&!b.current.contains(S.target)&&m(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),c.useEffect(()=>{if(o){const f=t.find(S=>S.id===o);d(f)}else d(null)},[o,t]),c.useEffect(()=>{l&&n(l)},[l]);const g=f=>["Equipo","Empresa","Departamento"].includes(f),y=f=>{switch(f){case"Equipo":return"api.v1.user.eventos.teams";case"Empresa":return"api.v1.user.eventos.empresas";case"Departamento":return"api.v1.user.eventos.departamentos";default:return null}},C=f=>{n(f),i&&i(f)},j=(()=>{const f={};return t.forEach(S=>{const E=S.color,F=`color-${S.id}`;if(!document.getElementById(`style-${S.id}`)){const $=document.createElement("style");$.id=`style-${S.id}`,$.innerHTML=`
                    .${F}-point { background-color: ${E}; }
                    .${F}-bg { background-color: ${E}30; }
                    .${F}-text { color: ${E}; }
                    .${F}-border { border-color: ${E}; }
                `,document.head.appendChild($)}f[S.nombre]={point:`${F}-point`,bg:`${F}-bg`,text:`${F}-text`,border:`${F}-border`}}),f})(),N=f=>{s(f),m(!1);const S=t.find(E=>E.id===f);g(S==null?void 0:S.nombre)||(n(null),i&&i(null))},p=()=>t.find(f=>f.id===o);return e.jsxs("div",{className:"space-y-3 w-full",children:[o===null&&e.jsx("p",{className:"text-red-500 text-xs",children:"* Selecciona un tipo de evento"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[e.jsxs("div",{className:"relative flex-1",ref:b,children:[e.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-full bg-custom-gray-default dark:bg-custom-blackSemi text-custom-blackLight dark:text-custom-white border-transparent focus:border-none focus:outline-none flex justify-between items-center hover:bg-custom-gray-light dark:hover:bg-custom-blackMedium transition-colors h-10",onClick:()=>m(!u),children:o?e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(ee,{identifier:(x=p())==null?void 0:x.nombre,mapColor:j,className:"text-xs px-2 py-1",children:(k=p())==null?void 0:k.nombre}),e.jsx(A,{name:"ChevronDown",className:`h-4 w-4 transition-transform duration-200 ${u?"rotate-180":""}`})]}):e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Selecciona un tipo de evento"}),e.jsx(A,{name:"ChevronDown",className:`h-4 w-4 transition-transform duration-200 ${u?"rotate-180":""}`})]})}),u&&e.jsx("div",{className:"absolute z-20 mt-2 w-wrap rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-custom-blackSemi shadow-xl overflow-hidden",children:e.jsx("div",{className:"py-2 px-2 space-y-2",children:t.map(f=>{var S,E;return e.jsx("div",{className:"transition-all duration-200 cursor-pointer",onClick:()=>N(f.id),children:e.jsx(ee,{identifier:f.nombre,mapColor:j,className:`text-sm border-2 transition-all duration-200 ${o===f.id?`${(S=j[f.nombre])==null?void 0:S.border}`:`border-transparent hover:${(E=j[f.nombre])==null?void 0:E.border}`}`,children:e.jsx("span",{className:"flex items-center justify-center",children:f.nombre})})},f.id)})})})]}),r&&g(r.nombre)&&e.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-nowrap whitespace-nowrap",children:[r.nombre,":"]}),e.jsx(Je,{entityType:r.nombre,fetchUrl:y(r.nombre),prevEntityId:a==null?void 0:a.id,className:"w-full",onSelect:C})]})]})]})}const O={DEFAULT_CACHE_DURATION:5*60*1e3,CLEANUP_INTERVAL:5*60*1e3,MAX_UNUSED_AGE:30*60*1e3,FETCH_DEBOUNCE:1e3},M={};let L=null;function Ye(){const o=new Date;let s=0;Object.entries(M).forEach(([t,i])=>{i.subscribers.size===0&&i.lastAccessed&&o-i.lastAccessed>O.MAX_UNUSED_AGE&&(delete M[t],s++)}),s>0&&console.debug(`Cache cleanup: removed ${s} unused entries`),Object.keys(M).length===0&&L&&(clearInterval(L),L=null)}function We(){L||(L=setInterval(Ye,O.CLEANUP_INTERVAL))}const de=c.createContext(null);function Z(){const o=c.useContext(de);if(!o)throw new Error("useDataHandler debe usarse dentro de DataHandlerContextProvider");return o}function Qe(o,s,t,i,l,a){return{data:[],loading:!1,error:null,subscribers:new Set,lastFetched:null,lastFetchAttempt:null,lastAccessed:new Date,cacheDuration:a,updateAccessTime(){this.lastAccessed=new Date},isFresh(){return this.updateAccessTime(),this.lastFetched&&new Date-this.lastFetched<this.cacheDuration},notify(){const n={data:this.data,loading:this.loading,error:this.error};this.subscribers.forEach(r=>r(n))},async fetchData(n=!1){if(this.updateAccessTime(),this.loading&&!n)return;const r=new Date;if(!(!n&&this.lastFetchAttempt&&r-this.lastFetchAttempt<O.FETCH_DEBOUNCE)){this.lastFetchAttempt=r,this.loading=!0,this.error=null,this.notify();try{if(!s)throw new Error("URL no definida");const d=await X.get(s);if(d.status===200){let u;t?(u=d.data[t],u===void 0&&(u=[])):u=d.data,Array.isArray(u)||(u=u?[u]:[]);try{const m=i(u);this.data=Array.isArray(m)?m:m?[m]:[]}catch{this.data=u,this.error="Error al transformar datos"}this.lastFetched=new Date}else this.data=[],this.error=`Error de respuesta: ${d.status}`}catch(d){this.data=[],this.error=d.message||"Error desconocido"}finally{this.loading=!1,this.notify()}}},invalidateCache(){return this.updateAccessTime(),this.lastFetched=null,this.fetchData(!0)},updateData(n){this.updateAccessTime();const r=i([n])[0],d=l(r);this.data.some(m=>l(m)===d)?this.data=[r,...this.data.filter(m=>l(m)!==d)]:this.data=[r,...this.data],this.lastFetched=new Date,this.notify(),Ke()},addItem(n){this.updateAccessTime();const r=i([n])[0];this.data=[r,...this.data],this.lastFetched=new Date,this.notify()},updateBulk(n){if(!(n!=null&&n.length))return;this.updateAccessTime();const r=i(n),d=new Map(this.data.map(u=>[l(u),u]));r.forEach(u=>d.set(l(u),u)),this.data=Array.from(d.values()),this.lastFetched=new Date,this.notify()}}}function Ze({children:o,fetchUrl:s,dataKey:t,transformData:i=n=>n,getItemId:l=n=>n==null?void 0:n.id,cacheDuration:a=O.DEFAULT_CACHE_DURATION}){c.useMemo(We,[]);const n=c.useMemo(()=>{var g;return`${((g=s==null?void 0:s.replace)==null?void 0:g.call(s,/\/$/,""))||"unknown"}::${t||""}::${a}`},[s,t,a]);M[n]||(M[n]=Qe(n,s,t,i,l,a));const r=M[n];r.updateAccessTime();const[d,u]=c.useState({data:r.data||[],loading:r.loading||!1,error:r.error||null});c.useEffect(()=>{const b=y=>u(y);return r.subscribers.add(b),u({data:r.data,loading:r.loading,error:r.error}),!r.loading&&(r.data.length===0||!r.lastFetched||!r.isFresh())&&r.fetchData(),()=>{r.subscribers.delete(b),r.subscribers.size===0&&r.updateAccessTime()}},[n]);const m=c.useMemo(()=>({data:d.data,loading:d.loading,error:d.error,fetchData:r.fetchData.bind(r),updateData:r.updateData.bind(r),addItem:r.addItem.bind(r),updateBulk:r.updateBulk.bind(r),invalidateCache:r.invalidateCache.bind(r),isFresh:r.isFresh.bind(r),getItemId:l}),[d,r,l]);return e.jsx(de.Provider,{value:m,children:o})}function Ke(o=null){if(o){const s=M[o];s?console.log(`Cache entry for ${o}:`,{data:s.data.length,loading:s.loading,error:s.error,subscribers:s.subscribers.size,lastFetched:s.lastFetched,lastAccessed:s.lastAccessed}):console.log(`No cache entry found for ${o}`);return}console.log(`Total cache entries: ${Object.keys(M).length}`),Object.entries(M).forEach(([s,t])=>{console.log(`${s}:`,{data:t.data.length,loading:t.loading,error:t.error,subscribers:t.subscribers.size,lastFetched:t.lastFetched,lastAccessed:t.lastAccessed})})}function De(){const{sheetView:o,handleSheetView:s,enableSheetTableView:t,SheetTableViewComponent:i}=K(),{open:l,model:a}=o;return!a||!t?null:e.jsx(i,{model:a,open:l,onOpenChange:()=>s(a)})}const ue=c.createContext(null),et=({children:o,enableCreateUpdateView:s=!1,enableSheetTableView:t=!1,CreateUpdateViewComponent:i=null,SheetTableViewComponent:l=null})=>{const[a,n]=c.useState({open:!1,model:null}),[r,d]=c.useState({open:!1,model:null}),u=g=>{n(y=>({open:!y.open,model:b(g)}))},m=g=>{d(y=>({open:!y.open,model:b(g)}))},b=g=>(g==null?void 0:g.id)??g??null;return e.jsx(ue.Provider,{value:{createUpdateView:a,setCreateUpdateView:n,sheetView:r,setSheetView:d,handleCreateUpdateView:u,handleSheetView:m,enableCreateUpdateView:s,enableSheetTableView:t,CreateUpdateViewComponent:i,SheetTableViewComponent:l},children:o})};function K(){const o=c.useContext(ue);if(!o)throw new Error("useView debe usarse dentro de ViewContextProvider");return o}function tt(){const{createUpdateView:o,handleCreateUpdateView:s,enableCreateUpdateView:t,CreateUpdateViewComponent:i}=K(),{updateData:l}=Z(),{open:a,model:n}=o;return t?e.jsx(i,{model:n,open:a,onOpenChange:()=>s(n),onSaveData:l}):null}function rt({}){const{viewContext:o}=Y()||{},s=(o==null?void 0:o.handleCreateUpdateView)!==void 0,t=c.useCallback(()=>{s&&o.handleCreateUpdateView(null)},[s,o]);return e.jsxs(U,{onClick:t,variant:"ghost",className:"text-custom-blackSemi font-normal flex gap-2 w-full items-center justify-start text-start dark:hover:text-custom-gray-light dark:text-custom-gray rounded-md hover:bg-custom-gray-semiLight px-1",children:[e.jsx(A,{name:"Plus",className:"w-5","aria-hidden":"true"}),e.jsx("span",{className:"sm:inline text-sm",children:"Añadir registro"})]})}const st=c.memo(rt),me=c.createContext(null),ot=({children:o,defaultValue:s=null,onChangeValue:t=()=>{},renderSelection:i=null,placeholder:l="Selecciona opciones",getItemId:a})=>{const[n,r]=c.useState({value:[],rowSelection:{}}),d=c.useRef(!1),u=c.useRef(null),m=c.useRef(!1),b=c.useRef(s),{data:g}=Z(),y=c.useCallback(w=>{if(m.current)return!1;m.current=!0,d.current=!0;try{const j=typeof w=="function"?w(n.rowSelection):w,p=Object.keys(j).filter(x=>j[x]).map(x=>g.find(k=>String(a(k))===String(x))).filter(Boolean);return r({value:p,rowSelection:j}),!0}finally{m.current=!1}},[g,a,n.rowSelection]);c.useEffect(()=>{if(!g||g.length===0||m.current||b.current===s&&n.value)return;if(s==null){d.current||r({value:[],rowSelection:{}});return}const w=Array.isArray(s)?s:[s],j=n.value.map(p=>String(a(p))).sort(),N=w.map(p=>String(p)).sort();if(j.length===N.length&&j.every((p,x)=>p===N[x])){b.current=s;return}m.current=!0;try{b.current!==s&&(d.current=!1),b.current=s;const p=w.map(x=>g.find(k=>String(a(k))===String(x))).filter(Boolean);if(p.length>0){const x={};p.forEach(k=>{const f=a(k);x[f]=!0}),r({value:p,rowSelection:x})}}finally{m.current=!1}},[g,s,a]),c.useEffect(()=>{if(!m.current)if(n.value&&n.value.length>0){const w=n.value.map(j=>a(j));d.current&&(u.current=w.join(","),t(w))}else d.current&&u.current!==null&&(u.current=null,t([]))},[n.value,t,a]);const C={selection:n,setSelection:r,handleRowSelectionChange:y,renderSelection:i,placeholder:l,getItemId:a,resetSelection:c.useCallback(()=>{d.current=!1,r({value:[],rowSelection:{}})},[]),forceSelection:c.useCallback(w=>{if(!w)return;const j=Array.isArray(w)?w:[w];m.current=!0;try{const N={};j.forEach(p=>{const x=a(p);N[x]=!0}),r({value:j,rowSelection:N}),u.current=j.map(p=>a(p)).join(",")}finally{m.current=!1}},[a])};return e.jsx(me.Provider,{value:C,children:o})};function fe(){const o=c.useContext(me);if(!o)throw new Error("useAdvanceMultiselect debe usarse dentro de AdvanceMultiselectContextProvider");return o}const he=c.forwardRef((o,s)=>{const{selection:t,placeholder:i,renderSelection:l}=fe(),{value:a}=t,n=r=>{if(!r||r.length===0)return i;if(r.length===1){const d=r[0];return typeof d=="string"?d:(d==null?void 0:d.nombre)||(d==null?void 0:d.name)||(d==null?void 0:d.title)||(d==null?void 0:d.label)||JSON.stringify(d)}return`${r.length} elemento${r.length!==1?"s":""} seleccionado${r.length!==1?"s":""}`};return e.jsx(U,{ref:s,type:"button",variant:"secondary",className:`w-full h-10 rounded-full bg-custom-gray-default dark:bg-custom-blackSemi text-custom-blackLight dark:text-custom-white hover:bg-custom-gray-light dark:hover:bg-custom-blackMedium transition-colors px-4 py-2 text-sm flex items-center justify-start text-start focus:outline-none focus:ring-0 font-normal ${a&&a.length>0?"":"text-gray-500"}`,...o,children:a&&a.length>0?l?l(a):n(a):i})});he.displayName="SelectionButton";function at(){return c.useMemo(()=>[{id:"values",title:"Values",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:s})=>e.jsx(ae,{column:s,className:"max-w-[250px]"}),cell:({row:s})=>e.jsxs("span",{children:["Registro: ",s.id]}),accessorFn:s=>s.id},He],[])}function nt({className:o="",label:s="Seleccionar todos"}){const{table:t}=Y(),i=c.useMemo(()=>{if(!t)return{isAllSelected:!1,isSomeSelected:!1,isIndeterminate:!1};const n=t.getIsAllPageRowsSelected(),r=t.getIsSomePageRowsSelected();return{isAllSelected:n,isSomeSelected:r,isIndeterminate:r&&!n}},[t==null?void 0:t.getState().rowSelection,t]),l=c.useMemo(()=>{var n,r,d;if(!t)return{totalRows:0,filteredRows:0,selectedRows:0,selectedIds:[]};try{const u=((n=t.getPreFilteredRowModel())==null?void 0:n.rows)||[],m=((r=t.getFilteredRowModel())==null?void 0:r.rows)||[],b=((d=t.getFilteredSelectedRowModel())==null?void 0:d.rows)||[];return{totalRows:u.length,filteredRows:m.length,selectedRows:b.length,selectedIds:b.map(g=>g.id)}}catch(u){return console.warn("Error getting table data:",u),{totalRows:0,filteredRows:0,selectedRows:0,selectedIds:[]}}},[t==null?void 0:t.getState().rowSelection,t==null?void 0:t.getState().columnFilters,t==null?void 0:t.getState().globalFilter,t]),a=c.useCallback(n=>{if(t)try{t.toggleAllPageRowsSelected(n)}catch(r){console.warn("Error toggling selection:",r)}},[t]);return!t||l.filteredRows===0?null:e.jsxs("div",{className:`flex items-center gap-2 ${o}`,children:[e.jsx("input",{type:"checkbox",checked:i.isAllSelected,ref:n=>{n&&(n.indeterminate=i.isIndeterminate)},onChange:n=>a(n.target.checked),className:"w-4 h-4 text-custom-orange bg-gray-100 border-gray-300 rounded focus:ring-custom-orange dark:focus:ring-custom-orange dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:s}),e.jsxs("span",{className:"text-xs text-custom-orange font-medium tabular-nums",children:["(",l.selectedRows,"/",l.filteredRows,")"]})]})}function lt(){return e.jsxs("div",{className:"min-w-full max-w-full pt-2 px-2 pb-1 sticky top-0 z-10 bg-custom-white dark:bg-custom-blackSemi border-none",children:[e.jsxs("div",{className:"flex items-center justify-between xl:ml-auto min-w-0 w-full gap-2.5",children:[e.jsx(Ue,{}),e.jsx("div",{className:"flex-1 w-full",children:e.jsx(Be,{})})]}),e.jsx("div",{className:"pt-2 pb-1 px-1",children:e.jsx(nt,{})})]})}const it=te.memo(function({columns:s,showCreateButton:t=!1}){const{data:i,loading:l,error:a}=Z(),n=K(),r=at(),{selection:d,handleRowSelectionChange:u,getItemId:m,resetSelection:b}=fe(),[g,y]=c.useState(!1),C=c.useMemo(()=>s||r,[s,r]),w=c.useMemo(()=>`data-${(i==null?void 0:i.length)||0}-${Date.now()}`,[i]);return c.useEffect(()=>{},[i]),l||i&&i.length===0?e.jsx(Pe,{}):a?e.jsxs("div",{className:"text-red-500 text-sm p-2 border border-red-300 rounded",children:["Error al cargar datos: ",a]}):e.jsx(Oe,{data:i,columnsDef:C,config:{getRowId:N=>String(m(N)),onRowSelectionChange:u,enableMultiRowSelection:!0},initialState:{pagination:{pageIndex:0,pageSize:i.length},rowSelection:d.rowSelection},viewContext:n,customToolbar:lt,children:e.jsxs(re,{open:g,onOpenChange:y,modal:!0,className:"w-full",children:[e.jsx(se,{asChild:!0,children:e.jsx(he,{})}),e.jsxs(oe,{className:"flex flex-col min-w-[350px] p-0 rounded-xl dark:dark-scrollbar dark:bg-custom-blackSemi max-h-[450px] bg-custom-white",sideOffset:5,align:"center",children:[e.jsx("div",{className:"flex-1 max-h-[350px] overflow-y-auto",children:e.jsx(Te,{})}),e.jsxs("div",{className:"flex flex-row gap-2 p-2 border-t border-custom-gray-light dark:border-custom-gray",children:[t&&e.jsx(st,{className:"flex-1"}),e.jsx(U,{onClick:()=>b(),variant:"outline",className:"flex-1",children:"Limpiar"}),e.jsx(U,{onClick:()=>y(!1),variant:"default",className:"flex-1",children:"Cerrar"})]})]})]})},w)}),ct=te.memo(function({defaultValue:s=null,onChangeValue:t=()=>{},renderSelection:i=null,getItemId:l=w=>w==null?void 0:w.id,fetchUrl:a=null,transformData:n=w=>w,dataKey:r=null,columns:d=null,enableCreateUpdateView:u=!1,enableSheetTableView:m=!1,CreateUpdateViewComponent:b=null,SheetTableViewComponent:g=null,cacheDuration:y=5*60*1e3,placeholder:C="Selecciona opciones"}){return e.jsx("div",{className:"max-w-full w-full overflow-hidden",children:e.jsx(et,{enableCreateUpdateView:u,enableSheetTableView:m,CreateUpdateViewComponent:b,SheetTableViewComponent:g,children:e.jsx(Ze,{fetchUrl:a,transformData:n,dataKey:r,getItemId:l,cacheDuration:y,children:e.jsxs(ot,{defaultValue:s,onChangeValue:t,renderSelection:i,getItemId:l,placeholder:C,children:[e.jsx(it,{columns:d,showCreateButton:u}),e.jsx(tt,{}),e.jsx(De,{})]})})})})});function dt({user:o,className:s=""}){var t,i;return e.jsxs("div",{className:`flex items-center gap-2 max-w-[12rem] ${s}`,children:[e.jsx(B,{className:"h-8 w-8 rounded-full",children:o!=null&&o.profile_photo_url?e.jsx(I,{src:o.profile_photo_url,alt:o==null?void 0:o.name}):e.jsx(V,{className:"rounded-lg",children:((t=o==null?void 0:o.name)==null?void 0:t[0])||((i=o==null?void 0:o.email)==null?void 0:i[0])||"U"})}),e.jsx(z,{children:e.jsxs(q,{children:[e.jsx(G,{asChild:!0,children:e.jsx("span",{className:"text-nowrap text-ellipsis overflow-hidden",children:(o==null?void 0:o.name)||(o==null?void 0:o.email)||"Usuario"})}),e.jsx(J,{children:e.jsx("p",{children:(o==null?void 0:o.name)||(o==null?void 0:o.email)||"Usuario"})})]})})]})}function ut({model:o}){const{viewContext:s}=Y(),{handleCreateUpdateView:t,handleSheetView:i,enableCreateUpdateView:l,enableSheetTableView:a}=s;if(!l&&!a)return null;const n=r=>{r.stopPropagation()};return e.jsxs(ne,{children:[e.jsx(le,{asChild:!0,children:e.jsx("button",{className:"btn hover:bg-custom-gray-semiLight dark:hover:bg-custom-blackSemi/50 rounded-full h-6 w-6 flex items-center justify-center focus:outline-none focus:ring-0 focus:ring-offset-0",onClick:n,"aria-label":"Acciones",children:e.jsx(A,{name:"Ellipsis",className:"w-4 h-4"})})}),e.jsxs(ie,{className:"dark:bg-custom-blackSemi",onClick:n,align:"end",sideOffset:5,children:[l&&e.jsxs(T,{onSelect:()=>i(o),className:"cursor-pointer",children:[e.jsx(A,{name:"Info",className:"w-4 mr-2"}),e.jsx("span",{children:"Información"})]}),a&&e.jsxs(T,{onSelect:()=>t(o),children:[e.jsx(A,{name:"SquarePen",className:"w-4 mr-2"}),e.jsx("span",{children:"Editar"})]})]})]})}const mt=c.memo(ut),ft={id:"actions",title:"Acciones",enableHiding:!1,enableSorting:!1,enableFiltering:!1,cell:({row:o})=>e.jsx(mt,{model:o.original})};function ht(){return c.useMemo(()=>[Ie,{id:"user",title:"Usuario",enableHiding:!1,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:s})=>e.jsx(ae,{column:s,className:"max-w-[250px]"}),cell:({row:s})=>e.jsx(dt,{user:s.original}),accessorFn:s=>s.name||s.email,filterFn:(s,t,i)=>{if(!i.length)return!0;const l=s.getValue(t);return i.some(a=>l==null?void 0:l.toLowerCase().includes(a.toLowerCase()))}},{id:"email",title:"Email",enableHiding:!0,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,hideColumn:!0,header:({column:s})=>e.jsx(P,{column:s,className:"max-w-[250px]"},`filter${s.id}`),cell:({row:s})=>e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.original.email}),accessorFn:s=>s.email,filterFn:(s,t,i)=>{if(!i.length)return!0;const l=s.getValue(t);return i.some(a=>l==null?void 0:l.toLowerCase().includes(a.toLowerCase()))}},{id:"roles",title:"Roles",enableHiding:!0,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,header:({column:s})=>e.jsx(P,{column:s,className:"max-w-[250px]"},`filter${s.id}`),cell:({row:s})=>e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.original.roles}),accessorFn:s=>s.roles,filterFn:(s,t,i)=>{if(!i.length)return!0;const l=s.getValue(t);return i.some(a=>l==null?void 0:l.toLowerCase().includes(a.toLowerCase()))}},{id:"status",title:"Estado",enableHiding:!0,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,hideColumn:!0,header:({column:s})=>e.jsx(P,{column:s,className:"max-w-[250px]"},`filter${s.id}`),cell:({row:s})=>e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.original.status}),accessorFn:s=>s.status,filterFn:(s,t,i)=>{if(!i.length)return!0;const l=s.getValue(t);return i.some(a=>l==null?void 0:l.toLowerCase().includes(a.toLowerCase()))}},{id:"role",title:"Rol",enableHiding:!0,enableSorting:!0,sortUndefined:"last",enableFiltering:!0,hideColumn:!0,header:({column:s})=>e.jsx(P,{column:s,className:"max-w-[250px]"},`filter${s.id}`),cell:({row:s})=>{var t;return e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:((t=s.original.role)==null?void 0:t.name)||"Sin rol"})},accessorFn:s=>{var t;return((t=s.role)==null?void 0:t.name)||""},filterFn:(s,t,i)=>{if(!i.length)return!0;const l=s.getValue(t);return i.some(a=>l==null?void 0:l.toLowerCase().includes(a.toLowerCase()))}},ft],[])}function xt({users:o=[],maxVisible:s=3,placeholder:t="Selecciona usuarios"}){var a,n;if(!o||o.length===0)return e.jsx("span",{className:"text-gray-500 text-sm",children:t});if(o.length===1){const r=o[0];return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-6 w-6 rounded-full",children:r!=null&&r.profile_photo_url?e.jsx(I,{src:r.profile_photo_url,alt:r==null?void 0:r.name}):e.jsx(V,{className:"rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:((a=r==null?void 0:r.name)==null?void 0:a[0])||((n=r==null?void 0:r.email)==null?void 0:n[0])||"U"})}),e.jsx("span",{className:"text-sm text-custom-blackLight dark:text-custom-white truncate",children:(r==null?void 0:r.name)||(r==null?void 0:r.email)||"Usuario"})]})}const i=o.slice(0,s),l=o.length-s;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex -space-x-1",children:i.map((r,d)=>{var u,m;return e.jsx(z,{children:e.jsxs(q,{children:[e.jsx(G,{asChild:!0,children:e.jsx(B,{className:"h-6 w-6 rounded-full border-2 border-white dark:border-custom-blackSemi relative z-10",children:r!=null&&r.profile_photo_url?e.jsx(I,{src:r.profile_photo_url,alt:r==null?void 0:r.name}):e.jsx(V,{className:"rounded-full text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",children:((u=r==null?void 0:r.name)==null?void 0:u[0])||((m=r==null?void 0:r.email)==null?void 0:m[0])||"U"})})}),e.jsx(J,{className:"bg-white dark:bg-custom-blackSemi border border-gray-300 dark:border-gray-600 text-custom-blackLight dark:text-custom-white",children:e.jsx("p",{className:"text-sm",children:(r==null?void 0:r.name)||(r==null?void 0:r.email)||"Usuario"})})]})},(r==null?void 0:r.id)||d)})}),l>0&&e.jsx("div",{className:"flex items-center ml-2",children:e.jsx(z,{children:e.jsxs(q,{children:[e.jsx(G,{asChild:!0,children:e.jsxs("div",{className:"h-6 px-2 rounded-full bg-custom-gray-dark dark:bg-custom-blackMedium text-custom-white text-xs flex items-center justify-center font-medium border border-gray-300 dark:border-gray-600",children:["+",l]})}),e.jsx(J,{className:"bg-white dark:bg-custom-blackSemi border border-gray-300 dark:border-gray-600 text-custom-blackLight dark:text-custom-white",children:e.jsx("div",{className:"space-y-1 max-w-48",children:o.slice(s).map((r,d)=>e.jsx("p",{className:"text-xs truncate",children:(r==null?void 0:r.name)||(r==null?void 0:r.email)||"Usuario"},(r==null?void 0:r.id)||d))})})]})})})]})}function gt({defaultValue:o=[],onChangeValue:s=()=>{},enableCreateUpdateView:t=!1,enableSheetTableView:i=!1,placeholder:l="Selecciona usuarios",transformData:a=n=>n}){return e.jsx(ct,{defaultValue:o,onChangeValue:s,placeholder:l,renderSelection:n=>e.jsx(xt,{users:n,maxVisible:3,placeholder:l}),fetchUrl:route("api.v1.shared.users.index"),dataKey:"users",columns:ht(),enableCreateUpdateView:t,enableSheetTableView:i,cacheDuration:2*60*1e3,transformData:a})}function It({isOpen:o,onClose:s,onSubmit:t,selectedDate:i,eventTypes:l,selectedEvent:a}){const{auth:n}=Ne().props,r=n.user,[d,u]=c.useState(""),[m,b]=c.useState(""),[g,y]=c.useState(null),[C,w]=c.useState({}),[j,N]=c.useState([]),[p,x]=c.useState(null),[k,f]=c.useState(!1),S=c.useRef(null),E=h=>Array.isArray(h)?h.filter(v=>v.id!==(r==null?void 0:r.id)):h&&h.users&&Array.isArray(h.users)?{...h,users:h.users.filter(v=>v.id!==(r==null?void 0:r.id))}:h;c.useEffect(()=>(o&&(document.body.style.pointerEvents="auto"),()=>{document.body.style.pointerEvents="auto"}),[o]);const F=h=>{if(typeof h=="object"&&h!==null)return h;if(!h||h==="")return{};if(typeof h=="string")try{return JSON.parse(h)}catch(v){console.error("Error parsing description JSON:",v);const R=Math.random().toString(36).substring(2,15);return{[R]:{id:R,type:"Paragraph",value:[{id:Math.random().toString(36).substring(2,15),type:"paragraph",children:[{text:h}]}],meta:{align:"left",depth:0,order:0}}}}return{}};c.useEffect(()=>{var h;if(o){if(a){if(u(a.nombre||a.titulo||""),a.hora_inicio)b(a.hora_inicio);else if(a.fecha_inicio){const R=a.fecha_inicio.split(" ");R.length>1&&b(R[1])}y(((h=a.tipo_evento)==null?void 0:h.id)||a.tipo_evento_id||null);const v=F(a.descripcion);w(v),N(a.users||[]),a.entity?x(a.entity):x(null)}else k||(u(""),b(""),y(null),x(null),w({}),N([]));f(!0)}return()=>{o||(u(""),b(""),y(null),x(null),w({}),N([]),f(!1))}},[o,a?JSON.stringify(a):null]);const $=h=>{h.preventDefault();const v=xe(g,l),R=H=>{const we=H.getFullYear(),je=String(H.getMonth()+1).padStart(2,"0"),ke=String(H.getDate()).padStart(2,"0");return`${we}-${je}-${ke}`},_={id:a==null?void 0:a.id,titulo:d,descripcion:typeof C=="object"?JSON.stringify(C):C,fecha_inicio:R(i),hora_inicio:m,tipo_evento_id:g,users:j,entity:p};if(p&&v)switch(v){case"team":_.team_id=p.id;break;case"empresa":_.empresa_id=p.id;break;case"departamento":_.departamento_id=p.id;break}t(_)},xe=(h,v)=>{if(!h)return null;const R=v.find(_=>_.id===h);if(!R)return null;switch(R.nombre){case"Equipo":return"team";case"Empresa":return"empresa";case"Departamento":return"departamento";default:return null}},ge=h=>{h||s(h)},pe=h=>{N(h||[])},be=h=>{w(h)};return e.jsx(W,{open:o,onOpenChange:ge,title:a?"Editar Evento":"Nuevo Evento",eventDate:ce(i),children:e.jsx(Q,{className:"bg-custom-white dark:bg-custom-blackLight text-custom-blackLight dark:text-custom-white w-full h-[80vh] flex flex-col",children:e.jsxs("form",{onSubmit:$,className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-2 my-4",children:[e.jsxs("div",{className:"flex gap-3 justify-between items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx(D,{id:"titulo",name:"titulo",className:"w-full text-custom-blackLight dark:text-custom-white rounded-full bg-custom-gray-default dark:bg-custom-blackSemi text-sm px-4 py-2 h-10 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-none transition-colors hover:bg-custom-gray-light dark:hover:bg-custom-blackMedium",placeholder:"Título del evento",value:d,onChange:h=>u(h.target.value),required:!0,autoComplete:"off"})}),e.jsxs("div",{className:"flex flex-row bg-custom-gray-default dark:bg-custom-blackSemi hover:bg-custom-gray-light dark:hover:bg-custom-blackMedium rounded-full items-center justify-center h-10",children:[e.jsx(A,{name:"Clock",className:"w-6 h-6 ml-2 text-custom-orange"}),e.jsx(D,{id:"hora_inicio",name:"hora_inicio",type:"time",className:"w-full rounded-full bg-transparent dark:bg-transparent text-sm px-3 text-center focus:outline-none focus:ring-2 focus:ring-none transition-colors[&::-webkit-calendar-picker-indicator]:opacity-70 [&::-webkit-calendar-picker-indicator]:cursor-pointer [&::-webkit-calendar-picker-indicator]:w-4 [&::-webkit-calendar-picker-indicator]:h-4",value:m,onChange:h=>b(h.target.value),required:!0,autoComplete:"off"})]})]}),e.jsx(Xe,{selectedEventType:g,setSelectedEventType:y,eventTypes:l,onEntitySelect:x,initialEntity:p})]}),e.jsx("div",{className:"flex-1 min-h-0 mb-4",children:e.jsx("div",{className:"h-full overflow-y-auto scrollbar-styled bg-custom-gray-default dark:bg-custom-blackSemi rounded-xl",children:e.jsx(Ce,{placeholder:"Escribe la descripción del evento...",value:C,onChange:be,selectionBoxRoot:S},a?a.id:"newEvent")})}),e.jsxs("div",{className:"flex-shrink-0 space-y-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-5",children:[e.jsx("h2",{className:"text-lg text-custom-orange font-bold whitespace-nowrap",children:"Compartir con..."}),e.jsx(gt,{onChangeValue:pe,defaultValue:j.length>0?j.map(h=>h.id):a?(a.users||[]).map(h=>h.id):[],placeholder:"Seleccionar participantes del evento",transformData:E},`user-multiselect-${r==null?void 0:r.id}`)]}),e.jsx(Ge,{children:e.jsx(U,{className:"w-full",variant:"primary",type:"submit",children:a?"Actualizar Evento":"Crear Evento"})})]})]})})})}function Vt({isOpen:o,onClose:s,eventData:t,onEdit:i,onDelete:l}){var C,w,j,N;const[a,n]=c.useState(!1),[r,d]=c.useState(null),[u,m]=c.useState(!1);c.useEffect(()=>{const p=async()=>{var x;if((x=t==null?void 0:t.creador)!=null&&x.id)try{const k=await X.get(route("api.v1.admin.users.show",{user:t.creador.id}));d(k.data.user)}catch(k){console.error("Error al obtener datos del creador:",k),d(t.creador)}else d((t==null?void 0:t.creador)||null)};o&&(t!=null&&t.creador)&&p()},[t,o]);const b=c.useMemo(()=>{if(!(t!=null&&t.descripcion))return null;if(typeof t.descripcion=="object")return t.descripcion;try{return JSON.parse(t.descripcion)}catch(p){return console.error("Error parsing description JSON:",p),{root:{children:[{type:"paragraph",children:[{text:t.descripcion||""}]}]}}}},[t==null?void 0:t.descripcion]),g=()=>{s(),i&&t&&i(t)},y=async()=>{if(!(!t||!t.id))try{n(!0),Se.delete(route("user.eventos.destroy",{evento:t.id}),{onSuccess:()=>{s(),l&&l(t.id)},onFinish:()=>{n(!1)},onError:p=>{console.error("Error al eliminar el evento:",p),n(!1)}})}catch(p){console.error("Error al procesar la eliminación:",p),n(!1)}};return e.jsx(W,{open:o,onOpenChange:s,title:"Detalles del Evento",eventDate:t!=null&&t.fecha_inicio?ce(t.fecha_inicio):void 0,children:e.jsxs(Q,{className:"bg-custom-white dark:bg-custom-blackLight text-custom-blackLight dark:text-custom-white w-full h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex flex-col h-full",children:["                    ",e.jsxs("div",{className:"flex-shrink-0 space-y-3 my-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(t==null?void 0:t.tipo_evento)&&e.jsx("span",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:t.tipo_evento.color}}),e.jsx("h2",{className:"text-xl font-semibold text-custom-blackLight dark:text-custom-white truncate",children:(t==null?void 0:t.nombre)||(t==null?void 0:t.titulo)})]}),(t==null?void 0:t.tipo_evento)&&e.jsxs("div",{className:"ml-4 inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border-2 flex-shrink-0",style:{backgroundColor:`${t.tipo_evento.color}20`,borderColor:"transparent",color:t.tipo_evento.color},children:[e.jsx("span",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:t.tipo_evento.color}}),t.tipo_evento.nombre]})]}),e.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"flex items-center bg-custom-gray-default dark:bg-custom-blackSemi rounded-full px-3 py-2 text-sm",children:[e.jsx(A,{name:"Calendar",className:"w-4 h-4 mr-2 text-custom-orange"}),Ve(t==null?void 0:t.fecha_inicio)]}),e.jsxs("span",{className:"flex items-center bg-custom-gray-default dark:bg-custom-blackSemi rounded-full px-3 py-2 text-sm",children:[e.jsx(A,{name:"Clock",className:"w-4 h-4 mr-2 text-custom-orange"}),t==null?void 0:t.hora_inicio]})]}),(t==null?void 0:t.can_manage)&&e.jsx("div",{className:"flex items-center hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi rounded-full p-2 transition-colors",children:e.jsxs(ne,{children:[e.jsx(le,{asChild:!0,children:e.jsx("button",{className:"flex justify-center items-center p-1",children:e.jsx(A,{name:"Ellipsis",className:"w-5 h-5"})})}),e.jsxs(ie,{className:"dark:bg-custom-blackSemi border border-gray-300 dark:border-gray-600",children:[e.jsxs(T,{onSelect:g,children:[e.jsx(A,{name:"SquarePen",className:"w-4 h-4 mr-2"}),"Editar"]}),e.jsxs(T,{className:"text-red-500 font-bold hover:!bg-red-500/40 hover:!text-red-500",onSelect:()=>m(!0),children:[e.jsx(A,{name:"X",className:"w-4 h-4 mr-2"}),"Eliminar evento"]})]})]})})]}),((t==null?void 0:t.entity)||(t==null?void 0:t.team)||(t==null?void 0:t.empresa)||(t==null?void 0:t.departamento))&&e.jsxs("div",{className:"flex items-center text-sm text-custom-gray-dark dark:text-custom-gray-light",children:[e.jsx(A,{name:"Users",className:"w-4 h-4 mr-2 text-custom-orange"}),e.jsxs("span",{children:["Relacionado con:"," ",((C=t.entity)==null?void 0:C.nombre)||((w=t.team)==null?void 0:w.nombre)||((j=t.empresa)==null?void 0:j.nombre)||((N=t.departamento)==null?void 0:N.nombre)]})]})]}),e.jsx("div",{className:"flex-1 min-h-0 mb-4",children:e.jsx("div",{className:"h-full overflow-y-auto scrollbar-styled bg-custom-gray-default dark:bg-custom-blackSemi rounded-xl",children:b&&e.jsx("div",{className:"yoopta-viewer-compact p-4",style:{"--yoopta-block-margin":"0.25rem"},children:e.jsx(Ae,{value:b})})})}),e.jsx("div",{className:"flex-shrink-0",children:(t==null?void 0:t.creador)&&e.jsxs("div",{className:"flex items-center text-sm text-custom-gray-dark dark:text-custom-gray-light bg-custom-gray-default dark:bg-custom-blackSemi rounded-full px-4 py-3",children:[e.jsx(A,{name:"User",className:"w-4 h-4 mr-3 text-custom-orange"}),e.jsx("span",{className:"mr-2",children:"Creado por:"}),e.jsxs("div",{className:"flex items-center",children:[r!=null&&r.profile_photo_url?e.jsx("img",{src:r.profile_photo_url,alt:r.name,className:"h-6 w-6 rounded-full mr-2 object-cover"}):e.jsx("div",{className:"h-6 w-6 rounded-full mr-2 bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:t.creador.name.split(" ").map(p=>p.charAt(0).toUpperCase()).slice(0,2).join("")})}),e.jsx("span",{className:"font-medium",children:t.creador.name})]})]})})]}),u&&e.jsx(qe,{title:"¿Estás seguro de que quieres eliminar este evento?",content:"Esta acción no se puede deshacer. Todos los datos relacionados con este evento se eliminarán.",open:u,onOpenChange:()=>m(!u),action:y,variant:"destructive",icon:e.jsx(A,{name:"OctagonAlert",className:"w-6 h-6 text-red-500"})})]})})}export{It as C,Vt as V};
