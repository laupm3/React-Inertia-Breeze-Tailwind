import{r as l,G as D,j as e}from"./app-fwyInB3c.js";import{D as v,e as y,b as C,c as w,d as E,f as S,g as A}from"./dialog-iaZkf6Xy.js";import{I as M}from"./LucideIcon-CEqEhMjI.js";import{B as f}from"./Button-CQuYVLGu.js";import{I as x}from"./input-CqlBlYgU.js";import{D as O}from"./DecisionModal-Dl8siGBG.js";import z from"./DefaultValuesForm-Ckj3Uf1w.js";import B from"./userSchema-C848vnc4.js";import{u as F}from"./useTranslation-BtIkv0Na.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-DloWbRVd.js";import"./index-B7srb2QZ.js";import"./index-BIJodELy.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./utils-CytzSlOG.js";import"./x-2mzC_aTV.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./index-BwobEAja.js";import"./alert-dialog-kDfn0La3.js";import"./button-Blwr-A5N.js";import"./types-BZmDMmQb.js";function he({onClose:c,dataId:s,onOpenChange:n}){const{t:o}=F(["datatable"]),[m,g]=l.useState(null),[R,h]=l.useState(!0),[T,d]=l.useState(!1),[u,p]=l.useState(!1),b=s?"Editar rol":"Crear rol";l.useEffect(()=>{if(s)return(async()=>{try{const a=await axios.get(route("api.v1.admin.roles.show",{id:s}));a.status===200?(g(a.data.role),j(a.data.role)):d(!0)}catch{d(!0)}finally{h(!1)}})(),()=>{}},[s]);const j=t=>{const{id:a,name:i,description:N}=t;r.setData({id:a,name:i,description:N})},r=D(z),k=()=>{const t=B().safeParse(r.data);if(!t.success){const a=t.error.flatten().fieldErrors;console.log("errors :>> ",a),Object.keys(a).forEach(i=>{r.setError(i,a[i][0])});return}m?r.put(route("admin.roles.update",{id:m.id})):r.post(route("admin.roles.store"),{onSuccess:()=>{r.reset(),n()},errorBag:"updateOrCreateRol"})};return e.jsxs(e.Fragment,{children:[e.jsxs(v,{open,onOpenChange:n||c,children:[e.jsxs(y,{children:[" ",o("tables.creacionrol")," "]}),e.jsxs(C,{className:"sm:max-w-[800px] flex flex-col bg-custom-white dark:bg-custom-blackLight",children:[e.jsx(w,{children:e.jsx(E,{className:"",children:b})}),e.jsx("div",{className:"flex flex-col gap-4 h-full overflow-y-auto p-8",children:e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:" font-bold",children:["Nombre",e.jsx("span",{className:"text-custom-orange",children:"*"})]}),e.jsx(x,{placeholder:o("tables.añadirnombre"),className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",value:r.data.name,onChange:t=>r.setData("name",t.target.value)}),r.errors.name&&e.jsx("span",{className:"text-red-500 text-sm",children:r.errors.name})]}),e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsx("span",{className:" font-bold",children:o("tables.descripcion")}),e.jsx(x,{placeholder:"Añadir descripción",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",value:r.data.description,onChange:t=>r.setData("description",t.target.value)}),e.jsx("p",{className:"text-xs font-bold ml-auto text-custom-gray-dark dark:text-custom-gray-darker",children:"Máximo 255 caracteres"}),r.errors.description&&e.jsx("span",{className:"text-red-500 text-sm",children:r.errors.description})]})]})}),e.jsxs(S,{className:"flex justify-end gap-4 ",children:[e.jsx(A,{asChild:!0,children:e.jsx(f,{onClick:c,className:"bg-hidden hover:bg-custom-gray-default dark:hover:bg-custom-blackSemi text-custom-black dark:text-custom-white  rounded-full",children:o("tables.cancelar")})}),e.jsx(f,{onClick:()=>p(!0),className:"bg-custom-orange  hover:bg-custom-blue text-custom-white dark:text-custom-black dark:hover:text-custom-white rounded-full",children:o(s?"tables.editarrol":"tables.aceptar")})]})]})]}),e.jsx(O,{variant:"confirm",open:u,onOpenChange:()=>p(!u),action:k,title:s?"¿Confirmas la actualización del rol?":"¿Confirmas la creación del rol?",content:s?"Al confirmar la actualización del rol, se modificarán los datos del rol seleccionado.":"Al confirmar la creación del rol, se guardará el nuevo rol en la aplicación.",icon:e.jsx(M,{name:"TriangleAlert",className:"text-custom-orange"})})]})}export{he as default};
