import{r as y,j as e}from"./app-fwyInB3c.js";import{D as E,a as S,b as D,c as p}from"./dropdown-menu-bHoOJ61X.js";import A from"./TimelineSolicitud-BskMqnF0.js";import{STATUS_BADGE_COLORS as N}from"./INITIAL_PERMISOS-Ds5-PEcv.js";import{I as o}from"./LucideIcon-CEqEhMjI.js";import"./Button-CQuYVLGu.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-DloWbRVd.js";import"./index-BIJodELy.js";import"./index-C_F9oucK.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-BZxTbISK.js";import"./index-v24TFYKQ.js";import"./utils-CytzSlOG.js";import"./check-5DjPwM22.js";import"./createLucideIcon-DoJ0Kelj.js";import"./chevron-right-B1iws4WK.js";import"./UserAvatar-cKyxDEhx.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./chevron-up-OjKdrhzc.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";import"./index-BwobEAja.js";const me=({permiso:a,onEdit:b,onDelete:u,onRequestCancellation:g})=>{var j;const{tipo_permiso_nombre:w,estado:s,fecha_inicio:m,fecha_fin:l,motivo:h}=a,c=t=>{if(!t)return"";const i=new Date(t);return isNaN(i.getTime())?"":i.toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})},d=t=>{if(!t)return"";const i=new Date(t);if(isNaN(i.getTime()))return"";let n=i.toLocaleDateString("es-ES",{weekday:"long"});return n.charAt(0).toUpperCase()+n.slice(1)},[x,v]=y.useState(!1),f=()=>{v(!x)},k=t=>{const i=N[t]||N.default,n={"bg-green-500":{bg:"bg-green-500/40 dark:bg-green-500/30",text:"text-green-500 dark:text-green-400",point:"bg-green-500 dark:bg-green-400"},"bg-red-500":{bg:"bg-red-500/40 dark:bg-red-700/30",text:"text-red-500 dark:text-red-400",point:"bg-red-500 dark:bg-red-400"},"bg-yellow-500":{bg:"bg-yellow-500/30",text:"text-yellow-500",point:"bg-yellow-500"},"bg-blue-500":{bg:"bg-blue-500/30",text:"text-blue-500 dark:text-blue-400",point:"bg-blue-500 dark:bg-blue-400"},"bg-purple-500":{bg:"bg-purple-500/30",text:"text-purple-500",point:"bg-purple-500"},"bg-gray-500":{bg:"bg-gray-500/30",text:"text-gray-500 dark:text-gray-400",point:"bg-gray-500 dark:bg-gray-400"}};return n[i]||n["bg-gray-500"]},r=(()=>{if(a.seen_at&&s&&s.nombre==="Solicitado")return{position:1,nombre:"En revisión"};if(!s||!s.nombre)return{position:0,nombre:"Desconocido"};switch(s.nombre){case"Solicitado":return{position:0,nombre:s.nombre};case"En revisión":return{position:1,nombre:s.nombre};case"En proceso":return{position:2,nombre:s.nombre};case"A":return{position:2,nombre:s.nombre};case"Aprobado":case"Denegado":return{position:3,nombre:s.nombre};default:return{position:0,nombre:s.nombre}}})();return e.jsxs("div",{className:"bg-custom-gray-default dark:bg-custom-blackSemi p-4 sm:p-6 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-0",children:[e.jsx("div",{className:"flex items-center gap-1 flex-grow",children:e.jsxs("div",{className:"cursor-pointer flex-grow flex",onClick:f,children:[e.jsx("h2",{className:"text-custom-blue dark:text-custom-white font-bold text-lg sm:text-xl leading-tight",children:w||((j=a.permiso)==null?void 0:j.nombre)}),(b||u||g)&&(r.nombre==="Solicitado"||r.nombre==="En revisión"||r.nombre==="En proceso")&&e.jsx("div",{className:"flex items-center gap-1 ml-2  ",children:e.jsxs(E,{children:[e.jsx(S,{asChild:!0,children:e.jsx("button",{className:"btn h-8 w-8 sm:h-10 sm:w-10 flex items-center justify-center",children:e.jsx(o,{name:"Ellipsis",className:"w-4 h-4 mb-2"})})}),e.jsxs(D,{className:"dark:bg-custom-blackSemi",side:"bottom",align:"end",children:[r.nombre==="Solicitado"&&b&&e.jsxs(p,{onSelect:t=>{t.stopPropagation(),b(a)},children:[e.jsx(o,{name:"SquarePen",className:"w-4 mr-2"})," Editar"]}),r.nombre==="Solicitado"&&u&&e.jsxs(p,{className:"text-red-500 font-bold hover:!bg-red-500/40 hover:!text-red-500",onSelect:t=>{t.stopPropagation(),u(a)},children:[e.jsx(o,{name:"X",className:"w-4 mr-2"})," Eliminar solicitud"]}),(r.nombre==="En revisión"||r.nombre==="En proceso")&&g&&e.jsxs(p,{className:"text-red-500 font-bold hover:!bg-red-500/40 hover:!text-red-500",onSelect:t=>{t.stopPropagation(),g(a)},children:[e.jsx(o,{name:"X",className:"w-4 mr-2"})," Solicitar cancelación"]})]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2",children:[(()=>{const t=k(r.nombre);return e.jsxs("span",{className:`${t.bg} ${t.text} text-xs sm:text-sm px-2 py-1 rounded-full flex items-center gap-1 sm:gap-2 font-bold`,children:[e.jsx("div",{className:`w-2 h-2 ${t.point} rounded-full`}),e.jsx("span",{children:r.nombre})]})})(),e.jsx("button",{onClick:f,className:"text-gray-500 dark:text-custom-white p-1","aria-label":x?"Contraer":"Expandir",children:x?e.jsx(o,{name:"ChevronUp",size:18,className:"sm:w-5 sm:h-5"}):e.jsx(o,{name:"ChevronDown",size:18,className:"sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{className:"mt-3 sm:mt-2",children:[e.jsx("div",{className:"flex flex-col gap-1 sm:hidden",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-custom-blue dark:text-custom-white text-xs font-medium",children:d(m)}),e.jsx("div",{className:"text-custom-blue dark:text-custom-white font-bold text-sm",children:c(m)})]}),e.jsx("div",{className:"text-custom-orange px-2",children:e.jsx(o,{name:"ArrowRight",className:"w-2.5 h-2.5"})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("div",{className:"text-custom-blue dark:text-custom-white text-xs font-medium",children:d(l)}),e.jsx("div",{className:"text-custom-blue dark:text-custom-white font-bold text-sm",children:c(l)})]})]})}),e.jsxs("div",{className:"hidden sm:flex sm:items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-custom-blue dark:text-custom-white text-sm font-medium",children:d(m)}),e.jsx("div",{className:"text-custom-blue dark:text-custom-white font-bold text-lg",children:c(m)})]}),e.jsx("div",{className:"text-custom-orange flex items-center justify-center px-2",children:e.jsx(o,{name:"ArrowRight",className:"text-custom-orange w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-custom-blue dark:text-custom-white text-sm font-medium",children:d(l)}),e.jsx("div",{className:"text-custom-blue dark:text-custom-white font-bold text-lg",children:c(l)})]})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"border-custom-gray-semiLight dark:border-custom-gray-darker my-4"}),h&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-custom-blue dark:text-custom-white font-medium text-sm mb-2",children:"Motivo:"}),e.jsx("p",{className:"text-gray-500 dark:text-custom-gray-semiLight text-sm leading-relaxed",children:h})]}),e.jsx("div",{className:"mt-4",children:e.jsx(A,{permiso:a})})]})]})};export{me as default};
