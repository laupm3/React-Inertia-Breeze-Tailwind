import{r as n,G as ce,a as E,j as e,S as me}from"./app-fwyInB3c.js";import{A as de}from"./AuthenticatedLayout-B4CSARVj.js";import xe from"./CreateUpdateView-CR3KR9JW.js";import{ViewContextProvider as ue}from"./ViewContext-pEBA1Rm6.js";import{DataHandlerContextProvider as pe}from"./DataHandlerContext-Bdtxuzn4.js";import fe from"./DataTablePortal-orWA-9Ks.js";import he from"./SheetTableView-OywJEODw.js";import ge from"./DeleteView-BXs1nRC-.js";import{f as je,c as Ne,d as be,e as we,b as ke,D as ve}from"./dialog-iaZkf6Xy.js";import{u as ye}from"./useTranslation-BtIkv0Na.js";import{o as Se,e as B,a as I,n as M,s as A,l as V}from"./types-BZmDMmQb.js";import{toast as F}from"./index-WlsBA3k2.js";import{I as z}from"./input-CqlBlYgU.js";import{T as Ce}from"./textarea-C969rVin.js";import{c as R}from"./utils-CytzSlOG.js";import{e as J,C as Q,f as Z,b as K,c as ee,d as se}from"./command-PoUoScut.js";import{P as te,a as ae,b as re}from"./popover-DaRbHQOK.js";import{I as w,i as De}from"./LucideIcon-CEqEhMjI.js";import{W as oe}from"./useColumns-Df2xb44W.js";import{u as _e}from"./useDebounce-xNcQ83OW.js";import{S as j}from"./skeleton-DSiYFg9q.js";import{B as G}from"./Button-CQuYVLGu.js";import{S as Ee}from"./Spinner-DPRe7Z_J.js";import{O as Pe}from"./octagon-alert-BRAzZNeG.js";import{S as W}from"./SheetTable-oFCbTdfY.js";import{D as Le}from"./DecisionModal-Dl8siGBG.js";import"./sidebar-CPh6C6LB.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./button-Blwr-A5N.js";import"./separator-BWKairMX.js";import"./index-BIJodELy.js";import"./sheet-DHc5Hgr8.js";import"./index-DVo7DTeW.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-BZxTbISK.js";import"./x-2mzC_aTV.js";import"./createLucideIcon-DoJ0Kelj.js";import"./tooltip-DFfoxvAF.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-CeuhGnKJ.js";import"./dropdown-menu-bHoOJ61X.js";import"./index-C_F9oucK.js";import"./index-v24TFYKQ.js";import"./check-5DjPwM22.js";import"./chevron-right-B1iws4WK.js";import"./avatar-oBOSifLN.js";import"./PopUpIncidencias-CaovAEi3.js";import"./card-DYkZYgg5.js";import"./UserAvatar-cKyxDEhx.js";import"./ApplicationLogo-C2FcO4AY.js";import"./Yoopta-Dj4Guze5.js";import"./throttle-CmSTFqON.js";import"./PrimaryButton-SsXyLm2e.js";import"./useNotifications-CSWGH93r.js";import"./ShowNotificactionFromJestream-cKOlvVdg.js";import"./OnboardingModal-D0HRNKzO.js";import"./Modal-BkRna8gK.js";import"./transition-ByAjZSmr.js";import"./StepItem-bNLmZaq8.js";import"./StepProgress-DNpLodXf.js";import"./WelcomeContent-BPJ5E7_N.js";import"./onboardingImages-CoczwfNn.js";import"./AboutContent-DOlAXyok.js";import"./TeamContent-C0DysUYq.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./chevron-up-OjKdrhzc.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./DataTable-D4Fn3B2g.js";import"./table-cS0UKUSm.js";import"./DataTableContext-BYrqyX0i.js";import"./index-Z1g0u-qm.js";import"./TableFilters-ZojjKFl2.js";import"./GlobalFilter-DNA5td8x.js";import"./ImportExportDropdown-COI3HdRN.js";import"./index-C-xs73Vr.js";import"./index-DpIruHMc.js";import"./badge-BgloL8Ae.js";import"./scroll-area-CvQ1XCoU.js";import"./select-B5O0TxCl.js";import"./index-4A9uUPu1.js";import"./checkbox-BQT_ir1e.js";import"./index-BxSEkZvI.js";import"./TableDebugging-C1u6ii1k.js";import"./BlockCard-TCX704se.js";import"./AdvancedHeader-CpvwMmYr.js";import"./DatePicker-YJSItPq7.js";import"./calendar-DctTJhwg.js";import"./endOfWeek-DoVA-Yvp.js";import"./toDate-qOSwr3PX.js";import"./format-Be40hyfq.js";import"./constants-BKFt95HM.js";import"./addDays-B9Fzl-_R.js";import"./parseISO-Efi0RkWR.js";import"./RowSelectionColumn-COjZFz9T.js";import"./Pill-l4GaXyto.js";import"./RowActionsColumn-CM2slffX.js";import"./RowActionsTrigger-DnJzXomR.js";import"./alert-dialog-kDfn0La3.js";const Te=()=>{const{t:s}=ye(["datatable"]);return Se({id:M(I()).optional(),name:A().min(1,{message:"El nombre es requerido"}),description:A().optional().or(V("")),icon:A().min(1,{message:"El ícono es requerido"}),route_name:A().optional().or(V("")),parent_id:M(I()).optional(),permission_id:M(I()).optional(),weight:I().min(1).max(5).default(1),is_important:B().default(!1),is_recent:B().default(!1)})},X={id:null,name:"",description:"",icon:"MapPin",route_name:"",parent_id:null,permission_id:null,weight:1,is_important:!1,is_recent:!1},$e=s=>s?{id:s.id,name:s.name||"",description:s.description||"",icon:s.icon||"MapPin",route_name:s.route_name||"",parent_id:s.parent_id||null,weight:s.weight||1,is_important:s.is_important||!1,is_recent:s.is_recent||!1,requires_employee:s.requires_employee||!1}:void 0,O=s=>n.useMemo(()=>({show:s?route("api.v1.admin.navigation.show",{link:s.id||s}):null,store:route("api.v1.admin.navigation.store"),update:s?route("api.v1.admin.navigation.update",{link:s.id||s}):null,delete:s?route("api.v1.admin.navigation.destroy",{link:s.id||s}):null}),[s]),ne=n.createContext(null),Fe=({children:s,model:o,onOpenChange:c,dataKey:d,onSaveData:i=null,modelAlias:a="registro"})=>{const[r,m]=n.useState(!1),[f,x]=n.useState(!1),[y,u]=n.useState(!1),[h,k]=n.useState(!1),t=O(o),l=ce(X),b=Te();n.useEffect(()=>{const p=async()=>{try{u(!0),x(!1);const N=await E.get(t.show);N.status===200?l.setData($e(N.data[d])):x(!0)}catch(N){console.error("Error al cargar datos:",N),x(!0)}finally{u(!1)}};return l.clearErrors(),o?p():(l.setData(X),x(!1),u(!1)),()=>{}},[o]);const C=n.useCallback((p,N)=>{if(typeof p=="object"&&N===void 0){l.setData(v=>({...v,...p}));return}l.setData(v=>({...v,[p]:N}))},[l]),D=n.useCallback(()=>{const p=b.safeParse(l.data);if(l.clearErrors(),!p.success){const N=p.error.flatten().fieldErrors;Object.keys(N).forEach(v=>{l.setError(v,N[v][0])})}return p.success},[l,b]),S=n.useCallback(async()=>{try{k(!0),x(!1),l.clearErrors();const p=o?await E.put(t.update,l.data):await E.post(t.store,l.data);i&&i(p.data[d]),F.success(`Datos ${o?"actualizados":"guardados"} correctamente`),c(!1),l.clearErrors(),F.success(o?`Registro ${a} actualizado con éxito`:`Registro ${a} creado con éxito`)}catch(p){if(console.log("err",p),x(!0),p.response&&p.response.data&&p.response.data.errors){const{errors:N}=p.response.data;Object.keys(N).forEach(v=>{l.setError(v,N[v][0])})}F.error(o?`Error al actualizar el ${a}`:`Error al crear el ${a}`)}finally{k(!1)}},[o,t.update,t.store,l,i,c]),P=n.useCallback(()=>{D()&&S()},[D,S]),L=n.useMemo(()=>({modelAlias:a,model:o,error:f,form:l,updateForm:C,handleSubmit:P,setError:x,onOpenChange:c,isProcessing:r,isLoading:y,isSaving:h,setIsProcessing:m}),[a,o,f,l,C,P,c,r,y,h]);return e.jsx(ne.Provider,{value:L,children:s})};function $(){const s=n.useContext(ne);if(!s)throw new Error("useDialogData debe usarse dentro de DialogDataContextProvider");return s}const Ie=Object.keys(De),Ae={usuario:["User","Users","UserPlus","Users2","UserCheck","UserMinus","UserX"],casa:["Home","House"],configuracion:["Settings","Cog","Wrench","Tool"],archivo:["File","FileText","Folder","Archive","FolderOpen"],buscar:["Search","Filter","Scan","Eye"],editar:["Edit","Pencil","PenTool","Edit2","Edit3"],eliminar:["Trash","Trash2","X","XCircle","Delete"],guardar:["Save","Download","Archive"],correo:["Mail","MessageSquare","MessageCircle","Send"],telefono:["Phone","PhoneCall","PhoneIncoming","PhoneOutgoing"],calendario:["Calendar","Clock","Timer","CalendarDays"],dinero:["DollarSign","Euro","PoundSterling","CreditCard","Coins"],compras:["ShoppingCart","ShoppingBag","Store","Package"],musica:["Music","Headphones","Volume2","Play","Disc"],imagen:["Image","Camera","Video","Images","CameraOff"],red:["Wifi","Globe","Network","Link","ExternalLink"],seguridad:["Lock","Shield","Key","Eye","EyeOff","ShieldCheck"],favorito:["Star","Heart","Bookmark","Flag"],notificacion:["Bell","BellRing","AlertTriangle","AlertCircle"],grafico:["PieChart","BarChart3","TrendingUp","Activity","LineChart"],flecha:["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","ChevronRight"],menu:["Menu","Grid3X3","List","MoreHorizontal","MoreVertical"]};function Me({prevSelectedIcon:s,className:o,onSelect:c,disabled:d=!1,placeholder:i="Seleccionar ícono"}){const[a,r]=n.useState(!1),[m,f]=n.useState(null),x=n.useCallback(u=>{c&&c(u)},[c]);n.useEffect(()=>{f(s||null)},[s]);const y=n.useMemo(()=>Ie.map(u=>e.jsxs(J,{value:u,onSelect:()=>{const h=u===m?null:u;f(h),r(!1),x(h)},className:"flex items-center gap-3 p-2",children:[e.jsx(w,{name:u,className:R("w-5 h-5",m===u?"text-custom-orange":"text-custom-gray-semiDark dark:text-custom-white")}),e.jsx("span",{className:"text-sm flex-1",children:u}),e.jsx(w,{name:"Check",className:R("h-4 w-4",m===u?"opacity-100":"opacity-0")})]},u)),[m,x]);return e.jsxs(te,{open:a,onOpenChange:d?()=>{}:r,modal:!0,children:[e.jsx(ae,{asChild:!0,children:e.jsxs("button",{role:"combobox","aria-expanded":a,className:`w-full justify-between rounded-full bg-custom-gray-default dark:bg-custom-gray-darker text-custom-gray-semilight ${o} ${d?"opacity-50 cursor-not-allowed":"cursor-default"} text-sm flex p-2.5 items-center`,onClick:d?()=>{}:()=>r(!a),disabled:d,children:[m?e.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[e.jsx(w,{name:m,className:"w-4 h-4 text-custom-orange"}),e.jsx("span",{children:m})]}):e.jsx("span",{className:"ml-4",children:i}),e.jsx(w,{name:"ChevronsUpDown",className:"ml-2 mr-4 h-4 w-4 shrink-0 opacity-50"})]})}),"            ",e.jsx(re,{className:"w-full p-2 bg-custom-gray-default dark:bg-custom-blackSemi",children:e.jsxs(Q,{className:"bg-custom-gray-default dark:bg-custom-blackSemi",filter:(u,h)=>{if(!h)return 1;const k=h.toLowerCase(),t=u;if(t.toLowerCase().includes(k))return 1;for(const[l,b]of Object.entries(Ae))if(k.includes(l)&&b.includes(t))return 1;return 0},children:[e.jsx(Z,{className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",placeholder:"Buscar icono (ej: usuario, casa, configuracion)..."}),e.jsxs(K,{className:"dark:dark-scrollbar",children:[e.jsx(ee,{children:e.jsx("span",{children:"Ningún icono encontrado"})}),e.jsxs(se,{children:[y,e.jsxs("div",{className:"px-2 py-1 text-xs text-custom-gray-semiDark dark:text-custom-gray-semilight border-t border-custom-gray-light dark:border-custom-gray-dark mt-1 text-center",children:[y.length," iconos mostrados"]})]})]})]})})]})}const U=({checked:s=!1,onChange:o,label:c,trueLabel:d="Sí",falseLabel:i="No",disabled:a=!1,className:r=""})=>{const m=()=>{a||o==null||o(!s)};return e.jsxs("div",{className:`flex items-center gap-3 ${r}`,children:[c&&e.jsx("span",{className:"text-sm font-medium text-custom-gray-semiDark dark:text-custom-white",children:c}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm transition-colors duration-200 ${s?"text-custom-gray-default dark:text-gray-500":"text-custom-gray-semiDark dark:text-custom-white font-medium"}`,children:i}),e.jsx("button",{type:"button",onClick:m,disabled:a,className:`
            relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-custom-orange focus:ring-offset-2
            ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}
            ${s?"bg-custom-orange":"bg-custom-gray-default dark:bg-custom-gray-darker"}
          `,"aria-pressed":s,"aria-label":`${c}: ${s?d:i}`,children:e.jsx("span",{className:`
              inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm
              ${s?"translate-x-6":"translate-x-1"}
            `})}),e.jsx("span",{className:`text-sm transition-colors duration-200 ${s?"text-custom-gray-semiDark dark:text-custom-white font-medium":"text-custom-gray-default dark:text-gray-500"}`,children:d})]})]})};function Y({apiUrl:s,prevSelectedValue:o,onSelect:c,placeholder:d="Seleccionar opción",searchPlaceholder:i="Buscar...",renderOption:a,renderSelected:r,valueKey:m="id",labelKey:f="name",dataKey:x="data",allowClear:y=!0,className:u="",disabled:h=!1}){const[k,t]=n.useState(!1),[l,b]=n.useState(null),[C,D]=n.useState([]),[S,P]=n.useState(!0),[L,p]=n.useState(null),N=n.useCallback(g=>{c&&c(g)},[c]),v=n.useCallback(async()=>{if(!s){P(!1);return}try{P(!0),p(null);const g=await E.get(s),T=x?g.data[x]:g.data;D(Array.isArray(T)?T:[])}catch(g){console.error("Error fetching data:",g),p("Error al cargar los datos"),D([])}finally{P(!1)}},[s,x]);n.useEffect(()=>{v()},[v]),n.useEffect(()=>{if(o&&C.length>0){const g=C.find(T=>T[m]===o);g&&b(g)}else o||b(null)},[o,C,m]);const ie=n.useMemo(()=>C.map((g,T)=>{var H;return e.jsxs(J,{value:((H=g[f])==null?void 0:H.toString())||"",onSelect:()=>{const q=g[m]===(l==null?void 0:l[m])?null:g;b(q),t(!1),N(q)},className:"flex items-start gap-3 p-3 cursor-pointer hover:bg-custom-gray-default dark:hover:bg-custom-gray-darker min-h-[60px]",children:[e.jsx(w,{name:"Check",className:R("h-4 w-4",(l==null?void 0:l[m])===g[m]?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex-1",children:a?a(g):g[f]||"Sin nombre"})]},g[m]?`item-${g[m]}`:`item-index-${T}`)}),[C,l,N,a,m,f]),le=()=>l?r?r(l):l[f]||"Sin nombre":d;return e.jsxs(te,{open:k,onOpenChange:h?()=>{}:t,modal:!0,children:[e.jsx(ae,{asChild:!0,children:e.jsxs("button",{role:"combobox","aria-expanded":k,className:`w-full justify-between rounded-full bg-custom-gray-default dark:bg-custom-gray-darker text-custom-gray-semilight ${u} ${h?"opacity-50 cursor-not-allowed":"cursor-default"} text-sm flex p-2.5 items-center`,onClick:h?()=>{}:()=>t(!k),disabled:h,children:[e.jsx("div",{className:"flex items-center ml-4",children:e.jsx("span",{children:le()})}),e.jsx(w,{name:"ChevronsUpDown",className:"ml-2 mr-4 h-4 w-4 shrink-0 opacity-50"})]})}),"            ",e.jsx(re,{className:"w-[400px] p-2 bg-custom-gray-default dark:bg-custom-blackSemi",children:e.jsxs(Q,{className:"bg-custom-gray-default dark:bg-custom-blackSemi",children:[e.jsx(Z,{className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-gray-darker",placeholder:i}),e.jsxs(K,{className:"dark:dark-scrollbar max-h-64",children:[e.jsxs(ee,{children:[S&&e.jsx("span",{children:"Cargando datos..."}),L&&e.jsx("span",{className:"text-red-500",children:L}),!S&&!L&&e.jsx("span",{children:"Ningún elemento encontrado"})]}),e.jsx(se,{children:!S&&!L&&ie})]})]})})]})}function Ue(){const{form:s,updateForm:o,isLoading:c,model:d}=$(),{data:i,errors:a}=s,[r,m]=n.useState(i),f=_e(o,500);n.useEffect(()=>{m(i)},[i]);const x=n.useCallback((t,l)=>{m(typeof t=="object"?b=>({...b,...t}):b=>({...b,[t]:l})),a[t]&&delete a[t],f(t,l)},[f]),y=n.useCallback(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx(w,{name:t.icon||"Folder",className:"w-4 h-4 text-custom-orange"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-custom-white",children:t.name}),t.route_name&&e.jsx("span",{className:"text-xs text-custom-gray-default dark:text-gray-500",children:t.route_name})]})]}),[]),u=n.useCallback(t=>e.jsx("div",{className:"flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx(w,{name:t.icon||"Folder",className:"w-4 h-4 text-custom-orange"}),e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-custom-white",children:t.name})]}):e.jsx("span",{className:"text-sm text-custom-gray-default dark:text-gray-500",children:"Seleccionar carpeta padre"})}),[]),h=n.useCallback(t=>e.jsx("div",{className:"flex items-center gap-2 p-2",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-custom-white",children:t.name}),t.description&&e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.description})]})}),[]),k=n.useCallback(t=>e.jsx("div",{className:"flex items-center gap-2",children:t?e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-custom-white",children:t.name}):e.jsx("span",{className:"text-sm text-custom-gray-default dark:text-gray-500",children:"Seleccionar permiso"})}),[]);return c&&d?e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]},t))})})}):r?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Ícono",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx(Me,{prevSelectedIcon:r==null?void 0:r.icon,onSelect:t=>x("icon",t),placeholder:"Seleccionar ícono"}),a.icon&&e.jsx("span",{className:"text-xs text-red-500",children:a.icon})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:["Nombre del link",e.jsx("span",{className:"text-custom-orange",children:" *"})]}),e.jsx(z,{placeholder:"Nombre del enlace de navegación",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:(r==null?void 0:r.name)||"",onChange:t=>x("name",t.target.value)}),a.name&&e.jsx("span",{className:"text-xs text-red-500",children:a.name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Descripción"}),e.jsx(Ce,{placeholder:"Descripción del enlace de navegación",className:"rounded-lg dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi min-h-[80px]",value:(r==null?void 0:r.description)||"",onChange:t=>x("description",t.target.value)}),a.description&&e.jsx("span",{className:"text-xs text-red-500",children:a.description})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Padre (Grupo/Carpeta)"}),e.jsx(Y,{apiUrl:route("api.v1.admin.navigation.index"),prevSelectedValue:(r==null?void 0:r.parent_id)||null,onSelect:t=>x("parent_id",t?t.id:null),placeholder:"Seleccionar carpeta padre",searchPlaceholder:"Buscar carpeta...",renderOption:y,renderSelected:u,dataKey:"links",allowClear:!0}),a.parent_id&&e.jsx("span",{className:"text-xs text-red-500",children:a.parent_id})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Permisos"}),e.jsx(Y,{apiUrl:route("api.v1.admin.permissions.index"),prevSelectedValue:(r==null?void 0:r.permission_id)||null,onSelect:t=>x("permission_id",t?t.id:null),placeholder:"Seleccionar permiso",searchPlaceholder:"Buscar permisos...",renderOption:h,renderSelected:k,dataKey:"permissions",allowClear:!0}),a.permission_id&&e.jsx("span",{className:"text-xs text-red-500",children:a.permission_id})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Ruta"}),e.jsx(z,{placeholder:"/admin/dashboard",className:"rounded-full dark:text-custom-gray-default bg-custom-gray-default dark:bg-custom-blackSemi",value:(r==null?void 0:r.route_name)||"",onChange:t=>x("route_name",t.target.value)}),a.route_name&&e.jsx("span",{className:"text-xs text-red-500",children:a.route_name})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"Peso"}),e.jsx(oe,{weight:(r==null?void 0:r.weight)||1,interactive:!0,onWeightChange:t=>x("weight",t)}),a.weight&&e.jsx("span",{className:"text-xs text-red-500",children:a.weight})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"¿Es importante?"}),e.jsx(U,{checked:(r==null?void 0:r.is_important)||!1,onChange:t=>x("is_important",t),label:"",trueLabel:"Sí",falseLabel:"No"}),a.is_important&&e.jsx("span",{className:"text-xs text-red-500",children:a.is_important})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"¿Es reciente?"}),e.jsx(U,{checked:(r==null?void 0:r.is_recent)||!1,onChange:t=>x("is_recent",t),label:"",trueLabel:"Sí",falseLabel:"No"}),a.is_recent&&e.jsx("span",{className:"text-xs text-red-500",children:a.is_recent})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-custom-blue dark:text-custom-white",children:"¿Requiere empleado?"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{name:"Users",className:"w-4 h-4 text-custom-orange"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Si está activado, solo usuarios con empleado asignado verán este enlace"})]}),e.jsx(U,{checked:(r==null?void 0:r.requires_employee)||!1,onChange:t=>x("requires_employee",t),label:"",trueLabel:"Sí",falseLabel:"No"}),a.requires_employee&&e.jsx("span",{className:"text-xs text-red-500",children:a.requires_employee})]})]})})]}):null}function Re(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col w-full gap-12 bg-custom-white dark:bg-custom-blackLight p-4",children:[e.jsx("div",{className:"flex flex-col gap-4 dark:dark-scrollbar",children:e.jsx(j,{className:"h-8 w-[350px]"})}),e.jsxs("div",{className:"flex flex-row w-full gap-4 overflow-y-auto dark:dark-scrollbar",children:[e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(j,{className:"h-8 w-[250px]"}),e.jsx(j,{className:"h-12 w-full"})]}),e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(j,{className:"h-8 w-[250px]"}),e.jsx(j,{className:"h-12 w-full"})]})]}),e.jsx(j,{className:"h-1 w-full"}),e.jsxs("div",{className:"flex flex-row w-full gap-4 overflow-y-auto dark:dark-scrollbar",children:[e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(j,{className:"h-8 w-[250px]"}),e.jsx(j,{className:"h-12 w-full"})]}),e.jsxs("div",{className:"flex flex-col w-1/2 gap-4 dark:dark-scrollbar",children:[e.jsx(j,{className:"h-8 w-[250px]"}),e.jsx(j,{className:"h-12 w-full"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4",children:[e.jsx(j,{className:"h-10 w-24"}),e.jsx(j,{className:"h-10 w-24"})]})]})}function Oe(){const{model:s,handleSubmit:o,onOpenChange:c,isSaving:d}=$(),i=s?"Actualizar":"Guardar",a=s?"Actualizando...":"Guardando...";return e.jsxs(je,{children:[e.jsx("div",{className:"flex flex-row w-full items-center justify-between",children:e.jsxs("div",{className:"flex items-center ml-auto justify-end gap-2",children:[e.jsx(G,{variant:"secondary",onClick:()=>c(!1),disabled:d,children:"Cancelar"}),e.jsx(G,{variant:"primary",onClick:()=>o(),disabled:d,children:i})]})}),d&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-2",children:[e.jsx(Ee,{size:"sm",className:"text-custom-orange"}),e.jsxs("span",{className:"text-md",children:[a,"..."]})]})]})}function He(){const{modelAlias:s,model:o}=$(),c=n.useMemo(()=>o?`Actualizar ${s}`:`Crear ${s}`,[o]);return e.jsxs(Ne,{children:[e.jsx(be,{className:"dark:text-custom-white",children:c}),e.jsx(we,{className:"hidden",children:c})]})}const qe=()=>{const{error:s}=$();return s?e.jsxs("div",{className:"mt-4 mb-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-300 p-3 rounded-md flex items-start gap-2 animate-in fade-in slide-in-from-top-3 duration-300",children:[e.jsx(Pe,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Ha ocurrido un error"}),e.jsx("p",{className:"text-sm",children:"No se pudo procesar la solicitud. Por favor, inténtalo de nuevo."})]})]}):null};function Be({children:s}){const{isSaving:o}=$();return e.jsxs("div",{className:`flex flex-col gap-4 h-full overflow-y-auto p-4 dark:dark-scrollbar transition-opacity duration-200 ${o?"opacity-60":"opacity-100"}`,children:[e.jsx(qe,{}),s]})}function Ve(){const{isLoading:s}=$();return e.jsx(ke,{className:"flex flex-col gap-4 justify-between sm:max-w-[1225px] max-h-[725px] bg-custom-white dark:bg-custom-blackLight",children:s?e.jsx(Re,{}):e.jsxs(e.Fragment,{children:[e.jsx(He,{}),e.jsx(Be,{children:e.jsx(Ue,{})}),e.jsx(Oe,{})]})})}const ze=n.memo(function({open:o,onOpenChange:c,model:d=null,onSaveData:i=null}){return e.jsx(ve,{open:o,onOpenChange:c,children:e.jsx(Fe,{model:d,onSaveData:i,onOpenChange:c,modelAlias:"navigation",dataKey:"link",children:e.jsx(Ve,{})})})}),_=({label:s,value:o,className:c="",isHeader:d=!1,isLast:i=!1})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-custom-gray-default/50 dark:bg-custom-gray-darker/50 p-3 flex justify-between items-center",children:e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-gray-300 font-medium",children:s})}),e.jsx("div",{className:`bg-white dark:bg-custom-gray-sidebar p-3 flex items-center border-2 border-custom-gray-default dark:border-custom-gray-darker/50 ${c} ${i?"rounded-br-[20px]":""} ${d?"rounded-tr-[20px]":"-mt-[2px]"}`,children:e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-gray-200",children:o||"not Provided"})})]});function Ge({data:s,allNavigationData:o=[]}){const d=((i,a=[])=>{const r=m=>{if(!m.parent_id)return[m];const f=a.find(x=>x.id===m.parent_id);return f?[...r(f),m]:[{id:m.parent_id,name:"Elemento padre",icon:"Folder"},m]};return r(i)})(s,o);return e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("h1",{className:"text-xl font-bold text-custom-orange mb-2",children:s.name})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-custom-gray-semiDark dark:text-white mb-4",children:"Mapa"}),e.jsxs("div",{className:"space-y-2",children:[d.map((i,a)=>e.jsxs("div",{className:"flex items-center gap-2",style:{marginLeft:`${a*16}px`},children:[a>0&&e.jsx(w,{name:"CornerDownRight",className:"w-4 h-4 text-gray-400"}),e.jsx(w,{name:i.icon||(a===0?"Folder":"FileText"),className:"w-4 h-4 text-custom-orange"}),e.jsx("span",{className:`text-sm ${i.id===s.id?"text-custom-orange font-semibold":"text-custom-gray-semiDark dark:text-gray-300"}`,children:i.name})]},i.id)),s.children&&s.children.length>0&&s.children.map((i,a)=>e.jsxs("div",{className:"flex items-center gap-2",style:{marginLeft:`${d.length*16}px`},children:[e.jsx(w,{name:"CornerDownRight",className:"w-4 h-4 text-gray-400"}),e.jsx(w,{name:i.icon||"FileText",className:"w-4 h-4 text-custom-orange"}),e.jsx("span",{className:"text-sm text-custom-gray-semiDark dark:text-gray-300",children:i.name})]},i.id))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-custom-gray-semiDark dark:text-white mb-4",children:"Información"}),e.jsxs("div",{className:"grid grid-cols-2 rounded-[20px] overflow-hidden border-2 border-custom-gray-default dark:border-custom-gray-darker/50",children:[e.jsx(_,{label:"Nombre",value:s.name,isHeader:!0}),e.jsx(_,{label:"Icono",value:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{name:s.icon||"MapPin",className:"w-5 h-5 text-custom-orange"}),e.jsx("span",{children:s.icon||"MapPin"})]}),isHeader:!1}),e.jsx(_,{label:"Descripción",value:s.description||"Página de bienvenida para integrar a los nuevos colaboradores en nuestra aplicación de recursos humanos."}),e.jsx(_,{label:"Padre",value:s.parent_id?`ID: ${s.parent_id}`:"Ninguno"}),e.jsx(_,{label:"Permisos",value:s.permission?s.permission.name:"Usuario"}),e.jsx(_,{label:"¿Es importante?",value:e.jsx("span",{className:s.is_important?"text-green-600 font-semibold":"text-red-600 font-semibold",children:s.is_important?"Sí":"No"})}),e.jsx(_,{label:"¿Es reciente?",value:e.jsx("span",{className:s.is_recent?"text-green-600 font-semibold":"text-red-600 font-semibold",children:s.is_recent?"Sí":"No"})}),e.jsx(_,{label:"Peso",value:e.jsx(oe,{weight:s.weight}),isLast:!0}),e.jsx(_,{label:"Fecha de creación",value:new Date(s.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),isLast:!0})]})]})]})}function We(){return e.jsxs("div",{className:"flex flex-col w-full space-y-8",children:[e.jsxs("div",{className:"w-full flex items-center space-x-4",children:[e.jsx(j,{className:"h-24 w-24 rounded-full"}),e.jsxs("div",{className:"flex flex-col justify-center space-y-2",children:[e.jsx(j,{className:"h-4 w-[250px]"}),e.jsx(j,{className:"h-4 w-[200px]"})]})]}),e.jsx(j,{className:"h-20 w-full"}),e.jsx(j,{className:"h-96 w-full"})]})}function Xe({open:s,onOpenChange:o,model:c,enableToView:d=!0}){const i=O(c),[a,r]=n.useState(null),[m,f]=n.useState([]),[x,y]=n.useState(!0),[u,h]=n.useState(!1);return n.useEffect(()=>{const k=async()=>{try{y(!0);const[t,l]=await Promise.all([E.get(i.show),E.get(route("api.v1.admin.navigation.index"))]);if(t.status===200&&r(t.data.link),l.status===200){const b=C=>{let D=[];return C.forEach(S=>{D.push(S),S.children&&S.children.length>0&&(D=D.concat(b(S.children)))}),D};f(b(l.data.links))}else h(!0)}catch(t){h(!0),console.error("Error fetching navigation data:",t)}finally{y(!1)}};return c&&s&&i.show&&k(),()=>{}},[c,s,i.show]),x||!d?e.jsx(W,{title:null,open:s,onOpenChange:o,className:"w-full max-w-full sm:min-w-[600px]",descriptionContent:e.jsx("div",{className:"flex items-center justify-center w-full h-full mt-6",children:e.jsx(We,{})})}):e.jsx(W,{title:null,open:s,onOpenChange:o,className:"w-full max-w-full sm:min-w-[600px]",descriptionContent:e.jsx(e.Fragment,{children:a&&e.jsx(e.Fragment,{children:e.jsx(Ge,{data:a,allNavigationData:m})})})})}function Ye({open:s,onOpenChange:o,model:c,onDelete:d}){const i=O(c),a=async()=>{try{(await E.delete(i.delete)).status===200&&(d&&d(c),F.success("Registro eliminado correctamente"))}catch(r){console.error("error :>> ",r),F.error("Error al eliminar el registro")}};return e.jsx(Le,{title:"¿Estás seguro de que quieres eliminar este centro?",content:"Esta acción no se puede deshacer. Todos los datos relacionados con este centro se eliminarán.",open:s,onOpenChange:o,action:a,variant:"destructive",icon:e.jsx(w,{name:"OctagonAlert",className:"w-6 h-6 text-red-500"})})}function Je(){return e.jsxs(e.Fragment,{children:[e.jsx(me,{title:"Administración de navegación"}),e.jsx("div",{className:"max-w-full mx-auto py-7 xl:px-8 px-4 overflow-hidden",children:e.jsx(ue,{CreateUpdateViewComponent:ze,SheetTableViewComponent:Xe,DeleteViewComponent:Ye,children:e.jsxs(pe,{children:[e.jsx(fe,{}),e.jsx(xe,{}),e.jsx(he,{}),e.jsx(ge,{})]})})})]})}Je.layout=s=>e.jsx(de,{children:s});export{Je as default};
