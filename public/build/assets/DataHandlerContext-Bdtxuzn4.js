import{r as e,j as k}from"./app-fwyInB3c.js";const f=e.createContext(null);function D(){const o=e.useContext(f);if(!o)throw new Error("useDataHandler debe usarse dentro de DataHandlerContextProvider");return o}const b=({children:o})=>{const[x,s]=e.useState([]),[h,c]=e.useState(!0),d=e.useCallback(t=>{const a=[],r=(n,u=0)=>{n.forEach(i=>{a.push({...i,level:u}),i.children&&i.children.length>0&&r(i.children,u+1)})};return r(t),a},[]),l=e.useCallback(async()=>{c(!0);try{const t=await axios.get(route("api.v1.admin.navigation.index"));if(t.status===200){const a=d(t.data.links);s(a)}else s([])}catch{s([])}finally{c(!1)}},[s,c,d]),C=e.useCallback(t=>{s(a=>a.some(n=>n.id===(t==null?void 0:t.id))?[t,...a.filter(n=>n.id!==t.id)]:[t,...a])},[]),g=e.useCallback(t=>{s(a=>a.filter(r=>r.id!==t))},[]);return e.useEffect(()=>{l()},[l]),k.jsx(f.Provider,{value:{data:x,setData:s,fetchData:l,loading:h,updateData:C,deleteItem:g},children:o})};export{b as DataHandlerContextProvider,D as useDataHandler};
