import{r as f,G as C,j as e}from"./app-fwyInB3c.js";import{I as l}from"./LucideIcon-CEqEhMjI.js";import{B as c}from"./Button-CQuYVLGu.js";import{toast as t}from"./index-WlsBA3k2.js";import{D,a as I,b as _,c as x}from"./dropdown-menu-bHoOJ61X.js";import"./createLucideIcon-DoJ0Kelj.js";import"./calendar-days-Dti00tYQ.js";import"./calendar-k1x2vwx8.js";import"./check-5DjPwM22.js";import"./chevron-up-OjKdrhzc.js";import"./chevron-right-B1iws4WK.js";import"./user-plus-zM6CnMXf.js";import"./user-CNwXqt1W.js";import"./octagon-alert-BRAzZNeG.js";import"./x-2mzC_aTV.js";import"./index-DloWbRVd.js";import"./index-BwobEAja.js";import"./utils-CytzSlOG.js";import"./index-DmpKZt4E.js";import"./index-p2DxCSsL.js";import"./index-BIJodELy.js";import"./index-C_F9oucK.js";import"./index-B7srb2QZ.js";import"./index-DmaU4p-o.js";import"./index-CyKk8pQ_.js";import"./tslib.es6-BUas5LQb.js";import"./index-CLai1W86.js";import"./index-BZgm3BCW.js";import"./index-BZxTbISK.js";import"./index-v24TFYKQ.js";function ne({user:o,activeTab:d,setActiveTab:g,jetstream:b}){var u;const[i,s]=f.useState(null),a=f.useRef(null),{data:m,setData:p,post:y,delete:k,errors:E}=C({_method:"PUT",name:o.name,email:o.email,photo:null}),j=()=>{a.current.click()},v=()=>{const r=a.current.files[0];if(!r)return;if(r.size>5*1024*1024){t.error("El archivo es demasiado grande. M치ximo 5MB.");return}if(!r.type.startsWith("image/")){t.error("Tipo de archivo inv치lido. Solo se permiten im치genes.");return}const h=new FileReader;p("photo",r),h.onload=S=>{s(S.target.result),t.success("Foto seleccionada correctamente.")},h.readAsDataURL(r)},N=()=>{m.photo&&y(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:r=>{s(null),n(),t.success("Foto de perfil actualizada correctamente.")},onError:r=>{t.error("Error al actualizar la foto de perfil.")}})},w=()=>{k(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{s(null),n(),t.success("Foto de perfil eliminada correctamente.")},onError:()=>{t.error("Error al eliminar la foto de perfil.")}})},n=()=>{a.current&&(a.current.value=null),p("photo",null)},P=[{key:"profile",icon:"User",label:"Perfil y datos personales",condition:b.canUpdateProfileInformation},{key:"WorkData",icon:"Briefcase",label:"Datos laborales",condition:!0},{key:"2fa",icon:"Shield",label:"Seguridad y privacidad",condition:!0},{key:"appearance",icon:"Palette",label:"Apariencia y presentaci칩n",condition:!0},{key:"notifications",icon:"Bell",label:"Notificaciones",condition:!0}];return e.jsxs("div",{className:"w-full overflow-hidden",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{id:"photo",ref:a,type:"file",accept:"image/*",className:"hidden",onChange:v}),e.jsxs("div",{className:"relative group",children:[i?e.jsx("span",{className:"block rounded-full w-40 h-40 bg-cover bg-no-repeat bg-center border border-gray-200 dark:border-gray-600",style:{backgroundImage:`url('${i}')`}}):e.jsx("img",{src:o.profile_photo_url,alt:o.name,className:"rounded-full h-40 w-40 object-cover border border-gray-200 dark:border-gray-600"}),!i&&e.jsxs(D,{children:[e.jsx(I,{asChild:!0,children:e.jsx(c,{size:"icon",variant:"secondary",className:"absolute top-1 right-3","aria-label":"Opciones de foto",children:e.jsx(l,{name:"Camera",className:"w-4 h-4"})})}),e.jsxs(_,{className:"dark:bg-custom-blackSemi",children:[e.jsxs(x,{onSelect:j,children:[e.jsx(l,{name:"SquarePen",className:"w-4 mr-2"})," Cambiar foto"]}),e.jsxs(x,{className:`font-bold ${o.profile_photo_url?"text-red-500 hover:!bg-red-500/40 hover:!text-red-500":"text-gray-400 cursor-not-allowed"}`,onSelect:o.profile_photo_url?w:void 0,disabled:!o.profile_photo_url,children:[e.jsx(l,{name:"Trash2",className:"w-4 mr-2"}),"Eliminar foto"]})]})]})]}),i&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(c,{variant:"secondary",onClick:()=>{s(null),n()},children:"Cancelar"}),e.jsx(c,{variant:"primary",onClick:N,disabled:!m.photo,children:"Guardar"})]}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o.descripcion||((u=o.empleado)==null?void 0:u.puesto)||"No disponible"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("nav",{children:P.filter(r=>r.condition).map(r=>e.jsxs("button",{onClick:()=>g(r.key),className:`w-full flex items-center px-3 py-3 text-sm font-medium rounded-full transition-colors duration-200 mb-1 ${d===r.key?"bg-custom-gray-default dark:bg-custom-blackSemi text-custom-gray-darker dark:text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-custom-blackSemi"}`,children:[e.jsx(l,{name:r.icon,className:`w-4 h-4 mr-3 ${d===r.key,"dark:text-white text-custom-gray-darker"}`}),e.jsx("span",{className:"flex-1 text-left",children:r.label})]},r.key))})})]})}export{ne as default};
